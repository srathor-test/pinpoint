function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,n){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],l=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(l=(o=u.next()).done)&&(t.push(o.value),!n||t.length!==n);l=!0);}catch(s){i=!0,a=s}finally{try{l||null==u.return||u.return()}finally{if(i)throw a}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"24Za":function(e,n,t){"use strict";t.r(n);var l=t("8Y7J"),i=function e(){_classCallCheck(this,e)},a=t("pMnS"),o=t("EGXd"),u=t("XWnP"),s=t("exIq"),r=t("C6IX"),c=t("h6xd"),h=t("SVse"),d=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),p=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]::after{content:'';width:0;height:0;position:absolute;border-bottom:7px solid #f6f8fb;border-right:7px solid transparent;border-left:7px solid transparent;bottom:100%;left:0;right:0;margin:auto}.l-popup-title[_ngcontent-%COMP%]{background-color:#f6f8fb;border-bottom:1px solid #e5e8f0;padding:10px;display:-webkit-box;display:flex;-webkit-box-pack:space-evenly;justify-content:space-evenly;font-weight:400}.l-popup-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.l-issue-message[_ngcontent-%COMP%]{padding:12px 15px 8px;font-size:13px}.l-cause-list[_ngcontent-%COMP%]{padding:0 12px 12px;font-size:13px;border-bottom:1px solid #e5e8f0}.l-cause-list-item[_ngcontent-%COMP%], .l-solution-list-item[_ngcontent-%COMP%]{padding:3px}.l-solution-list[_ngcontent-%COMP%]{padding:12px;font-size:13px}"]],data:{}});function g(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","l-cause-list-item"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,n){e(n,1,0,n.context.$implicit)}))}function f(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","l-solution-list-item"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,n){e(n,1,0,n.context.$implicit)}))}function m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"h4",[["class","l-popup-title"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"span",[["class","l-prev-application-name-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,["",""])),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","fas fa-arrows-alt-h"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"span",[["class","l-curr-application-name-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,["",""])),(e()(),l["\u0275eld"](6,0,null,null,0,"p",[["class","l-issue-message"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,2,"ul",[["class","l-cause-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,g)),l["\u0275did"](9,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](10,0,null,null,2,"ul",[["class","l-solution-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,f)),l["\u0275did"](12,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var t=n.component;e(n,9,0,t.data.message.ISSUE_CAUSES),e(n,12,0,t.data.message.ISSUE_SOLUTIONS)}),(function(e,n){var t=n.component;e(n,2,0,t.data.prevAppName),e(n,5,0,t.data.currAppName),e(n,6,0,t.data.message.ISSUE_MESSAGE)}))}l["\u0275ccf"]("pp-application-name-issue-popup",d,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-name-issue-popup",[],null,null,null,m,p)),l["\u0275did"](1,114688,null,0,d,[],null,null)],(function(e,n){e(n,1,0)}),null)}),{data:"data"},{},[]);var v=t("S5y4"),b=t("XNiG"),y=t("1G5W"),T=t("lJxs"),C=t("zp1y"),S=t("ZF+8"),k=t("TwVa"),O=function(){function e(n,t,i,a){_classCallCheck(this,e),this.elementRef=n,this.newUrlStateNotificationService=t,this.translateService=i,this.translateReplaceService=a,this.outCreated=new l.EventEmitter,this.outClose=new l.EventEmitter,this.unsubscribe=new b.b}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,n=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(y.a)(this.unsubscribe),Object(T.a)((function(e){return e.getPathValue(k.b.APPLICATION).getApplicationName()})));this.data$=this.translateService.get("INSPECTOR.APPLICAITION_NAME_ISSUE").pipe(Object(C.a)(n),Object(T.a)((function(n){var t=_slicedToArray(n,2),l=t[0],i=t[1],a=e.data,o=a.agentId,u=a.applicationName;return{prevAppName:i,currAppName:u,message:{ISSUE_MESSAGE:e.translateReplaceService.replace(l.ISSUE_MESSAGE,i,u),ISSUE_CAUSES:[e.translateReplaceService.replace(l.ISSUE_CAUSES[0],i,u),e.translateReplaceService.replace(l.ISSUE_CAUSES[1],o,u)],ISSUE_SOLUTIONS:[e.translateReplaceService.replace(l.ISSUE_SOLUTIONS[0],i,o),l.ISSUE_SOLUTIONS[1]]}}})))}},{key:"ngAfterViewInit",value:function(){this.outCreated.emit({coordX:this.coord.coordX-this.elementRef.nativeElement.offsetWidth/2,coordY:this.coord.coordY+9+7})}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"onInputChange",value:function(){this.outClose.emit()}},{key:"onClickOutside",value:function(){this.outClose.emit()}}]),e}(),E=t("nUCp"),P=t("TSSN"),_=t("jVku"),I=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:300px;border-radius:3px}"]],data:{}});function R(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"pp-application-name-issue-popup",[],null,[[null,"clickOutside"]],(function(e,n,t){var l=!0,i=e.component;return"clickOutside"===n&&(l=!1!==i.onClickOutside()&&l),l}),m,p)),l["\u0275did"](1,737280,null,0,v.ClickOutsideDirective,[l.ElementRef,l.NgZone,l.PLATFORM_ID],{exclude:[0,"exclude"]},{clickOutside:"clickOutside"}),l["\u0275did"](2,114688,null,0,d,[],{data:[0,"data"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,n){var t=n.component;e(n,1,0,".l-not-same-button, .fa-comment-alt"),e(n,2,0,l["\u0275unv"](n,2,0,l["\u0275nov"](n,3).transform(t.data$)))}),null)}var x=l["\u0275ccf"]("pp-application-name-issue-popup-container",O,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-name-issue-popup-container",[],null,null,null,R,I)),l["\u0275did"](1,4440064,null,0,O,[l.ElementRef,E.a,P.i,_.a],null,null)],(function(e,n){e(n,1,0)}),null)}),{data:"data",coord:"coord"},{outCreated:"outCreated",outClose:"outClose"},[]),w=t("huS9"),M=t("oIO+"),A=t("Xf8D"),D=function(){function e(n,t,l,i,a,o,u){_classCallCheck(this,e),this.storeHelperService=n,this.translateService=t,this.translateReplaceService=l,this.analyticsService=i,this.dynamicPopupService=a,this.componentFactoryResolver=o,this.injector=u,this.i18nText={MIN_LENGTH_MSG:""},this.searchUseEnter=!1,this.SEARCH_MIN_LENGTH=2}return _createClass(e,[{key:"ngOnInit",value:function(){this.getI18NText()}},{key:"getI18NText",value:function(){var e=this;this.translateService.get("COMMON.MIN_LENGTH").subscribe((function(n){e.i18nText.MIN_LENGTH_MSG=e.translateReplaceService.replace(n,e.SEARCH_MIN_LENGTH)}))}},{key:"onSearchQuery",value:function(e){this.analyticsService.trackEvent(S.e.SEARCH_AGENT),this.storeHelperService.dispatch(new M.a.UpdateFilterOfServerAndAgentList(e))}},{key:"onCancel",value:function(){this.storeHelperService.dispatch(new M.a.UpdateFilterOfServerAndAgentList(""))}},{key:"onShowHelp",value:function(e){this.analyticsService.trackEvent(S.e.TOGGLE_HELP_VIEWER,A.a.AGENT_LIST);var n=e.target.getBoundingClientRect(),t=n.left,l=n.top,i=n.width,a=n.height;this.dynamicPopupService.openPopup({data:A.a.AGENT_LIST,coord:{coordX:t+i/2,coordY:l+a/2},component:A.b},{resolver:this.componentFactoryResolver,injector:this.injector})}}]),e}(),N=t("OPvN"),L=t("/yY+"),F=t("9BJz"),j=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:38px}.l-container-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;background:#f5f5f5;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;width:100%;height:100%;padding:4px 4px 4px 11px}.l-container-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#a8acb5;font-size:18px}.l-wrapper[_ngcontent-%COMP%]{width:205px;height:100%;color:#b3b3b4;position:relative;margin-right:7px}.l-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #d7dde4;background-color:#fff;padding:9px 8px 9px 11px}.l-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:50%;right:8px;-webkit-transform:translateY(-50%);transform:translateY(-50%)}[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:12px}[_ngcontent-%COMP%]::-moz-placeholder{font-size:12px}[_ngcontent-%COMP%]::-ms-input-placeholder{font-size:12px}[_ngcontent-%COMP%]::placeholder{font-size:12px}"]],data:{}});function U(e){return l["\u0275vid"](2,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","l-container-wrapper font-opensans"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","l-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"input",[["class","l-search-input"],["ppSearchInput",""],["type","text"]],[[8,"placeholder",0]],[[null,"outCancel"],[null,"outSearch"],[null,"keydown"],[null,"keyup"]],(function(e,n,t){var i=!0,a=e.component;return"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).onKeyDown(t)&&i),"keyup"===n&&(i=!1!==l["\u0275nov"](e,3).onKeyUp(t)&&i),"outCancel"===n&&(i=!1!==a.onCancel()&&i),"outSearch"===n&&(i=!1!==a.onSearchQuery(t)&&i),i}),null,null)),l["\u0275did"](3,737280,null,0,w.a,[l.ElementRef],{searchMinLength:[0,"searchMinLength"],useEnter:[1,"useEnter"]},{outCancel:"outCancel",outSearch:"outSearch"}),(e()(),l["\u0275eld"](4,0,null,null,0,"button",[["class","fas fa-search"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onShowHelp(t)&&l),l}),null,null))],(function(e,n){var t=n.component;e(n,3,0,t.SEARCH_MIN_LENGTH,t.searchUseEnter)}),(function(e,n){var t=n.component;e(n,2,0,l["\u0275inlineInterpolate"](1,"",t.i18nText.MIN_LENGTH_MSG,""))}))}l["\u0275ccf"]("pp-agent-search-input-container",D,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-search-input-container",[],null,null,null,U,j)),l["\u0275did"](1,114688,null,0,D,[N.a,P.i,_.a,L.a,F.a,l.ComponentFactoryResolver,l.Injector],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var z=t("pLZG"),G=function(){function e(n,t,l,i){_classCallCheck(this,e),this.webAppSettingDataService=n,this.newUrlStateNotificationService=t,this.urlRouteManagerService=l,this.analyticsService=i,this.unsubscribe=new b.b}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.funcImagePath=this.webAppSettingDataService.getIconPathMakeFunc(),this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(y.a)(this.unsubscribe),Object(z.a)((function(e){return e.hasValue(k.b.APPLICATION)}))).subscribe((function(n){e.applicationName=n.getPathValue(k.b.APPLICATION).getApplicationName(),e.applicationServiceType=n.getPathValue(k.b.APPLICATION).getServiceType(),e.applicationIconImagePath=e.funcImagePath(e.applicationServiceType),e.agentId=n.hasValue(k.b.AGENT_ID)?n.getPathValue(k.b.AGENT_ID):""}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"onSelectApplication",value:function(){var e=this.newUrlStateNotificationService.isRealTimeMode()?[k.a.INSPECTOR,k.a.REAL_TIME,this.newUrlStateNotificationService.getPathValue(k.b.APPLICATION).getUrlStr()]:[k.a.INSPECTOR,this.newUrlStateNotificationService.getPathValue(k.b.APPLICATION).getUrlStr(),this.newUrlStateNotificationService.getPathValue(k.b.PERIOD).getValueWithTime(),this.newUrlStateNotificationService.getPathValue(k.b.END_TIME).getEndTime()];this.urlRouteManagerService.moveOnPage({url:e}),this.analyticsService.trackEvent(S.e.GO_TO_APPLICATION_INSPECTOR)}}]),e}(),H=t("W33f"),V=t("D5ZC"),$=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:32px}.l-wrapper[_ngcontent-%COMP%]{cursor:pointer;display:block;padding:8px 6px 6px 13px;overflow:hidden;font-size:12px;white-space:nowrap;text-overflow:ellipsis}.l-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;width:22px;height:18px;margin-right:4px}.l-wrapper.active[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600}.l-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer;color:var(--primary-color);background-color:#eee}"]],data:{}});function B(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","l-wrapper"]],[[2,"active",null],[1,"title",0]],[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onSelectApplication()&&l),l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),l["\u0275ted"](2,null,["","\n"]))],null,(function(e,n){var t=n.component;e(n,0,0,!t.agentId,t.applicationName),e(n,1,0,t.applicationIconImagePath),e(n,2,0,t.applicationName)}))}l["\u0275ccf"]("pp-application-inspector-title-container",G,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-inspector-title-container",[],null,null,null,B,$)),l["\u0275did"](1,245760,null,0,G,[H.a,E.a,V.a,L.a],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var Z=function(){function e(){_classCallCheck(this,e),this.outSelectAgent=new l.EventEmitter}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getIconPath",value:function(e){var n="";switch(e){case 200:case 201:n="icon-down";break;case 300:n="icon-disconnect";break;case-1:n="icon-error"}return this.funcImagePath(n)}},{key:"onSelectAgent",value:function(e){this.outSelectAgent.emit(e)}},{key:"toggleMenu",value:function(e){this.isCollapsed[e]=!this.isCollapsed[e]}},{key:"getCollapsedState",value:function(e){return this.isCollapsed[e]?"collapsed":"spreaded"}},{key:"isActive",value:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".l-agent-name-wrapper")).some((function(e){return e.classList.contains("active")}))}},{key:"serverKeyList",set:function(e){this._serverKeyList=e,0!==e.length&&(this.isCollapsed=e.reduce((function(e,n){return Object.assign({},e,_defineProperty({},n,!1))}),{}))},get:function(){return this._serverKeyList}}]),e}(),X=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%;font-size:13px}.l-servers-list[_ngcontent-%COMP%]{overflow-x:hidden;height:100%}.l-depth-0[_ngcontent-%COMP%]   .l-name-wrapper[_ngcontent-%COMP%]{padding:8px 10px 8px 17px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.l-name[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.l-depth-1[_ngcontent-%COMP%]   .l-name-wrapper[_ngcontent-%COMP%]{margin-left:15px;font-size:90%;max-width:calc(100% - 15px)}.l-name-wrapper[_ngcontent-%COMP%]{display:block}.l-name-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.l-name-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#eee;color:var(--primary-color)!important}.l-name-wrapper.active[_ngcontent-%COMP%]{color:var(--primary-color)!important}.l-icon-alert[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{vertical-align:middle}"]],data:{animation:[{type:7,name:"collapseSpread",definitions:[{type:0,name:"collapsed",styles:{type:6,styles:{height:0,overflow:"hidden"},offset:null},options:void 0},{type:0,name:"spreaded",styles:{type:6,styles:{height:"auto"},offset:null},options:void 0},{type:1,expr:"collapsed <=> spreaded",animation:[{type:4,styles:null,timings:"0.5s"}],options:null}],options:{}},{type:7,name:"rightDown",definitions:[{type:0,name:"collapsed",styles:{type:6,styles:{transform:"none"},offset:null},options:void 0},{type:0,name:"spreaded",styles:{type:6,styles:{transform:"rotate(90deg)"},offset:null},options:void 0},{type:1,expr:"collapsed <=> spreaded",animation:[{type:4,styles:null,timings:"0.3s"}],options:null}],options:{}}]}});function W(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","l-icon-alert"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(e,n){e(n,1,0,n.component.getIconPath(n.parent.context.$implicit.status.state.code))}))}function Y(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","l-agent"]],[[1,"title",0]],[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onSelectAgent(e.context.$implicit.agentId)&&l),l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","l-agent-name-wrapper l-name-wrapper"]],[[2,"active",null]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"span",[["class","l-name"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["class","fas fa-hdd"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,[" "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,W)),l["\u0275did"](6,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,6,0,100!==n.context.$implicit.status.state.code)}),(function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.agentId),e(n,1,0,n.context.$implicit.agentId===t.agentId),e(n,4,0,n.context.$implicit.agentId)}))}function q(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,[["serverDiv",1]],null,4,"div",[["class","l-server-name-wrapper l-name-wrapper"]],[[1,"title",0],[2,"active",null]],[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.toggleMenu(e.context.$implicit)&&l),l}),null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"span",[["class","l-name"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["class","fas fa-server"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,[" "," "])),(e()(),l["\u0275eld"](5,0,null,null,0,"i",[["class","fas fa-angle-right"]],[[24,"@rightDown",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"ul",[["class","l-agent-list l-depth-1"]],[[24,"@collapseSpread",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Y)),l["\u0275did"](8,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,8,0,n.component.serverList[n.context.$implicit])}),(function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.isActive(l["\u0275nov"](n,1))),e(n,4,0,n.context.$implicit),e(n,5,0,t.getCollapsedState(n.context.$implicit)),e(n,6,0,t.getCollapsedState(n.context.$implicit))}))}function Q(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","l-servers-list l-depth-0"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,q)),l["\u0275did"](2,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.component.serverKeyList)}),null)}l["\u0275ccf"]("pp-server-and-agent-list",Z,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-server-and-agent-list",[],null,null,null,Q,X)),l["\u0275did"](1,114688,null,0,Z,[],null,null)],(function(e,n){e(n,1,0)}),null)}),{funcImagePath:"funcImagePath",serverKeyList:"serverKeyList",serverList:"serverList",agentId:"agentId"},{outSelectAgent:"outSelectAgent"},[]);var K=t("itXk"),J=t("r0o6"),ee=t("LRne"),ne=t("eIep"),te=t("3E0/"),le=t("vkgz"),ie=t("bOdf"),ae=t("Ej/u"),oe=t("2Vo4"),ue=function(){function e(n,t,l){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.addElements()}return _createClass(e,[{key:"addElements",value:function(){this.backgroundRect=this.snap.rect(this.options.left,this.options.top,this.options.width,this.options.height),this.group.add(this.backgroundRect)}},{key:"reset",value:function(e){this.backgroundRect.animate({width:e},this.options.duration,mina.easein)}},{key:"destroy",value:function(){}}]),e}(),se=function(){function e(n){_classCallCheck(this,e),this.onChangeStatusData$=new oe.a(null),this.onChangeEventData$=new oe.a(null),this.initData(n),this.onChangeStatusData$.next(this.aStatusRawData),this.onChangeEventData$.next(this.aEventRawData)}return _createClass(e,[{key:"initData",value:function(e){this.initStatusData(e.agentStatusTimeline),this.initEventData(e.agentEventTimeline)}},{key:"initStatusData",value:function(e){var n=this;this.aStatusRawData=e.timelineSegments||[],this.oStatusRawHash={},this.aStatusRawData.forEach((function(e){n.oStatusRawHash[n.makeID(e)]=e}))}},{key:"initEventData",value:function(e){this.aEventRawData=e.timelineSegments||[]}},{key:"makeID",value:function(e){return e.endTimestamp+""}},{key:"eventCount",value:function(){return this.aEventRawData.length}},{key:"statusCount",value:function(){return this.aStatusRawData.length}},{key:"getDataByIndex",value:function(e){return this.aStatusRawData[e]}},{key:"getDataByKey",value:function(e){return this.oStatusRawHash[e]}},{key:"getEventDataByIndex",value:function(e){return this.aEventRawData[e]}},{key:"emptyData",value:function(){this.aStatusRawData=[],this.oStatusRawHash={},this.aEventRawData=[]}},{key:"addData",value:function(e){this.initData(e),this.onChangeStatusData$.next(this.aStatusRawData),this.onChangeEventData$.next(this.aEventRawData)}},{key:"destroy",value:function(){}}]),e}(),re=function(){function e(n,t,l,i){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.oPositionManager=i,this.aEventGroupElement=[],this.clickEvent$=new b.b,this.initOptions(),this.addEvents()}return _createClass(e,[{key:"initOptions",value:function(){var e=this,n={y:4,barLength:4,gapBarNCircle:2,circleRadius:8,filter:this.snap.filter(Snap.filter.shadow(1,1,1,"#000",.3))};Object.keys(n).forEach((function(t){e.options[t]=n[t]}))}},{key:"addEvents",value:function(){var e=this;this.group.click((function(n,t,l){var i=e.getElement(n,"g"),a=Math.floor(i.getAttribute("data-id"));e.clickEvent$.next(e.aEventStatusData[a])}))}},{key:"getElement",value:function(e,n){for(var t=e.target;t&&t.tagName.toLowerCase()!==n;)t=t.parentElement;return t}},{key:"updateData",value:function(e){this.aEventStatusData=e,this.emptyData(),this.reset()}},{key:"emptyData",value:function(){this.aEventGroupElement.forEach((function(e){e.attr("display","none")}))}},{key:"reset",value:function(){var e,n=this.aEventGroupElement.length,t=this.aEventStatusData.length;if(n===t)for(e=0;e<t;e++)this.reposition(this.aEventGroupElement[e],e);else if(n>t){for(e=t;e<n;e++)this.aEventGroupElement[e].attr("display","none");for(e=0;e<t;e++)this.reposition(this.aEventGroupElement[e],e)}else{for(e=0;e<n;e++)this.reposition(this.aEventGroupElement[e],e);for(e=n;e<t;e++)this.addEventElement(this.aEventStatusData[e],e)}}},{key:"reposition",value:function(e,n){var t=this.aEventStatusData[n],l=t.startTimestamp+(t.endTimestamp-t.startTimestamp)/2,i=this.oPositionManager.getPositionByTime(l),a=this.getEventTextInfo(t.value.totalCount);e[2].attr({x:a.x,y:a.y,text:a.text}),e.attr("display","block"),e.animate({transform:"translate(".concat(i,", 0)")},this.options.duration)}},{key:"addEventElement",value:function(e,n){this.group.add(this.makeElement(e,n))}},{key:"makeElement",value:function(e,n){var t=e.startTimestamp+(e.endTimestamp-e.startTimestamp)/2,l=this.getEventTextInfo(e.value.totalCount),i=this.group.g().attr({"data-id":n,"data-time":t,transform:"translate(".concat(this.oPositionManager.getPositionByTime(t),", 0)")});return i.add(this.snap.line(0,this.options.y,0,this.options.y+this.options.barLength),this.snap.circle(0,this.options.y+this.options.circleRadius+this.options.gapBarNCircle+this.options.barLength,this.options.circleRadius).attr({class:"event",filter:this.options.filter,"data-time":t}),this.snap.text(l.x,l.y,l.text).attr({class:"event"})),this.aEventGroupElement.push(i),i}},{key:"getEventTextInfo",value:function(e){return{x:e<10?-this.options.circleRadius/3:-this.options.circleRadius/4*3,y:this.options.y+this.options.circleRadius+this.options.circleRadius/2+this.options.gapBarNCircle+this.options.barLength,text:e>=100?"...":e+""}}},{key:"destroy",value:function(){}}]),e}(),ce=function(){function e(n,t,l){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.onDragStart$=new b.b,this.onDragging$=new b.b,this.onDragEnd$=new b.b,this.previousX=l.x,this.addElements(),this.setX(l.x),this.addEvent()}return _createClass(e,[{key:"addElements",value:function(){this.handlerGrip=this.snap.circle(0,3,5).attr({fill:"#777af9",cursor:"pointer",stroke:"#4E50C8","stroke-width":"3px"}),this.handlerGroup=this.group.g(),this.handlerGroup.add(this.snap.line(0,0,0,this.options.height),this.snap.circle(0,3,7).attr({fill:"#000",filter:Snap.filter.shadow(0,0,2,"#000",.5)}),this.handlerGrip)}},{key:"addEvent",value:function(){var e=this,n=-1;this.handlerGrip.click((function(e){e.stopPropagation()})),this.handlerGrip.mousedown((function(e){e.stopPropagation()})),this.handlerGrip.drag((function(t,l,i,a,o){var u=i-e.options.margin;!1!==e.isInRestrictionZone(u)&&(e.handlerGroup.attr({transform:"translate(".concat(u,", 0)")}),n=u,e.onDragging$.next(u))}),(function(n,t,l){l.stopPropagation(),e.onDragStart$.next(n-e.options.margin)}),(function(t){t.stopPropagation(),e.previousX!==n&&-1!==n?(e.onDragEnd$.next({dragged:!0,x:n}),e.previousX=n):e.onDragEnd$.next({dragged:!1,x:-1})}))}},{key:"setX",value:function(e){this.handlerGroup.animate({transform:"translate(".concat(e,", 0)")},this.options.duration,mina.easeout)}},{key:"isInRestrictionZone",value:function(e){return!(e<=this.options.zone[0]||e>=this.options.zone[1])}},{key:"setZone",value:function(e,n){this.options.zone=[e,n]}},{key:"setPositionAndZone",value:function(e,n){this.setX(e),this.onDragging$.next(e),this.setZone(n[0],n[1])}},{key:"destroy",value:function(){}}]),e}();ce.HANDLER_IMAGE_WIDTH=30,ce.HANDLER_IMAGE_HEIGHT=18;var he=function(){function e(n,t,l){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.bRun=!1,this.addElements(),this.show()}return _createClass(e,[{key:"addElements",value:function(){var e=this.getCenterPosition(this.options.width,this.options.height,this.options.size),n=this.snap.rect(0,0,this.options.width,this.options.height);this.clockWiseRect=this.snap.rect(e.x,e.y,this.options.size,this.options.size).attr({stroke:"rgba(197, 197, 197, .9)"}),this.antiClockWiseRect=this.snap.rect(e.x,e.y,this.options.size,this.options.size).attr({stroke:"rgba(239, 246, 105)"}),this.group.add(n,this.clockWiseRect,this.antiClockWiseRect)}},{key:"getCenterPosition",value:function(e,n,t){var l=t/2;return{x:e/2-l,y:n/2-l}}},{key:"show",value:function(){this.group.attr("display","block"),this.bRun=!0,this.animate(this.clockWiseRect,0,360,mina.easeout),this.animate(this.antiClockWiseRect,45,-315,mina.easein)}},{key:"animate",value:function(e,n,t,l){var i=this;Snap.animate(n,t,(function(n){e.attr("transform","rotate("+n+"deg)")}),this.options.duration,l,(function(){!0===i.bRun&&i.animate(e,t,n,l)}))}},{key:"hide",value:function(){this.group.attr("display","none"),this.bRun=!1}},{key:"destroy",value:function(){}}]),e}(),de=t("f0Wu"),pe=function(){function e(n){_classCallCheck(this,e),this.options=n,this.aSelectionTimeRange=[],this.aSelectionPosition=[],this.width=n.width,this.minTimeRange=n.minTimeRange,this.maxSelectionTimeRange=n.maxSelectionTimeRange,this.initInnerVar(),this.setTimelineRange(n.timelineRange[0],n.timelineRange[1]),this.initSelectionTimeRange(n.selectionTimeRange||[]),this.resetSelectionByTime(),this.xAxisTicks=n.xAxisTicks||e.X_AXIS_TICKS,this.setPointingTime(n.pointingTime)}return _createClass(e,[{key:"initInnerVar",value:function(){this.aSelectionTimeRange=[],this.aSelectionPosition=[]}},{key:"setTimelineRange",value:function(e,n){this.startTime=e,this.endTime=n,this.calcuTimePerPoint()}},{key:"initSelectionTimeRange",value:function(e){2!==e.length&&(e=[this.startTime,this.endTime]),e[1]-e[0]>this.maxSelectionTimeRange&&(e[0]=e[1]-this.maxSelectionTimeRange),this.setSelectionTimeRange(e[0],e[1])}},{key:"resetSelectionByTime",value:function(){this.setSelectionPosition(this.getPositionByTime(this.aSelectionTimeRange[0]),this.getPositionByTime(this.aSelectionTimeRange[1]))}},{key:"calcuTimePerPoint",value:function(){this.timePerPoint=(this.endTime-this.startTime)/this.width}},{key:"setSelectionTimeRange",value:function(e,n){this.aSelectionTimeRange[0]=null===e?this.aSelectionTimeRange[0]:e,this.aSelectionTimeRange[1]=null===n?this.aSelectionTimeRange[1]:n}},{key:"setSelectionPosition",value:function(e,n){this.aSelectionPosition[0]=null===e?this.aSelectionPosition[0]:e,this.aSelectionPosition[1]=null===n?this.aSelectionPosition[1]:n}},{key:"getPositionByTime",value:function(e){return Math.floor((e-this.startTime)/this.timePerPoint)}},{key:"setPointingTime",value:function(e){this.pointingTime=e,this.pointingPosition=this.getPositionByTime(e)}},{key:"isInMaxSelectionTimeRange",value:function(e,n){return n-e<=this.maxSelectionTimeRange}},{key:"getNewSelectionTimeRangeFromStart",value:function(e){return[e,e+this.maxSelectionTimeRange]}},{key:"getNewSelectionTimeRangeFromEnd",value:function(e){return[e-this.maxSelectionTimeRange,e]}},{key:"isBeforeSliderStartTime",value:function(e){return e<this.startTime}},{key:"isAfterSliderEndTime",value:function(e){return e>this.endTime}},{key:"getTimelineEndTime",value:function(){return this.endTime}},{key:"setWidth",value:function(e){this.width=e,this.calcuTimePerPoint(),this.reset()}},{key:"getTimelineEndPosition",value:function(){return this.width}},{key:"getTimelineStartTimeStr",value:function(){return this.formatDate(new Date(this.startTime))}},{key:"getTimelineEndTimeStr",value:function(){return this.formatDate(new Date(this.endTime))}},{key:"getFullTimeStr",value:function(e){return this.formatDate(new Date(this.getTimeFromPosition(e)))}},{key:"formatDate",value:function(e){return de(e).tz(this.options.timezone).format(this.options.dateFormat[0])}},{key:"isInSelectionZone",value:function(){return this.pointingTime>=this.aSelectionTimeRange[0]&&this.pointingTime<=this.aSelectionTimeRange[1]}},{key:"isInTimelineRange",value:function(e){return e>=this.startTime&&e<=this.endTime}},{key:"getTimelineRange",value:function(){return[this.startTime,this.endTime]}},{key:"getSelectionTimeRange",value:function(){return[this.aSelectionTimeRange[0],this.aSelectionTimeRange[1]]}},{key:"getSelectionPosition",value:function(){return[this.aSelectionPosition[0],this.aSelectionPosition[1]]}},{key:"getPointingPosition",value:function(){return this.pointingPosition}},{key:"getPointingTime",value:function(){return this.pointingTime}},{key:"getPrevTime",value:function(){var e=this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0];return this.aSelectionTimeRange[0]-Math.floor(e/2)-1}},{key:"getNextTime",value:function(){var e=this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0],n=this.aSelectionTimeRange[1]+Math.floor(e/2)+1;return n>Date.now()?Date.now():n}},{key:"getTimeFromPosition",value:function(e){return this.startTime+Math.floor(this.timePerPoint*e)}},{key:"calcuSelectionZone",value:function(){var e=this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0],n=Math.round(e/2),t=this.pointingTime-n,l=this.pointingTime+n;t<this.startTime?(l=t+e,t=this.startTime):l>this.endTime&&(t=this.endTime-e,l=this.endTime),this.setSelectionTimeRange(t,l),this.setSelectionPosition(this.getPositionByTime(t),this.getPositionByTime(l))}},{key:"getXAxisPositionData",value:function(){for(var n=e.X_AXIS_TICKS+1,t=Math.floor(this.width/n),l=[],i=0;i<n;i++)if(0!==i){var a=i*t;l.push({x:a,time:this.getTimeStr(a)})}return l}},{key:"getTimeStr",value:function(e){var n=Math.floor(e*this.timePerPoint)+this.startTime;return de(new Date(n)).tz(this.options.timezone).format(this.options.dateFormat[1])+" "+de(new Date(n)).tz(this.options.timezone).format(this.options.dateFormat[2])}},{key:"setSelectionStartTime",value:function(e){this.setSelectionTimeRange(e,null),this.setSelectionPosition(this.getPositionByTime(e),null)}},{key:"setSelectionEndTime",value:function(e){this.setSelectionTimeRange(null,e),this.setSelectionPosition(null,this.getPositionByTime(e))}},{key:"setSelectionStartPosition",value:function(e){this.setSelectionTimeRange(this.getTimeFromPosition(e),null),this.setSelectionPosition(e,null)}},{key:"setSelectionEndPosition",value:function(e){this.setSelectionTimeRange(null,this.getTimeFromPosition(e)),this.setSelectionPosition(null,e)}},{key:"zoomIn",value:function(){if(this.startTime!==this.aSelectionTimeRange[0]||this.endTime!==this.aSelectionTimeRange[1]){var e,n=Math.floor((this.endTime-this.startTime)/4),t=this.pointingTime-n,l=this.pointingTime+n;if(l-t<this.minTimeRange){var i=Math.floor(this.minTimeRange/2);t=this.pointingTime-i,l=this.pointingTime+i}if(this.aSelectionTimeRange[0]<t){e=t-this.aSelectionTimeRange[0];var a=this.aSelectionTimeRange[1]+e>l?l:this.aSelectionTimeRange[1]+e;this.setSelectionTimeRange(t,a)}if(this.aSelectionTimeRange[1]>l){e=this.aSelectionTimeRange[1]-l;var o=this.aSelectionTimeRange[0]-e<t?t:this.aSelectionTimeRange[0]-e;this.setSelectionTimeRange(o,l)}this.setTimelineRange(t,l),this.reset()}}},{key:"zoomOut",value:function(){var e=this.endTime-this.startTime,n=this.aSelectionTimeRange[0]+Math.floor((this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0])/2);this.setTimelineRange(n-e,n+e),this.reset()}},{key:"resetBySelectTime",value:function(e,n){var t=Math.floor((this.endTime-this.startTime)/2),l=Math.floor((this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0])/2);!0===n?(this.setTimelineRange(e-2*t,e),this.setSelectionTimeRange(e-2*l,e)):(this.setTimelineRange(e-t,e+t),this.setSelectionTimeRange(e-l,e+l)),this.resetSelectionByTime(),this.setPointingTime(e)}},{key:"reset",value:function(){this.setPointingTime(this.pointingTime),this.resetSelectionByTime()}},{key:"setTimezone",value:function(e){this.options.timezone=e}},{key:"setDateFormat",value:function(e){this.options.dateFormat=e}},{key:"destroy",value:function(){}}]),e}();pe.X_AXIS_TICKS=5;var ge=function(){function e(){_classCallCheck(this,e),this.changedSelectedTime=!1,this.changedSelectionRange=!1,this.changedRange=!1,this.data={selectedTime:0,range:[0,0],selectionRange:[0,0]}}return _createClass(e,[{key:"setData",value:function(e,n,t){return this.data.selectedTime=e,this.data.selectionRange=n,this.data.range=t,this}},{key:"setSelectedTime",value:function(e){return this.data.selectedTime=e,this}},{key:"setSelectionRange",value:function(e){return this.data.selectionRange=e,this}},{key:"setRange",value:function(e){return this.data.range=e,this}},{key:"setOnChangedSelectedTime",value:function(){this.changedSelectedTime=!0}},{key:"setOffChangedSelectedTime",value:function(){this.changedSelectedTime=!1}},{key:"setOnChangedSelectionRange",value:function(){this.changedSelectionRange=!0}},{key:"setOffChangedSelectionRange",value:function(){this.changedSelectionRange=!1}},{key:"setOnRange",value:function(){this.changedRange=!0}},{key:"setOffRange",value:function(){this.changedRange=!1}}]),e}(),fe=function(){function e(n,t,l,i,a,o,u,s){_classCallCheck(this,e),this.options=n,this.oSelectionZone=t,this.oSelectionPoint=l,this.oLeftHandler=i,this.oRightHandler=a,this.oLeftTimeSignboard=o,this.oRightTimeSignboard=u,this.oPositionManager=s,this.onChangeTimelineUIEvent$=new b.b,this.onReset$=new b.b,this.initClass()}return _createClass(e,[{key:"initClass",value:function(){var e=this;this.unsubscribe=this.oLeftHandler.onDragStart$.subscribe((function(n){e.oLeftTimeSignboard.onDragStart(n)})),this.unsubscribe.add(this.oLeftHandler.onDragging$.subscribe((function(n){e.oSelectionZone.onDragXStart(n),e.oLeftTimeSignboard.onDrag(n)}))),this.unsubscribe.add(this.oLeftHandler.onDragEnd$.subscribe((function(n){e.oLeftTimeSignboard.onDragEnd(),n.dragged&&e.movedLeftHandler(n.x)}))),this.unsubscribe.add(this.oRightHandler.onDragStart$.subscribe((function(n){e.oRightTimeSignboard.onDragStart(n)}))),this.unsubscribe.add(this.oRightHandler.onDragging$.subscribe((function(n){e.oSelectionZone.onDragXEnd(n),e.oRightTimeSignboard.onDrag(n)}))),this.unsubscribe.add(this.oRightHandler.onDragEnd$.subscribe((function(n){e.oRightTimeSignboard.onDragEnd(),n.dragged&&e.movedRightHandler(n.x)})))}},{key:"movedLeftHandler",value:function(e){var n=this.oPositionManager.getPointingTime(),t=new ge,l=this.oPositionManager.getSelectionTimeRange(),i=this.oPositionManager.getTimeFromPosition(e);if(this.oPositionManager.isInMaxSelectionTimeRange(i,l[1]))this.oRightHandler.setZone(e,this.oPositionManager.getTimelineEndPosition()),this.oPositionManager.setSelectionStartPosition(e),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.setPointingTime(i),this.oSelectionPoint.setPointing(e),n=i,t.setOnChangedSelectedTime());else{var a=this.oPositionManager.getNewSelectionTimeRangeFromStart(i),o=this.oPositionManager.getPositionByTime(a[1]);this.oRightHandler.setZone(e,this.oPositionManager.getTimelineEndPosition()),this.oPositionManager.setSelectionStartPosition(e),this.oRightHandler.setX(o),this.oRightTimeSignboard.onDrag(o),this.oLeftHandler.setZone(0,o),this.oPositionManager.setSelectionEndPosition(o),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.setPointingTime(a[1]),this.oSelectionPoint.setPointing(o),n=a[1],t.setOnChangedSelectedTime())}this.oSelectionZone.redraw(),t.setOnChangedSelectionRange(),t.setData(n,this.oPositionManager.getSelectionTimeRange(),this.oPositionManager.getTimelineRange()),this.onChangeTimelineUIEvent$.next(t)}},{key:"movedRightHandler",value:function(e){var n=this.oPositionManager.getPointingTime(),t=new ge,l=this.oPositionManager.getSelectionTimeRange(),i=this.oPositionManager.getTimeFromPosition(e);if(this.oPositionManager.isInMaxSelectionTimeRange(l[0],i))this.oLeftHandler.setZone(0,e),this.oPositionManager.setSelectionEndPosition(e),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.setPointingTime(i),this.oSelectionPoint.setPointing(e),n=i,t.setOnChangedSelectedTime());else{var a=this.oPositionManager.getNewSelectionTimeRangeFromEnd(i),o=this.oPositionManager.getPositionByTime(a[0]);this.oLeftHandler.setZone(0,e),this.oPositionManager.setSelectionEndPosition(e),this.oLeftHandler.setX(o),this.oLeftTimeSignboard.onDrag(o),this.oRightHandler.setZone(o,this.oPositionManager.getTimelineEndPosition()),this.oPositionManager.setSelectionStartPosition(o),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.setPointingTime(a[0]),this.oSelectionPoint.setPointing(o),n=a[0],t.setOnChangedSelectedTime())}this.oSelectionZone.redraw(),t.setOnChangedSelectionRange(),t.setData(n,this.oPositionManager.getSelectionTimeRange(),this.oPositionManager.getTimelineRange()),this.onChangeTimelineUIEvent$.next(t)}},{key:"moveSelectionAndHandler",value:function(){var e=this.oPositionManager.getSelectionPosition();this.oLeftHandler.setPositionAndZone(e[0],[0,e[1]]),this.oRightHandler.setPositionAndZone(e[1],[e[0],this.oPositionManager.getTimelineEndPosition()]),this.oSelectionZone.redraw()}},{key:"onSetPointingByPosition",value:function(e){this.onSetPointingByTime(this.oPositionManager.getTimeFromPosition(e))}},{key:"onSetPointingByTime",value:function(e,n){var t=new ge;t.setOnChangedSelectedTime(),this.oPositionManager.isInTimelineRange(e)?(this.oPositionManager.setPointingTime(e),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.calcuSelectionZone(),this.moveSelectionAndHandler(),t.setOnChangedSelectionRange()),this.oSelectionPoint.setPointing(this.oPositionManager.getPointingPosition())):(this.oPositionManager.resetBySelectTime(e,n),this.onReset$.next(),t.setOnChangedSelectionRange()),t.setData(this.oPositionManager.getPointingTime(),this.oPositionManager.getSelectionTimeRange(),this.oPositionManager.getTimelineRange()),this.onChangeTimelineUIEvent$.next(t)}},{key:"reset",value:function(){var e=this.oPositionManager.getSelectionPosition();this.oLeftHandler.setPositionAndZone(e[0],[0,e[1]]),this.oRightHandler.setPositionAndZone(e[1],[e[0],this.oPositionManager.getTimelineEndPosition()]),this.oSelectionZone.redraw(),this.oSelectionPoint.setPointing(this.oPositionManager.getPointingPosition())}},{key:"destroy",value:function(){this.unsubscribe.unsubscribe()}}]),e}(),me=function(){function e(n,t,l){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.addElements(),this.setPointing(l.x)}return _createClass(e,[{key:"addElements",value:function(){this.options.radius,this.group.add(this.snap.line(0,0,0,this.options.height),this.snap.circle(0,this.options.height/2,this.options.radius).attr({filter:this.snap.filter(Snap.filter.shadow(0,0,4,"#FF0",1))}))}},{key:"setPointing",value:function(e){this.group.animate({transform:"translate(".concat(e,", ").concat(this.options.y,")")},this.options.duration,mina.easein)}},{key:"destroy",value:function(){}}]),e}(),ve=function(){function e(n,t,l,i){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.oPositionManager=i,this.textMaxWidth=10,this.xPadding=10,this.addElements()}return _createClass(e,[{key:"addElements",value:function(){var e=this.isIn(this.options.x),n=this.options.x+(e?this.xPadding:-this.xPadding);this.timeText=this.group.text(n,26,this.oPositionManager.getFullTimeStr(this.options.x)).attr({"text-anchor":this.getAnchorPosition(e)}),this.group.add(this.timeText)}},{key:"setX",value:function(e){var n=this.isIn(e);this.timeText.attr({x:e+(n?this.xPadding:-this.xPadding),text:this.oPositionManager.getFullTimeStr(e),"text-anchor":this.getAnchorPosition(n)})}},{key:"getAnchorPosition",value:function(e){return e?"start":"end"}},{key:"isIn",value:function(e){return"left"===this.options.direction?e<this.textMaxWidth:e+this.textMaxWidth<this.oPositionManager.getTimelineEndPosition()}},{key:"onDragStart",value:function(e){this.setX(e)}},{key:"onDragEnd",value:function(){}},{key:"onDrag",value:function(e){this.setX(e)}},{key:"destroy",value:function(){}}]),e}(),be=function(){function e(n,t,l,i){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.oPositionManager=i,this.aBaseLine=[],this.aLineElement=[],this.initBaseLine()}return _createClass(e,[{key:"initBaseLine",value:function(){var n=this;this.aBaseLine.push(this.makeRect(0,this.options.width,0,this.options.height,this.options.statusColor.BASE,e.ID_PREFIX_BASE+Date.now())),this.aBaseLine.forEach((function(e){n.group.add(e)}))}},{key:"addStatus",value:function(e,n){this.isOutsideOfTimeline(e.startTimestamp,e.endTimestamp)||this.addLine(this.oPositionManager.getPositionByTime(e.startTimestamp),this.getX2(e.endTimestamp),this.options.statusColor[e.value],this.makeID(e))}},{key:"isOutsideOfTimeline",value:function(e,n){return!1===this.oPositionManager.isInTimelineRange(e)&&!1===this.oPositionManager.isInTimelineRange(n)}},{key:"makeID",value:function(n){return n.endTimestamp+e.ID_POSTFIX}},{key:"addLine",value:function(e,n,t,l){var i=this.makeRect(e,n,0,this.options.height,t,l);this.aLineElement.push(i),this.group.add(i)}},{key:"makeRect",value:function(e,n,t,l,i,a){return this.snap.rect(e,t,n,l).attr({fill:i,"data-id":a})}},{key:"getX2",value:function(e){return this.oPositionManager.getPositionByTime(-1===e?this.oPositionManager.getTimelineEndTime():e)}},{key:"updateData",value:function(e){this.statusData=e,this.updateRender()}},{key:"updateRender",value:function(){var e,n=this.aLineElement.length,t=this.statusData.length;if(n===t)for(e=0;e<n;e++)this.show(this.aLineElement[e]);else if(n>t)for(e=t;e<n;e++)this.hide(this.aLineElement[e]);else{for(e=0;e<n;e++)this.show(this.aLineElement[e]);for(e=n;e<t;e++)this.addStatus(this.statusData[e],e)}this.reset()}},{key:"emptyData",value:function(){var e=this;this.aLineElement.forEach((function(n){e.hide(n)}))}},{key:"reset",value:function(){for(var e=this,n=function(n){var t=e.aLineElement[n],l=e.statusData[n];if(l){var i=e.oPositionManager.getPositionByTime(l.startTimestamp);e.show(t),t.animate({x:i,width:e.getX2(l.endTimestamp)-i},e.options.duration,mina.easeOut,(function(){t.attr("fill",e.options.statusColor[l.value])}))}else e.hide(t)},t=0;t<this.aLineElement.length;t++)n(t);var l=this.oPositionManager.getTimelineEndPosition();this.aBaseLine.forEach((function(n){n.animate({width:l},e.options.duration)}))}},{key:"show",value:function(e){e.attr("display","block")}},{key:"hide",value:function(e){e.attr("display","none")}},{key:"destroy",value:function(){}}]),e}();be.ID_SPLITER="+",be.ID_PREFIX_BASE="base-",be.ID_POSTFIX="+state-line";var ye=function(){function e(n,t,l,i){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.oPositionManager=i,this.aAxisGroup=[],this.aText=[],this.init()}return _createClass(e,[{key:"init",value:function(){var e=this,n=this.oPositionManager.getXAxisPositionData(),t=this.options.width/2;n.forEach((function(l,i){var a=e.group.g(),o=e.snap.text(0,e.options.textY,n[i].time);e.aText.push(o),a.attr("transform","translate("+t+", 0)"),a.add(o,e.snap.line(0,e.options.startY,0,e.options.endY)),e.group.add(a),e.aAxisGroup.push(a),e.resetXPosition(a,n[i].x,t)}))}},{key:"resetXPosition",value:function(e,n,t){Snap.animate(t,n,(function(n){e.attr("transform","translate(".concat(n,", 0)"))}),this.options.duration)}},{key:"reset",value:function(){for(var e=this.oPositionManager.getXAxisPositionData(),n=0;n<e.length;n++)this.aAxisGroup[n].attr("transform","translate(".concat(e[n].x,", 0)")),this.aText[n].attr("text",e[n].time)}},{key:"destroy",value:function(){}}]),e}(),Te=function(){function e(n,t,l,i){_classCallCheck(this,e),this.snap=n,this.group=t,this.options=l,this.oPositionManager=i,this.addElements()}return _createClass(e,[{key:"addElements",value:function(){var e=this.oPositionManager.getSelectionPosition();this.elZone=this.snap.rect(e[0],this.options.top,e[1]-e[0],this.options.height),this.group.add(this.elZone)}},{key:"redraw",value:function(){var e=this.oPositionManager.getSelectionPosition();this.elZone.animate({x:e[0],width:e[1]-e[0]},this.options.duration)}},{key:"onDragXStart",value:function(e){var n=this.oPositionManager.getSelectionPosition()[1]-e;this.elZone.attr({x:e,width:n})}},{key:"onDragXEnd",value:function(e){var n=this.oPositionManager.getSelectionPosition()[0];this.elZone.attr({x:n,width:e-n})}},{key:"destroy",value:function(){}}]),e}(),Ce=function(){function e(n,t){_classCallCheck(this,e),this.element=n,this.svgGroups={},this.options={top:0,left:0,duration:50,xAxisTicks:5,minTimeRange:6e3,eventZoneHeight:30,headerZoneHeight:20,stateLineThickness:4,maxSelectionTimeRange:e.MAX_TIME_RANGE,headerTextTopPadding:10,pointerRadius:6},this.onChangeTimelineUIEvent$=new b.b,this.onSelectEventStatus$=new b.b,this.snap=Snap(n),this.snap.attr({height:t.height}),this.initOptions(t),this.initDataClass(t.timelineData),this.checkOffset(),this.initControlClass(),this.addEventListener()}return _createClass(e,[{key:"initOptions",value:function(e){var n=this;Object.keys(e).forEach((function(t){n.options[t]=e[t]})),this.setDefaultStatusColor(),this.checkOffset()}},{key:"setDefaultStatusColor",value:function(){var n=this;if(this.options.statusColor)Object.keys(e.DEFAULT_STATUS_COLOR).forEach((function(t){n.options.statusColor[t]||(n.options.statusColor[t]=e.DEFAULT_STATUS_COLOR[t])}));else{var t={};Object.keys(e.DEFAULT_STATUS_COLOR).forEach((function(n){t[n]=e.DEFAULT_STATUS_COLOR[n]})),this.options.statusColor=t}}},{key:"initDataClass",value:function(e){this.oTimelineData=new se(e||{agentEventTimeline:{timelineSegments:[]},agentStatusTimeline:{includeWarning:!1,timelineSegments:[]}})}},{key:"checkOffset",value:function(){var e=this.element.getBoundingClientRect();this.options.top=e.top,this.options.left=e.left}},{key:"initControlClass",value:function(){this.oPositionManager=new pe({width:this.options.width,xAxisTicks:this.options.xAxisTicks,pointingTime:this.options.pointingTime,minTimeRange:this.options.minTimeRange,timelineRange:this.options.timelineRange,selectionTimeRange:this.options.selectionTimeRange,maxSelectionTimeRange:this.options.maxSelectionTimeRange,timezone:this.options.timezone,dateFormat:this.options.dateFormat});var n=this.options.height-this.options.headerZoneHeight-this.options.eventZoneHeight;this.oLoading=new he(this.snap,this.getGroup("loading",e.GROUP_TYPE.TOP_BASE,e.DRAWING_ORDER.loading),{size:30,width:this.options.width,height:this.options.height,duration:2e3}),this.oBackground=new ue(this.snap,this.getGroup("background",e.GROUP_TYPE.CONTENT_BASE,e.DRAWING_ORDER.background),{top:0,left:0,size:30,width:this.options.width,height:n,duration:this.options.duration}),this.oStateLine=new be(this.snap,this.getGroup("state-line",e.GROUP_TYPE.CONTENT_BASE,e.DRAWING_ORDER["state-line"]),{width:this.options.width,height:n,duration:this.options.duration,thickness:this.options.stateLineThickness,statusColor:this.options.statusColor},this.oPositionManager);var t=this.oPositionManager.getSelectionPosition(),l=new Te(this.snap,this.getGroup("selection-zone",e.GROUP_TYPE.CONTENT_BASE,e.DRAWING_ORDER["selection-zone"]),{top:0,left:t[0],width:t[1]-t[0],height:n,duration:this.options.duration},this.oPositionManager),i=new me(this.snap,this.getGroup("selection-point",e.GROUP_TYPE.CONTENT_BASE,e.DRAWING_ORDER["selection-point"]),{y:this.options.headerZoneHeight,x:this.oPositionManager.getPointingPosition(),radius:this.options.pointerRadius,height:n,duration:this.options.duration}),a=new ce(this.snap,this.getGroup("left-handler",e.GROUP_TYPE.CONTENT_BASE,e.DRAWING_ORDER["left-handler"]),{x:t[0],zone:[0,t[1]],height:n,margin:this.options.left,duration:this.options.duration}),o=new ce(this.snap,this.getGroup("right-handler",e.GROUP_TYPE.CONTENT_BASE,e.DRAWING_ORDER["right-handler"]),{x:t[1],zone:[t[0],this.oPositionManager.getTimelineEndPosition()],height:n,margin:this.options.left,duration:this.options.duration}),u=new ve(this.snap,this.getGroup("time-left-signboard",e.GROUP_TYPE.CONTENT_BASE,e.DRAWING_ORDER["time-signboard"]),{x:t[0],direction:"left"},this.oPositionManager),s=new ve(this.snap,this.getGroup("time-right-signboard",e.GROUP_TYPE.CONTENT_BASE,e.DRAWING_ORDER["time-signboard"]),{x:t[1],direction:"right"},this.oPositionManager);this.oSelectionManager=new fe({headerZoneHeight:this.options.headerZoneHeight,contentZoneHeight:n},l,i,a,o,u,s,this.oPositionManager),this.oXAxis=new ye(this.snap,this.getGroup("x-axis",e.GROUP_TYPE.TOP_BASE,e.DRAWING_ORDER["x-axis"]),{endY:this.options.height-this.options.eventZoneHeight,width:this.options.width,textY:this.options.headerTextTopPadding,startY:this.options.headerZoneHeight,duration:this.options.duration},this.oPositionManager),this.oEvents=new re(this.snap,this.getGroup("events",e.GROUP_TYPE.BOTTOM_BASE,e.DRAWING_ORDER.events),{duration:this.options.duration},this.oPositionManager),this.oLoading.hide()}},{key:"getGroup",value:function(e,n,t){if(this.svgGroups[e])return this.svgGroups[e];var l=this.svgGroups[e]=this.snap.g().attr({class:e,"data-order":t});return this.setTransform(l,n),this.sortGroup(l,t),l}},{key:"setTransform",value:function(n,t){switch(t){case e.GROUP_TYPE.TOP_BASE:n.attr({transform:"translate(0, 0)"});break;case e.GROUP_TYPE.CONTENT_BASE:n.attr({transform:"translate(0, ".concat(this.options.headerZoneHeight,")")});break;case e.GROUP_TYPE.BOTTOM_BASE:n.attr({transform:"translate(0, ".concat(this.options.height-this.options.eventZoneHeight,")")})}}},{key:"sortGroup",value:function(e,n){for(var t=this.snap.selectAll("g"),l=null,i=t.length-1;i>=0;i--)t[i]!==e&&n<Math.floor(t[i].attr("data-order"))&&(l=t[i]);null!==l&&l.before(e)}},{key:"addEventListener",value:function(){var e=this,n=-1;window.addEventListener("resize",(function(){e.checkOffset(),e.resize()})),this.snap.mousedown((function(e,t,l){n=t})),this.oEvents.clickEvent$.subscribe((function(n){e.onSelectEventStatus$.next(n)})),this.oTimelineData.onChangeStatusData$.subscribe((function(n){e.oStateLine.updateData(n)})),this.oTimelineData.onChangeEventData$.subscribe((function(n){e.oEvents.updateData(n)})),this.oSelectionManager.onChangeTimelineUIEvent$.subscribe((function(n){e.onChangeTimelineUIEvent$.next(n)})),this.oSelectionManager.onReset$.subscribe((function(){e.reset()}));var t=this.options.headerZoneHeight,l=this.options.height-this.options.eventZoneHeight;this.snap.click((function(i,a,o){n===a&&i.offsetY>t&&i.offsetY<l&&e.oSelectionManager.onSetPointingByPosition(i.offsetX)}))}},{key:"addData",value:function(e){this.oLoading.show(),this.oTimelineData.addData(e),this.oLoading.hide()}},{key:"reset",value:function(){this.oXAxis.reset(),this.oSelectionManager.reset(),this.oStateLine.reset(),this.oEvents.reset()}},{key:"resize",value:function(){this.oPositionManager.setWidth(this.element.getBoundingClientRect().width),this.oBackground.reset(this.oPositionManager.getTimelineEndPosition()),this.reset()}},{key:"zoomIn",value:function(){this.oPositionManager.zoomIn(),this.reset(),this.fireChangedRangeEvent()}},{key:"zoomOut",value:function(){this.oPositionManager.zoomOut(),this.reset(),this.fireChangedRangeEvent()}},{key:"fireChangedRangeEvent",value:function(){var e=new ge;e.setOnRange(),e.setData(this.oPositionManager.getPointingTime(),this.oPositionManager.getSelectionTimeRange(),this.oPositionManager.getTimelineRange()),this.onChangeTimelineUIEvent$.next(e)}},{key:"resetTimeRangeAndSelectionZone",value:function(e,n,t){this.oPositionManager.setTimelineRange(n[0],n[1]),this.oPositionManager.setSelectionStartTime(e[0]),this.oPositionManager.setSelectionEndTime(e[1]),this.oPositionManager.setPointingTime(t||e[1]),this.emptyData(),this.reset()}},{key:"movePrev",value:function(){this.oSelectionManager.onSetPointingByTime(this.oPositionManager.getPrevTime())}},{key:"moveNext",value:function(){this.oSelectionManager.onSetPointingByTime(this.oPositionManager.getNextTime())}},{key:"moveHead",value:function(){this.oSelectionManager.onSetPointingByTime(Date.now(),!0)}},{key:"getTimelineRange",value:function(){return this.oPositionManager.getTimelineRange()}},{key:"getSelectionTimeRange",value:function(){return this.oPositionManager.getSelectionTimeRange()}},{key:"emptyData",value:function(){this.oLoading.show(),this.oTimelineData.emptyData(),this.oEvents.emptyData(),this.oStateLine.emptyData(),this.oLoading.hide()}},{key:"setPointingTime",value:function(e){this.oSelectionManager.onSetPointingByTime(e)}},{key:"getPointingTime",value:function(){return this.oPositionManager.getPointingTime()}},{key:"setTimezone",value:function(e){this.options.timezone=e,this.oPositionManager.setTimezone(e),this.reset()}},{key:"setDateFormat",value:function(e){this.options.dateFormat=e,this.oPositionManager.setDateFormat(e),this.reset()}},{key:"destroy",value:function(){this.oLoading.destroy(),this.oBackground.destroy(),this.oTimelineData.destroy(),this.oPositionManager.destroy(),this.oStateLine.destroy(),this.oSelectionManager.destroy(),this.oXAxis.destroy(),this.oEvents.destroy()}}]),e}();Ce.MAX_TIME_RANGE=6048e5,Ce.GROUP_TYPE={TOP_BASE:"TOP-BASE",CONTENT_BASE:"CONTENT-BASE",BOTTOM_BASE:"BOTTOM-BASE"},Ce.DRAWING_ORDER={background:0,"state-line":3,"selection-zone":5,"x-axis":10,events:10,"time-signboard":15,"selection-point":15,"left-handler":25,"right-handler":25,guide:30,loading:100},Ce.DEFAULT_STATUS_COLOR={BASE:"rgba(187, 187, 187, 0.3)",UNKNOWN:"rgba(220, 214, 214, 0.8)",RUNNING:"rgba(0, 158, 0, 0.4)",SHUTDOWN:"rgba(209, 82, 96, 0.7)",UNSTABLE_RUNNING:"rgba(255, 102, 0, 0.4)",EMPTY:"rgba(165, 219, 245, 0.7)"};var Se=function(){function e(n,t,l,i){_classCallCheck(this,e),this.newUrlStateNotificationService=n,this.storeHelperService=t,this.webAppSettingDataService=l,this.messageQueueService=i,this.sourceForServerAndAgentList=new oe.a(null),this.sourceForTimeline=new b.b,this.sourceForAgentInfo=new b.b,this.sourceForChart=new b.b,this.sourceForServerAndAgentList$=this.sourceForServerAndAgentList.asObservable(),this.sourceForTimeline$=this.sourceForTimeline.asObservable(),this.sourceForAgentInfo$=this.sourceForAgentInfo.asObservable(),this.sourceForChart$=this.sourceForChart.asObservable()}return _createClass(e,[{key:"activate",value:function(e){var n=this;this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(y.a)(e),Object(le.a)((function(e){n.agentId=e.getPathValue(k.b.AGENT_ID)})),Object(T.a)((function(e){if(e.isRealTimeMode()){var t=e.getUrlServerTimeData();return[t-n.webAppSettingDataService.getSystemDefaultPeriod().getMiliSeconds(),t]}return[e.getStartTimeToNumber(),e.getEndTimeToNumber()]}))).subscribe((function(e){n.notifyToServerAndAgentList(e)})),this.messageQueueService.receiveMessage(e,S.b.INSPECTOR_PAGE_VALID).pipe(Object(le.a)((function(){return n.isFirstFlow=!n.timelineInfo}))).subscribe((function(e){var t=e.range,l=e.now;if(n.notifyToTimeline(t),n.isFirstFlow||n.shouldUpdateRange()||(n.notifyToAgentInfo(),n.notifyToChart()),n.newUrlStateNotificationService.isRealTimeMode()){var i=n.webAppSettingDataService.getChartRefreshInterval(k.a.INSPECTOR),a=t[1]+i,o=l>a,u=o?l:a,s=u-n.webAppSettingDataService.getSystemDefaultPeriod().getMiliSeconds(),r=o?0:a-l;n.notifyToServerAndAgentList([s,u],r)}})),this.storeHelperService.getInspectorTimelineData(e).pipe(Object(z.a)((function(){return!n.isFirstFlow})),Object(le.a)((function(e){return n.timelineInfo=e}))).subscribe((function(){n.notifyToAgentInfo(),n.notifyToChart()}))}},{key:"updateTimelineData",value:function(e){this.storeHelperService.dispatch(new M.a.UpdateTimelineData(e))}},{key:"calcuRetrieveTime",value:function(e){var n=_slicedToArray(e,2),t=n[0],l=n[1],i=Ce.MAX_TIME_RANGE,a=l-t;if(a>i)return[l-i,l];var o=3*a;return[l-(o>i?i:o),l]}},{key:"shouldUpdateRange",value:function(){return this.newUrlStateNotificationService.isRealTimeMode()||this.newUrlStateNotificationService.isValueChanged(k.b.PERIOD)||this.newUrlStateNotificationService.isValueChanged(k.b.END_TIME)}},{key:"notifyToTimeline",value:function(e){(this.isFirstFlow||this.shouldUpdateRange())&&this.updateTimelineData({range:this.calcuRetrieveTime(e),selectedTime:e[1],selectionRange:e}),this.sourceForTimeline.next({timelineInfo:this.timelineInfo,agentId:this.agentId})}},{key:"notifyToServerAndAgentList",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.sourceForServerAndAgentList.next({range:e,agentId:this.agentId,emitAfter:n})}},{key:"notifyToAgentInfo",value:function(){this.sourceForAgentInfo.next({selectedTime:this.timelineInfo.selectedTime,agentId:this.agentId})}},{key:"notifyToChart",value:function(){this.sourceForChart.next({range:this.timelineInfo.selectionRange})}}]),e}(),ke=t("un/a"),Oe=function(){function e(n){_classCallCheck(this,e),this.http=n,this.url="getAgentList.pinpoint"}return _createClass(e,[{key:"getData",value:function(e,n){return this.http.get(this.url,this.makeRequestOptionsArgs(e,n)).pipe(Object(ke.a)(3))}},{key:"makeRequestOptionsArgs",value:function(e,n){var t=_slicedToArray(n,2);return{params:{application:e,from:t[0],to:t[1]}}}}]),e}(),Ee=t("ueBd"),Pe=function(){function e(n,t,l,i,a,o,u,s,r,c,h,d){_classCallCheck(this,e),this.newUrlStateNotificationService=n,this.urlRouteManagerService=t,this.webAppSettingDataService=l,this.storeHelperService=i,this.dynamicPopupService=a,this.analyticsService=o,this.componentFactoryResolver=u,this.injector=s,this.inspectorPageService=r,this.serverAndAgentListDataService=c,this.messageQueueService=h,this.translateService=d,this.unsubscribe=new b.b}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.initI18nText(),this.funcImagePath=this.webAppSettingDataService.getImagePathMakeFunc(),Object(K.a)(this.inspectorPageService.sourceForServerAndAgentList$.pipe(Object(y.a)(this.unsubscribe),Object(z.a)((function(e){return!!e})),Object(ne.a)((function(e){return Object(J.a)((function(){return 0===e.emitAfter}),Object(ee.a)(e),Object(ee.a)(e).pipe(Object(te.a)(e.emitAfter)))})),Object(le.a)((function(n){var t=n.agentId;e.agentId=t})),Object(ie.a)((function(n){var t=n.range,l=e.newUrlStateNotificationService.getPathValue(k.b.APPLICATION).getApplicationName(),i=Date.now();return e.serverAndAgentListDataService.getData(l,t).pipe(Object(z.a)((function(n){if(e.agentId){var t=e.filterServerList(n,e.agentId,(function(n){var t=n.agentId;return e.agentId.toLowerCase()===t.toLowerCase()}));if(0!==Object.keys(t).length)return!0;var l=e.newUrlStateNotificationService.isRealTimeMode()?[k.a.INSPECTOR,k.b.REAL_TIME,e.newUrlStateNotificationService.getPathValue(k.b.APPLICATION).getUrlStr()]:[k.a.INSPECTOR,e.newUrlStateNotificationService.getPathValue(k.b.APPLICATION).getUrlStr(),e.newUrlStateNotificationService.getPathValue(k.b.PERIOD).getValueWithTime(),e.newUrlStateNotificationService.getPathValue(k.b.END_TIME).getEndTime()];return e.urlRouteManagerService.moveOnPage({url:l}),!1}return!0})),Object(le.a)((function(){var n=Date.now()-i,l=t[1]+n;e.messageQueueService.sendMessage({to:S.b.INSPECTOR_PAGE_VALID,param:{range:t,now:l}})})))}))),this.storeHelperService.getServerAndAgentQuery(this.unsubscribe)).subscribe((function(n){var t=_slicedToArray(n,2),l=t[0],i=t[1];e.filteredServerList=e.filterServerList(l,i,(function(e){return e.agentId.toLowerCase().includes(i.toLowerCase())})),e.filteredServerKeyList=Object.keys(e.filteredServerList).sort(),e.isEmpty=Object(Ee.b)(e.filteredServerList)}),(function(n){e.dynamicPopupService.openPopup({data:{title:"Error",contents:n},component:ae.a},{resolver:e.componentFactoryResolver,injector:e.injector})}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"initI18nText",value:function(){this.emptyText$=this.translateService.get("COMMON.EMPTY_ON_SEARCH")}},{key:"onSelectAgent",value:function(e){var n=this.newUrlStateNotificationService.isRealTimeMode()?[k.a.INSPECTOR,k.a.REAL_TIME,this.newUrlStateNotificationService.getPathValue(k.b.APPLICATION).getUrlStr(),e]:[k.a.INSPECTOR,this.newUrlStateNotificationService.getPathValue(k.b.APPLICATION).getUrlStr(),this.newUrlStateNotificationService.getPathValue(k.b.PERIOD).getValueWithTime(),this.newUrlStateNotificationService.getPathValue(k.b.END_TIME).getEndTime(),e];this.urlRouteManagerService.moveOnPage({url:n}),this.analyticsService.trackEvent(S.e.GO_TO_AGENT_INSPECTOR)}},{key:"filterServerList",value:function(e,n,t){return""===n?e:Object.keys(e).reduce((function(n,l){var i=e[l].filter(t);return 0!==i.length?Object.assign({},n,_defineProperty({},l,i)):n}),{})}}]),e}(),_e=t("kKeB"),Ie=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:calc(100% - 71px);overflow-y:auto}.l-empty-text[_ngcontent-%COMP%]{font-size:14px;padding:7px 13px}"]],data:{}});function Re(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-server-and-agent-list",[],null,[[null,"outSelectAgent"]],(function(e,n,t){var l=!0,i=e.component;return"outSelectAgent"===n&&(l=!1!==i.onSelectAgent(t)&&l),l}),Q,X)),l["\u0275did"](2,114688,null,0,Z,[],{funcImagePath:[0,"funcImagePath"],serverKeyList:[1,"serverKeyList"],serverList:[2,"serverList"],agentId:[3,"agentId"]},{outSelectAgent:"outSelectAgent"})],(function(e,n){var t=n.component;e(n,2,0,t.funcImagePath,t.filteredServerKeyList,t.filteredServerList,t.agentId)}),null)}function xe(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"p",[["class","l-empty-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""])),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],null,(function(e,n){var t=n.component;e(n,1,0,l["\u0275unv"](n,1,0,l["\u0275nov"](n,2).transform(t.emptyText$)))}))}function we(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Re)),l["\u0275did"](1,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["\u0275and"](0,[["emptyText",2]],null,0,null,xe))],(function(e,n){var t=n.component;e(n,1,0,t.filteredServerList&&!t.isEmpty,l["\u0275nov"](n,2))}),null)}l["\u0275ccf"]("pp-server-and-agent-list-container",Pe,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-server-and-agent-list-container",[],null,null,null,we,Ie)),l["\u0275did"](1,245760,null,0,Pe,[E.a,V.a,H.a,N.a,F.a,L.a,l.ComponentFactoryResolver,l.Injector,Se,Oe,_e.b,P.i],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var Me=t("m1dV"),Ae=t("QJdi"),De=t("7rHv"),Ne=t("w1KT"),Le=t("xcNo"),Fe=t("rgvr"),je=t("vHCP"),Ue=t("z/t1"),ze=t("0fGH"),Ge=t("AMqW"),He=t("UQIx"),Ve=t("u41I"),$e=t("iInd"),Be=function(){function e(n,t,l,i,a,o){_classCallCheck(this,e),this.inspectorPageService=n,this.newUrlStateNotificationService=t,this.analyticsService=l,this.dynamicPopupService=i,this.componentFactoryResolver=a,this.injector=o,this.unsubscribe=new b.b}return _createClass(e,[{key:"ngOnInit",value:function(){this.showSideMenu$=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(T.a)((function(e){return e.isRealTimeMode()||e.hasValue(k.b.END_TIME)}))),this.inspectorPageService.activate(this.unsubscribe)}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"onShowHelp",value:function(e){this.analyticsService.trackEvent(S.e.TOGGLE_HELP_VIEWER,A.a.NAVBAR);var n=e.target.getBoundingClientRect(),t=n.left,l=n.top,i=n.width,a=n.height;this.dynamicPopupService.openPopup({data:A.a.NAVBAR,coord:{coordX:t+i/2,coordY:l+a/2},component:A.b},{resolver:this.componentFactoryResolver,injector:this.injector})}}]),e}(),Ze=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%;height:100%}.l-widget-group[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-flex:1;flex:1;padding:0 15px;height:100%;-webkit-box-align:center;align-items:center}.l-main-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;height:calc(100vh - 50px);width:100%;overflow-y:hidden}.l-sidemenu-wrap[_ngcontent-%COMP%]{position:relative;height:100%}.l-sidemenu-left[_ngcontent-%COMP%]{width:250px;overflow:visible;border-right:1px solid #e5e8f0;background:#fff;height:100%}.l-main-section[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;background:#edf2f8;position:relative;height:100%;width:calc(100% - 250px)}.fa-question-circle[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin-right:15px}button[_ngcontent-%COMP%]{outline:0}.l-application-inspector-title-wrapper[_ngcontent-%COMP%]{border-bottom:1px solid #e0e7ee}"]],data:{animation:[{type:7,name:"fadeInOut",definitions:[{type:0,name:"in",styles:{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},options:void 0},{type:1,expr:":leave",animation:[{type:4,styles:{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},timings:"1.5s 0.1s ease-in"}],options:null},{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:null,timings:"2s ease-out"}],options:null}],options:{}}]}});function Xe(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"section",[["class","l-sidemenu-wrap font-opensans"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","l-sidemenu-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"pp-agent-search-input-container",[],null,null,null,U,j)),l["\u0275did"](3,114688,null,0,D,[N.a,P.i,_.a,L.a,F.a,l.ComponentFactoryResolver,l.Injector],null,null),(e()(),l["\u0275eld"](4,0,null,null,2,"section",[["class","l-application-inspector-title-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"pp-application-inspector-title-container",[],null,null,null,B,$)),l["\u0275did"](6,245760,null,0,G,[H.a,E.a,V.a,L.a],null,null),(e()(),l["\u0275eld"](7,0,null,null,1,"pp-server-and-agent-list-container",[],null,null,null,we,Ie)),l["\u0275did"](8,245760,null,0,Pe,[E.a,V.a,H.a,N.a,F.a,L.a,l.ComponentFactoryResolver,l.Injector,Se,Oe,_e.b,P.i],null,null)],(function(e,n){e(n,3,0),e(n,6,0),e(n,8,0)}),null)}function We(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-notice-container",[],null,null,null,Me.b,Me.a)),l["\u0275did"](1,114688,null,0,Ae.a,[l.ElementRef,l.Renderer2,De.a],null,null),(e()(),l["\u0275eld"](2,0,null,null,10,"header",[["class","flex-container flex-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"pp-header-logo",[],null,null,null,Ne.b,Ne.a)),l["\u0275did"](4,114688,null,0,Le.a,[H.a,L.a],null,null),(e()(),l["\u0275eld"](5,0,null,null,4,"div",[["class","l-widget-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"pp-application-list-for-header-container",[],null,null,null,Fe.b,Fe.a)),l["\u0275did"](7,4440064,null,0,je.a,[l.ChangeDetectorRef,N.a,H.a,Ue.a,E.a,V.a,P.i,L.a,l.Renderer2],null,null),(e()(),l["\u0275eld"](8,0,null,null,1,"pp-period-selector-container",[],null,null,null,ze.b,ze.a)),l["\u0275did"](9,245760,null,0,Ge.a,[H.a,N.a,E.a,V.a,P.i,_.a,L.a,l.ChangeDetectorRef],null,null),(e()(),l["\u0275eld"](10,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onShowHelp(t)&&l),l}),null,null)),(e()(),l["\u0275eld"](11,0,null,null,1,"pp-configuration-icon-container",[],null,null,null,He.b,He.a)),l["\u0275did"](12,114688,null,0,Ve.a,[F.a,L.a,l.ComponentFactoryResolver,l.Injector],null,null),(e()(),l["\u0275eld"](13,0,null,null,6,"div",[["class","l-main-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,2,null,Xe)),l["\u0275did"](15,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](17,0,null,null,2,"section",[["class","l-main-section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l["\u0275did"](19,212992,null,0,$e.r,[$e.b,l.ViewContainerRef,l.ComponentFactoryResolver,[8,null],l.ChangeDetectorRef],null,null)],(function(e,n){var t=n.component;e(n,1,0),e(n,4,0),e(n,7,0),e(n,9,0),e(n,12,0),e(n,15,0,l["\u0275unv"](n,15,0,l["\u0275nov"](n,16).transform(t.showSideMenu$))),e(n,19,0)}),null)}var Ye=l["\u0275ccf"]("pp-inspector-page",Be,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"pp-inspector-page",[],null,null,null,We,Ze)),l["\u0275prd"](512,null,Se,Se,[E.a,N.a,H.a,_e.b]),l["\u0275did"](2,245760,null,0,Be,[Se,E.a,L.a,F.a,l.ComponentFactoryResolver,l.Injector],null,null)],(function(e,n){e(n,2,0)}),null)}),{},{},[]),qe=t("KSFr"),Qe=t("cUpR"),Ke=t("uidH"),Je=function(){function e(n){_classCallCheck(this,e),this.translateService=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.guideMessage$=this.translateService.get("INSPECTOR.APPLICATION_INSPECTOR_USAGE_GUIDE_MESSAGE")}}]),e}(),en=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%}.l-guide-wrapper[_ngcontent-%COMP%]{width:480px;height:200px;margin:auto;position:relative;top:35%;background-color:#fff;padding:15px 20px;border-radius:3px;line-height:200%}.l-guide-title[_ngcontent-%COMP%]{text-align:center;font-size:30px;padding:25px 0}.l-guide-title[_ngcontent-%COMP%] > .fas[_ngcontent-%COMP%]{font-size:30px;margin-right:5px}.l-guide-text[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function nn(e){return l["\u0275vid"](0,[l["\u0275pid"](0,qe.a,[Qe.b]),l["\u0275pid"](0,Ke.a,[H.a]),(e()(),l["\u0275eld"](2,0,null,null,7,"section",[["class","l-guide-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"h4",[["class","l-guide-title"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[["class","fas fa-exclamation-circle"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Warning"])),(e()(),l["\u0275eld"](6,0,null,null,3,"p",[["class","l-guide-text"]],[[8,"innerHTML",1]],null,null,null,null)),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275ppd"](8,1),l["\u0275ppd"](9,1)],null,(function(e,n){var t=n.component,i=l["\u0275unv"](n,6,0,e(n,9,0,l["\u0275nov"](n,0),l["\u0275unv"](n,6,0,e(n,8,0,l["\u0275nov"](n,1),l["\u0275unv"](n,6,0,l["\u0275nov"](n,7).transform(t.guideMessage$))))));e(n,6,0,i)}))}l["\u0275ccf"]("pp-application-inspector-usage-guide-container",Je,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-inspector-usage-guide-container",[],null,null,null,nn,en)),l["\u0275did"](1,114688,null,0,Je,[P.i],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var tn=function(){function e(n){_classCallCheck(this,e),this.messageQueueService=n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onClickZoomIn",value:function(){this.messageQueueService.sendMessage({to:S.b.TIMELINE_ZOOM_IN})}},{key:"onClickZoomOut",value:function(){this.messageQueueService.sendMessage({to:S.b.TIMELINE_ZOOM_OUT})}},{key:"onClickPrev",value:function(){this.messageQueueService.sendMessage({to:S.b.TIMELINE_MOVE_PREV})}},{key:"onClickNext",value:function(){this.messageQueueService.sendMessage({to:S.b.TIMELINE_MOVE_NEXT})}},{key:"onClickNow",value:function(){this.messageQueueService.sendMessage({to:S.b.TIMELINE_MOVE_NOW})}}]),e}(),ln=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:-webkit-box;display:flex}.l-current-time[_ngcontent-%COMP%]{height:28px;display:-webkit-box;display:flex}.l-current-time[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;cursor:pointer;height:100%;display:inline-block;padding:7px 10px;font-size:13px;font-weight:600;background-color:var(--primary-color)}.l-current-time[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:180px;height:100%;border:1px solid var(--primary-color);display:inline-block;font-size:13px;text-align:center;background-color:#fff}.l-command-group[_ngcontent-%COMP%]{display:inline-block}.l-command-group[_ngcontent-%COMP%]:first-child{margin-right:30px}.l-command-group[_ngcontent-%COMP%]:nth-child(2){margin-right:10px}.l-command-group[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]{font-size:14px;text-decoration:underline}.l-command-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0}"]],data:{}});function an(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","l-command-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","l-current-time"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"label",[],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickNow()&&l),l}),null,null)),(e()(),l["\u0275ted"](-1,null,["NOW"])),(e()(),l["\u0275eld"](4,0,null,null,0,"input",[["readonly",""],["type","text"]],[[8,"value",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,4,"div",[["class","l-command-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickZoomIn()&&l),l}),null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[["class","fas fa-plus"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickZoomOut()&&l),l}),null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","fas fa-minus"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,6,"div",[["class","l-command-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickPrev()&&l),l}),null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"span",[["class","fas fa-backward"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickNext()&&l),l}),null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"span",[["class","fas fa-forward"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickNow()&&l),l}),null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"span",[["class","fas fa-fast-forward"]],null,null,null,null,null))],null,(function(e,n){var t=n.component;e(n,4,0,l["\u0275inlineInterpolate"](1,"",t.pointingTime,""))}))}l["\u0275ccf"]("pp-timeline-command-group",tn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-timeline-command-group",[],null,null,null,an,ln)),l["\u0275did"](1,114688,null,0,tn,[_e.b],null,null)],(function(e,n){e(n,1,0)}),null)}),{pointingTime:"pointingTime"},{},[]);var on=function(){function e(n){_classCallCheck(this,e),this.storeHelperService=n,this.unsubscribe=new b.b}return _createClass(e,[{key:"ngOnInit",value:function(){this.connectStore()}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"connectStore",value:function(){this.pointingTime$=Object(K.a)(this.storeHelperService.getDateFormat(this.unsubscribe,0),this.storeHelperService.getTimezone(this.unsubscribe),this.storeHelperService.getInspectorTimelineSelectedTime(this.unsubscribe).pipe(Object(z.a)((function(e){return 0!==e})))).pipe(Object(T.a)((function(e){var n=_slicedToArray(e,3),t=n[0],l=n[1],i=n[2];return de(i).tz(l).format(t)})))}}]),e}(),un=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.l-command-group[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:5px 12px;-webkit-box-pack:end;justify-content:flex-end;background-color:#f5f5f5}"]],data:{}});function sn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","l-command-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"pp-timeline-command-group",[],null,null,null,an,ln)),l["\u0275did"](2,114688,null,0,tn,[_e.b],{pointingTime:[0,"pointingTime"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,n){var t=n.component;e(n,2,0,l["\u0275unv"](n,2,0,l["\u0275nov"](n,3).transform(t.pointingTime$)))}),null)}l["\u0275ccf"]("pp-timeline-command-group-container",on,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-timeline-command-group-container",[],null,null,null,sn,un)),l["\u0275did"](1,245760,null,0,on,[N.a],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var rn=function(){function e(n,t){_classCallCheck(this,e),this.hostElRef=n,this.renderer=t,this.outChangeTimelineUIEvent=new l.EventEmitter,this.outSelectEventStatus=new l.EventEmitter}return _createClass(e,[{key:"ngOnInit",value:function(){this.renderer.setStyle(this.hostElRef.nativeElement,"display","block")}},{key:"ngOnChanges",value:function(e){e.data&&e.data.currentValue&&this.initTimeline(),e.timezone&&this.timeline&&this.timeline.setTimezone(this.timezone),e.dateFormat&&this.timeline&&this.timeline.setDateFormat(this.dateFormat)}},{key:"initTimeline",value:function(){var e=this;this.timeline?(this.timeline.resetTimeRangeAndSelectionZone([this.selectionStartTime,this.selectionEndTime],[this.timelineStartTime,this.timelineEndTime],this.pointingTime),this.timeline.addData(this.data)):(this.timeline=new Ce(this.el.nativeElement,{width:this.hostElRef.nativeElement.offsetWidth,height:this.height,timelineRange:[this.timelineStartTime,this.timelineEndTime],selectionTimeRange:[this.selectionStartTime,this.selectionEndTime],pointingTime:this.pointingTime,timelineData:this.data,timezone:this.timezone,dateFormat:this.dateFormat,statusColor:{BASE:"rgba(187, 187, 187, .3)",UNKNOWN:"rgba(220, 214, 214, .8)",RUNNING:"rgba(0, 158, 0, .4 )",SHUTDOWN:"rgba(209, 82, 96, .7)",UNSTABLE_RUNNING:"rgba(255, 102, 0, .4)",EMPTY:"rgba(165, 219, 245, .7)"}}),this.timeline.onSelectEventStatus$.subscribe((function(n){e.outSelectEventStatus.emit(n)})),this.timeline.onChangeTimelineUIEvent$.subscribe((function(n){e.outChangeTimelineUIEvent.emit(n)})))}},{key:"zoomIn",value:function(){this.timeline.zoomIn()}},{key:"zoomOut",value:function(){this.timeline.zoomOut()}},{key:"movePrev",value:function(){this.timeline.movePrev()}},{key:"moveNext",value:function(){this.timeline.moveNext()}},{key:"moveNow",value:function(){this.timeline.moveHead()}},{key:"getTimelineRange",value:function(){return this.timeline.getTimelineRange()}},{key:"updateData",value:function(e){this.timeline.addData(e)}},{key:"ngOnDestroy",value:function(){}}]),e}(),cn=l["\u0275crt"]({encapsulation:2,styles:[[":host{display:block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.l-timeline-svg{width:100%}.l-timeline-svg text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.hide{display:none}.background rect{fill:#eee}.selection-zone rect{fill:rgba(255,255,255,.5)}.x-axis text{font-size:12px;text-anchor:middle}.x-axis line{stroke:#fff;stroke-width:.5;stroke-linecap:square}.left-handler rect,.right-handler rect{fill:#fff}.left-handler line,.right-handler line{stroke:#000;stroke-width:2}.guide line{stroke:red;stroke-width:.5;stroke-linecap:square;stroke-dasharray:2,2}.guide circle{stroke:red;stroke-width:2}.selection-point line{stroke:#ff0;stroke-width:1}.selection-point circle{fill:#ff0;stroke:#000;stroke-width:2}.events line{stroke:#000;stroke-width:1}.events circle{fill:#bdb76b}.events text{fill:#fff;font-size:11px}.event,image{cursor:pointer}.loading{fill:rgba(170,170,170,.1)}.loading rect{stroke-width:2px}.loading rect:nth-child(2){stroke:rgba(197,197,197,.9)}.loading rect:nth-child(3){stroke:rgba(239,246,105,.9)}.time-left-signboard text,.time-right-signboard text{fill:#000;font-size:13px}.time-series-signboard text{fill:#bbb}"]],data:{}});function hn(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{el:0}),(e()(),l["\u0275eld"](1,0,[[1,0],["timeline",1]],null,0,":svg:svg",[["class","l-timeline-svg"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("pp-timeline",rn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-timeline",[],null,null,null,hn,cn)),l["\u0275did"](1,770048,null,0,rn,[l.ElementRef,l.Renderer2],null,null)],(function(e,n){e(n,1,0)}),null)}),{data:"data",height:"height",pointingTime:"pointingTime",timelineStartTime:"timelineStartTime",timelineEndTime:"timelineEndTime",selectionStartTime:"selectionStartTime",selectionEndTime:"selectionEndTime",timezone:"timezone",dateFormat:"dateFormat"},{outChangeTimelineUIEvent:"outChangeTimelineUIEvent",outSelectEventStatus:"outSelectEventStatus"},[]);var dn=function(){function e(n,t,l,i){_classCallCheck(this,e),this.storeHelperService=n,this.messageQueueService=t,this.analyticsService=l,this.inspectorPageService=i,this.unsubscribe=new b.b}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.connectStore(),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_ZOOM_IN).subscribe((function(){e.analyticsService.trackEvent(S.e.ZOOM_IN_TIMELINE),e.timelineComponent.zoomIn()})),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_ZOOM_OUT).subscribe((function(){e.analyticsService.trackEvent(S.e.ZOOM_OUT_TIMELINE),e.timelineComponent.zoomOut()})),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_MOVE_PREV).subscribe((function(){e.analyticsService.trackEvent(S.e.MOVE_TO_PREV_ON_TIMELINE),e.timelineComponent.movePrev()})),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_MOVE_NEXT).subscribe((function(){e.analyticsService.trackEvent(S.e.MOVE_TO_PREV_ON_TIMELINE),e.timelineComponent.moveNext()})),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_MOVE_NOW).subscribe((function(){e.analyticsService.trackEvent(S.e.MOVE_TO_NOW_ON_TIMELINE),e.timelineComponent.moveNow()})),this.inspectorPageService.sourceForTimeline$.pipe(Object(y.a)(this.unsubscribe)).subscribe((function(n){var t=n.timelineInfo,l=t.range,i=t.selectionRange,a=t.selectedTime;e.timelineStartTime=l[0],e.timelineEndTime=l[1],e.selectionStartTime=i[0],e.selectionEndTime=i[1],e.pointingTime=a,e.timelineData={agentStatusTimeline:{timelineSegments:[{startTimestamp:l[0],endTimestamp:l[1],value:"EMPTY"}],includeWarning:!1},agentEventTimeline:{timelineSegments:[]}}}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"connectStore",value:function(){this.timezone$=this.storeHelperService.getTimezone(this.unsubscribe),this.dateFormat$=this.storeHelperService.getDateFormatArray(this.unsubscribe,0,6,7)}},{key:"onSelectEventStatus",value:function(e){}},{key:"onChangeTimelineUIEvent",value:function(e){e.changedSelectedTime&&this.analyticsService.trackEvent(S.e.CHANGE_POINTING_TIME_ON_TIMELINE),e.changedSelectionRange&&this.analyticsService.trackEvent(S.e.CHANGE_SELECTION_RANGE_ON_TIMELINE),this.inspectorPageService.updateTimelineData(e.data)}}]),e}(),pn=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;margin:18px 12px 0}"]],data:{}});function gn(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{timelineComponent:0}),(e()(),l["\u0275eld"](1,0,null,null,3,"pp-timeline",[],null,[[null,"outSelectEventStatus"],[null,"outChangeTimelineUIEvent"]],(function(e,n,t){var l=!0,i=e.component;return"outSelectEventStatus"===n&&(l=!1!==i.onSelectEventStatus(t)&&l),"outChangeTimelineUIEvent"===n&&(l=!1!==i.onChangeTimelineUIEvent(t)&&l),l}),hn,cn)),l["\u0275did"](2,770048,[[1,4]],0,rn,[l.ElementRef,l.Renderer2],{data:[0,"data"],height:[1,"height"],pointingTime:[2,"pointingTime"],timelineStartTime:[3,"timelineStartTime"],timelineEndTime:[4,"timelineEndTime"],selectionStartTime:[5,"selectionStartTime"],selectionEndTime:[6,"selectionEndTime"],timezone:[7,"timezone"],dateFormat:[8,"dateFormat"]},{outChangeTimelineUIEvent:"outChangeTimelineUIEvent",outSelectEventStatus:"outSelectEventStatus"}),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,n){var t=n.component;e(n,2,0,t.timelineData,90,t.pointingTime,t.timelineStartTime,t.timelineEndTime,t.selectionStartTime,t.selectionEndTime,l["\u0275unv"](n,2,7,l["\u0275nov"](n,3).transform(t.timezone$)),l["\u0275unv"](n,2,8,l["\u0275nov"](n,4).transform(t.dateFormat$)))}),null)}l["\u0275ccf"]("pp-application-inspector-timeline-container",dn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-inspector-timeline-container",[],null,null,null,gn,pn)),l["\u0275did"](1,245760,null,0,dn,[N.a,_e.b,L.a,Se],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var fn=function(){function e(){_classCallCheck(this,e),this.outClickOption=new l.EventEmitter}return _createClass(e,[{key:"ngOnInit",value:function(){this.activeOption=this.chartNumPerRow}},{key:"onClickOption",value:function(e){e!==this.activeOption&&(this.activeOption=e,this.outClickOption.emit(e))}},{key:"isActive",value:function(e){return this.activeOption===e}}]),e}(),mn=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.l-layout-option-button[_ngcontent-%COMP%]{color:#495057;padding:8px;outline:0}.l-layout-option-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.l-layout-option-button[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.l-layout-option-button.active[_ngcontent-%COMP%]{color:var(--primary-color)!important}"]],data:{}});function vn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","l-layout-option-button"]],[[2,"active",null]],[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickOption(2)&&l),l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-th-large"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"button",[["class","l-layout-option-button"]],[[2,"active",null]],[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickOption(3)&&l),l}),null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["class","fas fa-th"]],null,null,null,null,null))],null,(function(e,n){var t=n.component;e(n,0,0,t.isActive(2)),e(n,2,0,t.isActive(3))}))}l["\u0275ccf"]("pp-chart-layout-option",fn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-chart-layout-option",[],null,null,null,vn,mn)),l["\u0275did"](1,114688,null,0,fn,[],null,null)],(function(e,n){e(n,1,0)}),null)}),{chartNumPerRow:"chartNumPerRow"},{outClickOption:"outClickOption"},[]);var bn=function(){function e(n,t,l){_classCallCheck(this,e),this.webAppSettingDataService=n,this.messageQueueService=t,this.analyticsService=l}return _createClass(e,[{key:"ngOnInit",value:function(){this.storedChartLayoutOption=this.webAppSettingDataService.getChartLayoutOption()}},{key:"onClickOption",value:function(e){this.webAppSettingDataService.setChartLayoutOption(e),this.messageQueueService.sendMessage({to:S.b.INSPECTOR_CHART_SET_LAYOUT,param:e}),this.analyticsService.trackEvent(S.e.CLICK_INSPECTOR_CHART_LAYOUT_OPTION,"Chart Number Per Row: ".concat(e))}}]),e}(),yn=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}"]],data:{}});function Tn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-chart-layout-option",[],null,[[null,"outClickOption"]],(function(e,n,t){var l=!0,i=e.component;return"outClickOption"===n&&(l=!1!==i.onClickOption(t)&&l),l}),vn,mn)),l["\u0275did"](1,114688,null,0,fn,[],{chartNumPerRow:[0,"chartNumPerRow"]},{outClickOption:"outClickOption"})],(function(e,n){e(n,1,0,n.component.storedChartLayoutOption)}),null)}l["\u0275ccf"]("pp-chart-layout-option-container",bn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-chart-layout-option-container",[],null,null,null,Tn,yn)),l["\u0275did"](1,114688,null,0,bn,[H.a,_e.b,L.a],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var Cn,Sn=t("lreY"),kn=t("fqV1"),On=t("Q4w0"),En=t("3QGz"),Pn=t("SIFb"),_n=t("xW4L"),In=t("z7my"),Rn=t("cp0P"),xn=t("JIr8"),wn=t("1o/0"),Mn=t("VKJE");!function(e){e.LOADING="loading",e.RETRY="retry",e.CHART="chart"}(Cn||(Cn={}));var An=function(){function e(n,t,l,i,a,o,u,s,r){_classCallCheck(this,e),this.storeHelperService=n,this.inspectorChartDataService=t,this.translateService=l,this.analyticsService=i,this.dynamicPopupService=a,this.componentFactoryResolver=o,this.injector=u,this.inspectorPageService=s,this.messageQueueService=r,this.unsubscribe=new b.b,this.chartVisibility={},this._activeLayer=Cn.LOADING}return _createClass(e,[{key:"ngOnInit",value:function(){this.initI18nText(),this.initTimezoneAndDateFormat(),this.initChartData()}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"initI18nText",value:function(){var e=this;Object(Rn.a)(this.translateService.get("COMMON.FAILED_TO_FETCH_DATA"),this.translateService.get("COMMON.NO_DATA")).subscribe((function(n){var t=_slicedToArray(n,2),l=t[0],i=t[1];e.dataFetchFailedText=l,e.dataEmptyText=i}))}},{key:"initTimezoneAndDateFormat",value:function(){var e=this;Object(K.a)(this.storeHelperService.getTimezone(this.unsubscribe),this.storeHelperService.getDateFormatArray(this.unsubscribe,4,5)).subscribe((function(n){var t=_slicedToArray(n,2),l=t[0],i=t[1];e.timezone=l,e.dateFormat=i}))}},{key:"onRendered",value:function(){this.activeLayer=Cn.CHART}},{key:"onMouseMove",value:function(e){var n=e.clientY,t=e.target.getBoundingClientRect(),l=t.height,i=(n-t.top)/l;this.messageQueueService.sendMessage({to:S.b.INSPECTOR_CHART_MOUSE_MOVE,param:i})}},{key:"initChartData",value:function(){var e=this;this.inspectorPageService.sourceForChart$.pipe(Object(y.a)(this.unsubscribe),Object(le.a)((function(){return e.activeLayer=Cn.LOADING})),Object(le.a)((function(n){var t=n.range;return e.previousRange=t})),Object(ne.a)((function(n){var t=n.range;return e.chartContainer.getData(t).pipe(Object(xn.a)((function(){return Object(ee.a)(null)})))}))).subscribe((function(n){return e.chartDataResCallbackFn(n)}))}},{key:"setChartVisibility",value:function(e){this.chartVisibility={"show-chart":e,"shady-chart":!e&&void 0!==this.chartConfig}}},{key:"isActiveLayer",value:function(e){return this.activeLayer===e}},{key:"onRetry",value:function(){var e=this;this.activeLayer=Cn.LOADING,this.chartContainer.getData(this.previousRange).pipe(Object(xn.a)((function(){return Object(ee.a)(null)}))).subscribe((function(n){return e.chartDataResCallbackFn(n)}))}},{key:"chartDataResCallbackFn",value:function(e){null===e||Object(Ee.c)(e,"exception")?(this.activeLayer=Cn.RETRY,this.setRetryMessage(e)):this.setChartConfig(this.makeChartData(e))}},{key:"setChartConfig",value:function(e){this.chartConfig={dataConfig:this.makeDataOption(e),elseConfig:this.makeElseOption(e)},this.isDataEmpty=this.isEmpty(e)}},{key:"setRetryMessage",value:function(e){this.retryMessage=e?e.exception.message:this.dataFetchFailedText}},{key:"isEmpty",value:function(e){return 0===e.length||e.slice(1).every((function(e){return 1===e.length}))}},{key:"makeChartData",value:function(e){return this.chartContainer.makeChartData(e)}},{key:"makeDataOption",value:function(e){return Object.assign({x:"x",columns:e,empty:{label:{text:this.dataEmptyText}}},this.chartContainer.makeDataOption())}},{key:"makeElseOption",value:function(e){var n=this;return Object.assign({padding:{top:20,bottom:15,right:45},axis:Object.assign({x:{type:"timeseries",tick:{count:4,format:function(e){return de(e).tz(n.timezone).format(n.dateFormat[0])+"\n"+de(e).tz(n.timezone).format(n.dateFormat[1])}},padding:{left:0,right:0}}},this.chartContainer.makeYAxisOptions(e)),point:{r:0,focus:{expand:{r:3}}},resize:{auto:!1},tooltip:{linked:!0,format:{value:function(e,t,l,i){return n.chartContainer.getTooltipFormat(e,l,i)}},order:""},transition:{duration:0},zoom:{enabled:{type:"drag"}}},this.chartContainer.makeElseOption())}},{key:"onShowHelp",value:function(e){this.analyticsService.trackEvent(S.e.TOGGLE_HELP_VIEWER,this.chartType);var n=e.target.getBoundingClientRect(),t=n.left,l=n.top,i=n.width,a=n.height;this.dynamicPopupService.openPopup({data:A.a[this.chartType],coord:{coordX:t+i/2,coordY:l+a/2},component:A.b},{resolver:this.componentFactoryResolver,injector:this.injector})}},{key:"chartType",set:function(e){this._chartType=e,this.chartContainer=Mn.b.createInspectorChartContainer(e,this.inspectorChartDataService)},get:function(){return this._chartType}},{key:"activeLayer",set:function(e){this._activeLayer=e,this.setChartVisibility(this._activeLayer===Cn.CHART)},get:function(){return this._activeLayer}}]),e}(),Dn=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%}.l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background:#f6f8fb}.l-title-group[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{font-size:18px;color:#a8acb5;cursor:pointer}.l-chart-area-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}"]],data:{}});function Nn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.chartContainer.title)}))}function Ln(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Nn)),l["\u0275did"](2,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onShowHelp(t)&&l),l}),null,null)),(e()(),l["\u0275eld"](4,0,null,null,8,"div",[["class","l-chart-area-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"pp-loading",[],null,null,null,Sn.b,Sn.a)),l["\u0275did"](6,114688,null,0,kn.a,[l.ElementRef,l.Renderer2],{showLoading:[0,"showLoading"],zIndex:[1,"zIndex"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"pp-retry",[],null,[[null,"outRetry"]],(function(e,n,t){var l=!0,i=e.component;return"outRetry"===n&&(l=!1!==i.onRetry()&&l),l}),On.b,On.a)),l["\u0275did"](8,114688,null,0,En.a,[],{showRetry:[0,"showRetry"],message:[1,"message"]},{outRetry:"outRetry"}),(e()(),l["\u0275eld"](9,0,null,null,3,"pp-inspector-chart",[],null,[[null,"outRendered"],[null,"mousemove"]],(function(e,n,t){var l=!0,i=e.component;return"outRendered"===n&&(l=!1!==i.onRendered()&&l),"mousemove"===n&&(l=!1!==i.onMouseMove(t)&&l),l}),Pn.b,Pn.a)),l["\u0275prd"](512,null,h["\u0275NgClassImpl"],h["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](11,278528,null,0,h.NgClass,[h["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["\u0275did"](12,770048,null,0,_n.a,[_e.b,In.a,E.a,l.ElementRef,l.Renderer2],{chartConfig:[0,"chartConfig"]},{outRendered:"outRendered"})],(function(e,n){var t=n.component;e(n,2,0,t.chartContainer),e(n,6,0,t.isActiveLayer("loading"),10),e(n,8,0,t.isActiveLayer("retry"),t.retryMessage),e(n,11,0,t.chartVisibility),e(n,12,0,t.chartConfig)}),null)}l["\u0275ccf"]("pp-inspector-chart-container",An,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](1,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],null,null)],(function(e,n){e(n,1,0)}),null)}),{chartType:"chartType"},{},[]);var Fn=function(){function e(){_classCallCheck(this,e),this.outSourceDataSelected=new l.EventEmitter,this.selectedIndex=0}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var n=this;Object.keys(e).map((function(e){switch(e){case"data":n.initSelectedIndex()}}))}},{key:"initSelectedIndex",value:function(){this.selectedIndex=0}},{key:"isItemSelected",value:function(e){return e===this.selectedIndex}},{key:"selectSource",value:function(e){this.selectedIndex=e,this.outSourceDataSelected.emit(this.selectedIndex)}},{key:"onClickSourceList",value:function(e){e!==this.selectedIndex&&this.selectSource(e)}}]),e}(),jn=l["\u0275crt"]({encapsulation:0,styles:[[".l-sourcelist-wrapper[_ngcontent-%COMP%]{background-color:#fff;font-size:12px;padding:10px}.l-sourcelist-title[_ngcontent-%COMP%]{background-color:#f6f8fb;border-top:1px solid #ddd;border-left:1px solid #ddd;border-right:1px solid #ddd;padding:10px}.l-source-data-list[_ngcontent-%COMP%]{border:1px solid #ddd}.l-source-data-list-item[_ngcontent-%COMP%]{cursor:pointer;color:#ddd;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.l-source-data-list-item[_ngcontent-%COMP%]:hover{background-color:#ddd;color:#fff}.l-selected-item[_ngcontent-%COMP%]{color:#000;font-weight:600}.l-selected-item[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000}.l-source-data-list-item[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{width:7%;text-align:center}.l-source-data-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:space-evenly;justify-content:space-evenly;-webkit-box-align:center;align-items:center;border-left:1px solid #ddd;padding:7px 0 7px 7px;width:93%}.l-service-type-wrapper[_ngcontent-%COMP%]{display:inline-block;width:10%;overflow-wrap:break-word}.l-jdbc-url-wrapper[_ngcontent-%COMP%]{display:inline-block;width:85%;overflow-wrap:break-word}"]],data:{}});function Un(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","l-source-data-list-item"]],[[2,"l-selected-item",null]],[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickSourceList(e.context.index)&&l),l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[["class","fas fa-check"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","l-source-data-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"span",[["class","l-service-type-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,["",""])),(e()(),l["\u0275eld"](5,0,null,null,1,"span",[["class","l-jdbc-url-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275ted"](6,null,["",""]))],null,(function(e,n){e(n,0,0,n.component.isItemSelected(n.context.index)),e(n,4,0,n.context.$implicit.serviceType),e(n,6,0,n.context.$implicit.jdbcUrl)}))}function zn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","l-sourcelist-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"h4",[["class","l-sourcelist-title"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Data Source List"])),(e()(),l["\u0275eld"](3,0,null,null,2,"ul",[["class","l-source-data-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Un)),l["\u0275did"](5,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,5,0,n.component.data)}),null)}l["\u0275ccf"]("pp-application-data-source-chart-sourcelist",Fn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-data-source-chart-sourcelist",[],null,null,null,zn,jn)),l["\u0275did"](1,638976,null,0,Fn,[],null,null)],(function(e,n){e(n,1,0)}),null)}),{data:"data"},{outSourceDataSelected:"outSourceDataSelected"},[]);var Gn=t("6oKA"),Hn=t("0C/I"),Vn=function(){function e(n,t,l,i,a,o,u,s){_classCallCheck(this,e),this.storeHelperService=n,this.inspectorChartDataService=t,this.translateService=l,this.analyticsService=i,this.dynamicPopupService=a,this.componentFactoryResolver=o,this.injector=u,this.inspectorPageService=s,this.unsubscribe=new b.b,this.defaultYMax=4,this.chartVisibility={},this._activeLayer=Cn.LOADING}return _createClass(e,[{key:"ngOnInit",value:function(){this.initI18nText(),this.initTimezoneAndDateFormat(),this.initChartData()}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"initI18nText",value:function(){var e=this;Object(Rn.a)(this.translateService.get("COMMON.FAILED_TO_FETCH_DATA"),this.translateService.get("COMMON.NO_DATA")).subscribe((function(n){var t=_slicedToArray(n,2),l=t[0],i=t[1];e.dataFetchFailedText=l,e.dataEmptyText=i}))}},{key:"initTimezoneAndDateFormat",value:function(){var e=this;Object(K.a)(this.storeHelperService.getTimezone(this.unsubscribe),this.storeHelperService.getDateFormatArray(this.unsubscribe,4,5)).subscribe((function(n){var t=_slicedToArray(n,2),l=t[0],i=t[1];e.timezone=l,e.dateFormat=i}))}},{key:"onRendered",value:function(){this.activeLayer=Cn.CHART}},{key:"initChartData",value:function(){var e=this;this.inspectorPageService.sourceForChart$.pipe(Object(y.a)(this.unsubscribe),Object(le.a)((function(){return e.activeLayer=Cn.LOADING})),Object(le.a)((function(n){var t=n.range;return e.previousRange=t})),Object(ne.a)((function(n){var t=n.range;return e.inspectorChartDataService.getData(t).pipe(Object(xn.a)((function(){return Object(ee.a)(null)})))}))).subscribe((function(n){return e.chartDataResCallbackFn(n)}))}},{key:"setChartVisibility",value:function(e){this.chartVisibility={"show-chart":e,"shady-chart":!e&&void 0!==this.chartConfig}}},{key:"isActiveLayer",value:function(e){return this.activeLayer===e}},{key:"onRetry",value:function(){var e=this;this.activeLayer=Cn.LOADING,this.inspectorChartDataService.getData(this.previousRange).pipe(Object(xn.a)((function(){return Object(ee.a)(null)}))).subscribe((function(n){return e.chartDataResCallbackFn(n)}))}},{key:"onSourceDataSelected",value:function(e){this.activeLayer=Cn.LOADING,this.setMinMaxAgentIdList(this.chartData[e]),this.setChartConfig(this.makeChartData(this.chartData[e]))}},{key:"chartDataResCallbackFn",value:function(e){null===e||Object(Ee.c)(e,"exception")?(this.activeLayer=Cn.RETRY,this.setRetryMessage(e)):(this.chartData=e,this.sourceForList=e.map((function(e){return{serviceType:e.serviceType,jdbcUrl:e.jdbcUrl}})),this.setMinMaxAgentIdList(e[0]),this.setChartConfig(this.makeChartData(e[0])))}},{key:"setChartConfig",value:function(e){this.chartConfig={dataConfig:this.makeDataOption(e),elseConfig:this.makeElseOption(e)},this.isDataEmpty=this.isEmpty(e)}},{key:"setRetryMessage",value:function(e){this.retryMessage=e?e.exception.message:this.dataFetchFailedText}},{key:"isEmpty",value:function(e){return 0===e.length||e.slice(1).every((function(e){return 1===e.length}))}},{key:"setMinMaxAgentIdList",value:function(e){this.minAgentIdList=e.charts.y.ACTIVE_CONNECTION_SIZE.map((function(e){return e[1]})),this.maxAgentIdList=e.charts.y.ACTIVE_CONNECTION_SIZE.map((function(e){return e[3]}))}},{key:"makeChartData",value:function(e){var n=e.charts;return[["x"].concat(_toConsumableArray(Object(Hn.c)(n.x))),["min"].concat(_toConsumableArray(Object(Hn.d)(n.y.ACTIVE_CONNECTION_SIZE,0))),["avg"].concat(_toConsumableArray(Object(Hn.d)(n.y.ACTIVE_CONNECTION_SIZE,4))),["max"].concat(_toConsumableArray(Object(Hn.d)(n.y.ACTIVE_CONNECTION_SIZE,2)))]}},{key:"makeDataOption",value:function(e){return{x:"x",columns:e,type:"spline",names:{min:"Min",avg:"Avg",max:"Max"},colors:{min:"#66B2FF",avg:"#4C0099",max:"#0000CC"},empty:{label:{text:this.dataEmptyText}}}}},{key:"makeElseOption",value:function(e){var n,t=this;return{line:{classes:["min","avg","max"]},padding:{top:20,bottom:15,right:45},axis:{x:{type:"timeseries",tick:{count:4,format:function(e){return de(e).tz(t.timezone).format(t.dateFormat[0])+"\n"+de(e).tz(t.timezone).format(t.dateFormat[1])}},padding:{left:0,right:0}},y:{label:{text:"Connection (count)",position:"outer-middle"},tick:{count:5},padding:{top:0,bottom:0},min:0,max:(n=Object(Hn.a)(e,1),0===n?t.defaultYMax:n),default:[0,this.defaultYMax]}},point:{r:0,focus:{expand:{r:3}}},tooltip:{linked:!0,format:{value:function(e,n,l,i){return e<0?"-":"".concat(e," ").concat(t.getAgentId(l,i))}}},transition:{duration:0},zoom:{enabled:{type:"drag"}}}}},{key:"getAgentId",value:function(e,n){return"avg"===e?"":"(".concat("min"===e?this.minAgentIdList[n]:this.maxAgentIdList[n],")")}},{key:"onShowHelp",value:function(e){this.analyticsService.trackEvent(S.e.TOGGLE_HELP_VIEWER,A.a.APPLICATION_DATA_SOURCE);var n=e.target.getBoundingClientRect(),t=n.left,l=n.top,i=n.width,a=n.height;this.dynamicPopupService.openPopup({data:A.a.APPLICATION_DATA_SOURCE,coord:{coordX:t+i/2,coordY:l+a/2},component:A.b},{resolver:this.componentFactoryResolver,injector:this.injector})}},{key:"activeLayer",set:function(e){this._activeLayer=e,this.setChartVisibility(this._activeLayer===Cn.CHART)},get:function(){return this._activeLayer}}]),e}(),$n=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background:#f6f8fb}.l-title-group[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{font-size:18px;color:#a8acb5;cursor:pointer}.l-chart-area-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}"]],data:{}});function Bn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-application-data-source-chart-sourcelist",[],null,[[null,"outSourceDataSelected"]],(function(e,n,t){var l=!0,i=e.component;return"outSourceDataSelected"===n&&(l=!1!==i.onSourceDataSelected(t)&&l),l}),zn,jn)),l["\u0275did"](2,638976,null,0,Fn,[],{data:[0,"data"]},{outSourceDataSelected:"outSourceDataSelected"})],(function(e,n){e(n,2,0,n.component.sourceForList)}),null)}function Zn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Data Source"])),(e()(),l["\u0275eld"](3,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onShowHelp(t)&&l),l}),null,null)),(e()(),l["\u0275eld"](4,0,null,null,8,"div",[["class","l-chart-area-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"pp-loading",[],null,null,null,Sn.b,Sn.a)),l["\u0275did"](6,114688,null,0,kn.a,[l.ElementRef,l.Renderer2],{showLoading:[0,"showLoading"],zIndex:[1,"zIndex"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"pp-retry",[],null,[[null,"outRetry"]],(function(e,n,t){var l=!0,i=e.component;return"outRetry"===n&&(l=!1!==i.onRetry()&&l),l}),On.b,On.a)),l["\u0275did"](8,114688,null,0,En.a,[],{showRetry:[0,"showRetry"],message:[1,"message"]},{outRetry:"outRetry"}),(e()(),l["\u0275eld"](9,0,null,null,3,"pp-inspector-chart",[],null,[[null,"outRendered"]],(function(e,n,t){var l=!0,i=e.component;return"outRendered"===n&&(l=!1!==i.onRendered()&&l),l}),Pn.b,Pn.a)),l["\u0275prd"](512,null,h["\u0275NgClassImpl"],h["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](11,278528,null,0,h.NgClass,[h["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["\u0275did"](12,770048,null,0,_n.a,[_e.b,In.a,E.a,l.ElementRef,l.Renderer2],{chartConfig:[0,"chartConfig"]},{outRendered:"outRendered"}),(e()(),l["\u0275and"](16777216,null,null,1,null,Bn)),l["\u0275did"](14,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){var t=n.component;e(n,6,0,t.isActiveLayer("loading"),10),e(n,8,0,t.isActiveLayer("retry"),t.retryMessage),e(n,11,0,t.chartVisibility),e(n,12,0,t.chartConfig),e(n,14,0,t.chartConfig&&!t.isDataEmpty)}),null)}l["\u0275ccf"]("pp-application-data-source-chart-container",Vn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-data-source-chart-container",[],null,null,null,Zn,$n)),l["\u0275did"](1,245760,null,0,Vn,[N.a,Gn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var Xn=t("VRyK"),Wn=function(){function e(n,t,l,i,a){_classCallCheck(this,e),this.webAppSettingDataService=n,this.messageQueueService=t,this.newUrlStateNotificationService=l,this.translateService=i,this.renderer=a,this.hostClass="l-application-inspector-contents",this.unsubscribe=new b.b,this.chartType=Mn.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.isApplicationInspectorActivated$=this.webAppSettingDataService.isApplicationInspectorActivated(),this.coverRangeElements$=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(T.a)((function(e){return e.isRealTimeMode()}))),this.guideMessage$=this.translateService.get("INSPECTOR.CHART_INTERACTION_GUIDE_MESSAGE"),Object(Xn.a)(Object(ee.a)(this.webAppSettingDataService.getChartLayoutOption()),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.INSPECTOR_CHART_SET_LAYOUT)).subscribe((function(n){e.renderer.setStyle(e.chartGroupWrapper.nativeElement,"grid-template-columns",e.getGridLayout(n))}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"getGridLayout",value:function(e){return"repeat(".concat(e,", 1fr)")}}]),e}(),Yn=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%;height:100%}.l-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column nowrap;width:100%;height:100%}.l-date-range[_ngcontent-%COMP%]{background-color:#fff;height:150px;position:relative}.l-cover[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#ccc;z-index:5;position:absolute;left:0;top:0;opacity:.5}.l-main-contents[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto}.l-chart-option-area[_ngcontent-%COMP%]{width:calc(100% - 20px);display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;margin:5px 10px 0 15px}.l-guide-text[_ngcontent-%COMP%]{font-family:'Open Sans';color:#333;font-size:14px;font-style:italic}.l-chart-group-wrap[_ngcontent-%COMP%]{display:grid;width:100%;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;row-gap:10px;padding:10px;min-height:0;min-width:0}.l-chart-wrapper[_ngcontent-%COMP%]{overflow:hidden;min-width:0}"]],data:{}});function qn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","l-cover"]],null,null,null,null,null))],null,null)}function Qn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-application-inspector-usage-guide-container",[],null,null,null,nn,en)),l["\u0275did"](2,114688,null,0,Je,[P.i],null,null)],(function(e,n){e(n,2,0)}),null)}function Kn(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{chartGroupWrapper:0}),(e()(),l["\u0275eld"](1,0,null,null,56,"div",[["class","l-wrapper"]],[[8,"hidden",0]],null,null,null,null)),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](3,0,null,null,7,"article",[["class","l-date-range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"pp-timeline-command-group-container",[],null,null,null,sn,un)),l["\u0275did"](5,245760,null,0,on,[N.a],null,null),(e()(),l["\u0275eld"](6,0,null,null,1,"pp-application-inspector-timeline-container",[],null,null,null,gn,pn)),l["\u0275did"](7,245760,null,0,dn,[N.a,_e.b,L.a,Se],null,null),(e()(),l["\u0275and"](16777216,null,null,2,null,qn)),l["\u0275did"](9,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](11,0,null,null,46,"div",[["class","l-main-contents"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,5,"div",[["class","l-chart-option-area"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,2,"p",[["class","l-guide-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](14,null,["",""])),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](16,0,null,null,1,"pp-chart-layout-option-container",[],null,null,null,Tn,yn)),l["\u0275did"](17,114688,null,0,bn,[H.a,_e.b,L.a],null,null),(e()(),l["\u0275eld"](18,0,[[1,0],["chartGroupWrapper",1]],null,39,"div",[["class","l-chart-group-wrap"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](21,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](22,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](24,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](25,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](27,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](28,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](30,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](31,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](33,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](34,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](35,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](36,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](37,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](38,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](39,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](40,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](41,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](42,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](43,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](44,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](45,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](46,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](47,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](48,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](49,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](50,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](51,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](52,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](53,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](54,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](55,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](56,0,null,null,1,"pp-application-data-source-chart-container",[],null,null,null,Zn,$n)),l["\u0275did"](57,245760,null,0,Vn,[N.a,Gn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se],null,null),(e()(),l["\u0275and"](16777216,null,null,2,null,Qn)),l["\u0275did"](59,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,n){var t=n.component;e(n,5,0),e(n,7,0),e(n,9,0,l["\u0275unv"](n,9,0,l["\u0275nov"](n,10).transform(t.coverRangeElements$))),e(n,17,0),e(n,21,0,t.chartType.APPLICATION_JVM_HEAP),e(n,24,0,t.chartType.APPLICATION_JVM_NON_HEAP),e(n,27,0,t.chartType.APPLICATION_JVM_CPU),e(n,30,0,t.chartType.APPLICATION_SYSTEM_CPU),e(n,33,0,t.chartType.APPLICATION_TPS),e(n,36,0,t.chartType.APPLICATION_ACTIVE_THREAD),e(n,39,0,t.chartType.APPLICATION_RESPONSE_TIME),e(n,42,0,t.chartType.APPLICATION_OPEN_FILE_DESCRIPTOR),e(n,45,0,t.chartType.APPLICATION_DIRECT_BUFFER_COUNT),e(n,48,0,t.chartType.APPLICATION_DIRECT_BUFFER_MEMORY),e(n,51,0,t.chartType.APPLICATION_MAPPED_BUFFER_COUNT),e(n,54,0,t.chartType.APPLICATION_MAPPED_BUFFER_MEMORY),e(n,57,0),e(n,59,0,!l["\u0275unv"](n,59,0,l["\u0275nov"](n,60).transform(t.isApplicationInspectorActivated$)))}),(function(e,n){var t=n.component;e(n,1,0,!l["\u0275unv"](n,1,0,l["\u0275nov"](n,2).transform(t.isApplicationInspectorActivated$))),e(n,14,0,l["\u0275unv"](n,14,0,l["\u0275nov"](n,15).transform(t.guideMessage$)))}))}var Jn=l["\u0275ccf"]("pp-application-inspector-contents-container",Wn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-inspector-contents-container",[],[[8,"className",0]],null,null,Kn,Yn)),l["\u0275did"](1,245760,null,0,Wn,[H.a,_e.b,E.a,P.i,l.Renderer2],null,null)],(function(e,n){e(n,1,0)}),(function(e,n){e(n,0,0,l["\u0275nov"](n,1).hostClass)}))}),{},{},[]),et=t("IheW"),nt=function(){function e(n){_classCallCheck(this,e),this.http=n,this.requestURL="getAgentStatusTimeline.pinpoint"}return _createClass(e,[{key:"getData",value:function(e,n){return this.http.get(this.requestURL,this.makeRequestOptionsArgs(e,n)).pipe(Object(ke.a)(3))}},{key:"makeRequestOptionsArgs",value:function(e,n){var t=_slicedToArray(n,2),l=t[0],i=t[1];return{params:(new et.h).set("agentId",e).set("from",l+"").set("to",i+"").set("exclude","10199")}}}]),e}(),tt=function(){function e(n,t,l,i,a,o,u,s,r,c){_classCallCheck(this,e),this.storeHelperService=n,this.newUrlStateNotificationService=t,this.urlRouteManagerService=l,this.agentTimelineDataService=i,this.messageQueueService=a,this.dynamicPopupService=o,this.analyticsService=u,this.componentFactoryResolver=s,this.injector=r,this.inspectorPageService=c,this.unsubscribe=new b.b}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.connectStore(),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_ZOOM_IN).subscribe((function(){e.analyticsService.trackEvent(S.e.ZOOM_IN_TIMELINE),e.timelineComponent.zoomIn(),e.updateTimelineData()})),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_ZOOM_OUT).subscribe((function(){e.analyticsService.trackEvent(S.e.ZOOM_OUT_TIMELINE),e.timelineComponent.zoomOut(),e.updateTimelineData()})),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_MOVE_PREV).subscribe((function(){e.analyticsService.trackEvent(S.e.MOVE_TO_PREV_ON_TIMELINE),e.timelineComponent.movePrev(),e.updateTimelineData()})),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_MOVE_NEXT).subscribe((function(){e.analyticsService.trackEvent(S.e.MOVE_TO_PREV_ON_TIMELINE),e.timelineComponent.moveNext(),e.updateTimelineData()})),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_MOVE_NOW).subscribe((function(){e.analyticsService.trackEvent(S.e.MOVE_TO_NOW_ON_TIMELINE),e.timelineComponent.moveNow(),e.updateTimelineData()})),this.inspectorPageService.sourceForTimeline$.pipe(Object(y.a)(this.unsubscribe),Object(T.a)((function(n){var t=n.timelineInfo,l=n.agentId,i=t.range,a=t.selectionRange,o=t.selectedTime;return e.timelineStartTime=i[0],e.timelineEndTime=i[1],e.selectionStartTime=a[0],e.selectionEndTime=a[1],e.pointingTime=o,{range:i,agentId:l}})),Object(ne.a)((function(n){var t=n.range,l=n.agentId;return e.agentTimelineDataService.getData(l,t)}))).subscribe((function(n){e.timelineData=n}),(function(n){e.dynamicPopupService.openPopup({data:{title:"Error",contents:n},component:ae.a,onCloseCallback:function(){e.urlRouteManagerService.reload()}},{resolver:e.componentFactoryResolver,injector:e.injector})}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"connectStore",value:function(){this.timezone$=this.storeHelperService.getTimezone(this.unsubscribe),this.dateFormat$=this.storeHelperService.getDateFormatArray(this.unsubscribe,0,6,7)}},{key:"updateTimelineData",value:function(){var e=this,n=this.timelineComponent.getTimelineRange(),t=this.newUrlStateNotificationService.getPathValue(k.b.AGENT_ID);this.agentTimelineDataService.getData(t,n).subscribe((function(n){e.timelineComponent.updateData(n)}))}},{key:"onSelectEventStatus",value:function(e){this.messageQueueService.sendMessage({to:S.b.TIMELINE_SELECTED_EVENT_STATUS,param:e})}},{key:"onChangeTimelineUIEvent",value:function(e){e.changedSelectedTime&&this.analyticsService.trackEvent(S.e.CHANGE_POINTING_TIME_ON_TIMELINE),e.changedSelectionRange&&this.analyticsService.trackEvent(S.e.CHANGE_SELECTION_RANGE_ON_TIMELINE),this.inspectorPageService.updateTimelineData(e.data)}}]),e}(),lt=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;margin:18px 12px 0}"]],data:{}});function it(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{timelineComponent:0}),(e()(),l["\u0275eld"](1,0,null,null,3,"pp-timeline",[],null,[[null,"outSelectEventStatus"],[null,"outChangeTimelineUIEvent"]],(function(e,n,t){var l=!0,i=e.component;return"outSelectEventStatus"===n&&(l=!1!==i.onSelectEventStatus(t)&&l),"outChangeTimelineUIEvent"===n&&(l=!1!==i.onChangeTimelineUIEvent(t)&&l),l}),hn,cn)),l["\u0275did"](2,770048,[[1,4]],0,rn,[l.ElementRef,l.Renderer2],{data:[0,"data"],height:[1,"height"],pointingTime:[2,"pointingTime"],timelineStartTime:[3,"timelineStartTime"],timelineEndTime:[4,"timelineEndTime"],selectionStartTime:[5,"selectionStartTime"],selectionEndTime:[6,"selectionEndTime"],timezone:[7,"timezone"],dateFormat:[8,"dateFormat"]},{outChangeTimelineUIEvent:"outChangeTimelineUIEvent",outSelectEventStatus:"outSelectEventStatus"}),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,n){var t=n.component;e(n,2,0,t.timelineData,90,t.pointingTime,t.timelineStartTime,t.timelineEndTime,t.selectionStartTime,t.selectionEndTime,l["\u0275unv"](n,2,7,l["\u0275nov"](n,3).transform(t.timezone$)),l["\u0275unv"](n,2,8,l["\u0275nov"](n,4).transform(t.dateFormat$)))}),null)}l["\u0275ccf"]("pp-agent-inspector-timeline-container",tt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-inspector-timeline-container",[],null,null,null,it,lt)),l["\u0275did"](1,245760,null,0,tt,[N.a,E.a,V.a,nt,_e.b,F.a,L.a,l.ComponentFactoryResolver,l.Injector,Se],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var at=function(){function e(){_classCallCheck(this,e),this.outClose=new l.EventEmitter}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onClickClose",value:function(){this.outClose.next()}},{key:"formatDate",value:function(e){return de(e).tz(this.timezone).format(this.dateFormat)}}]),e}(),ot=l["\u0275crt"]({encapsulation:0,styles:[[".l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background-color:#9dd4bb}.l-title-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000;float:right;font-size:14px}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;min-height:40px;max-height:200px;overflow-y:auto}"]],data:{}});function ut(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,["",""])),(e()(),l["\u0275eld"](3,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,["",""])),(e()(),l["\u0275eld"](5,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["\u0275ted"](7,null,["",""]))],null,(function(e,n){e(n,2,0,n.component.formatDate(n.context.$implicit.eventTimestamp)),e(n,4,0,n.context.$implicit.eventTypeDesc),e(n,7,0,n.context.$implicit.eventMessage)}))}function st(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["Event - "," "])),(e()(),l["\u0275eld"](2,0,null,null,0,"button",[["class","fas fa-times"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickClose()&&l),l}),null,null)),(e()(),l["\u0275eld"](3,0,null,null,17,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,16,"table",[["class","table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"caption",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Events"])),(e()(),l["\u0275eld"](7,0,null,null,3,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,0,"col",[["width","30%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"col",[["width","30%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"col",[["width","40%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,6,"thead",[],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Time"])),(e()(),l["\u0275eld"](14,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Description"])),(e()(),l["\u0275eld"](16,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Message"])),(e()(),l["\u0275eld"](18,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ut)),l["\u0275did"](20,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,20,0,n.component.eventData)}),(function(e,n){var t=n.component;e(n,1,0,null==t.eventData?null:t.eventData.length)}))}l["\u0275ccf"]("pp-agent-event-view",at,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-event-view",[],null,null,null,st,ot)),l["\u0275did"](1,114688,null,0,at,[],null,null)],(function(e,n){e(n,1,0)}),null)}),{eventData:"eventData",timezone:"timezone",dateFormat:"dateFormat"},{outClose:"outClose"},[]);var rt=function(){function e(n,t){_classCallCheck(this,e),this.http=n,this.newUrlStateNotificationService=t,this.requestURL="getAgentEvents.pinpoint"}return _createClass(e,[{key:"getData",value:function(e,n){return this.http.get(this.requestURL,this.makeRequestOptionsArgs(e,n)).pipe(Object(ke.a)(3))}},{key:"makeRequestOptionsArgs",value:function(e,n){return{params:(new et.h).set("agentId",this.newUrlStateNotificationService.getPathValue(k.b.AGENT_ID)).set("from",e+"").set("to",n+"").set("exclude","10199")}}}]),e}(),ct=function(){function e(n,t,l,i,a,o,u){_classCallCheck(this,e),this.changeDetectorRef=n,this.storeHelperService=t,this.messageQueueService=l,this.agentEventsDataService=i,this.dynamicPopupService=a,this.componentFactoryResolver=o,this.injector=u,this.unsubscribe=new b.b,this.viewComponent=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.connectStore()}},{key:"connectStore",value:function(){var e=this;this.timezone$=this.storeHelperService.getTimezone(this.unsubscribe),this.dateFormat$=this.storeHelperService.getDateFormat(this.unsubscribe,1),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.TIMELINE_SELECTED_EVENT_STATUS).pipe(Object(ne.a)((function(n){return e.agentEventsDataService.getData(n.startTimestamp,n.endTimestamp)}))).subscribe((function(n){e.eventData=n,e.viewComponent=!0,e.changeDetectorRef.detectChanges()}),(function(n){e.dynamicPopupService.openPopup({data:{title:"Error",contents:n},component:ae.a},{resolver:e.componentFactoryResolver,injector:e.injector})}))}},{key:"onClose",value:function(){this.viewComponent=!1,this.changeDetectorRef.detectChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}}]),e}(),ht=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;border-bottom:1px solid #e5e8f0}"]],data:{}});function dt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"pp-agent-event-view",[],null,[[null,"outClose"]],(function(e,n,t){var l=!0,i=e.component;return"outClose"===n&&(l=!1!==i.onClose()&&l),l}),st,ot)),l["\u0275did"](2,114688,null,0,at,[],{eventData:[0,"eventData"],timezone:[1,"timezone"],dateFormat:[2,"dateFormat"]},{outClose:"outClose"}),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,n){var t=n.component;e(n,2,0,t.eventData,l["\u0275unv"](n,2,1,l["\u0275nov"](n,3).transform(t.timezone$)),l["\u0275unv"](n,2,2,l["\u0275nov"](n,4).transform(t.dateFormat$)))}),null)}function pt(e){return l["\u0275vid"](2,[(e()(),l["\u0275and"](16777216,null,null,1,null,dt)),l["\u0275did"](1,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,1,0,n.component.viewComponent)}),null)}l["\u0275ccf"]("pp-agent-event-view-container",ct,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-event-view-container",[],null,null,null,pt,ht)),l["\u0275did"](1,245760,null,0,ct,[l.ChangeDetectorRef,N.a,_e.b,rt,F.a,l.ComponentFactoryResolver,l.Injector],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var gt=function(){function e(n){_classCallCheck(this,e),this.analyticsService=n,this.outClickApplicationNameIssue=new l.EventEmitter,this.isHideDetailInfo=!0,this.selectedServiceIndex=0}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var n=this;Object.keys(e).filter((function(n){return e[n].currentValue})).forEach((function(e){switch(e){case"agentData":n.isHideDetailInfo=!0,n.selectedServiceIndex=0}}))}},{key:"toggleDetailInfo",value:function(){return this.analyticsService.trackEvent(S.e.TOGGLE_SERVER_TYPE_DETAIL),this.isHideDetailInfo=!this.isHideDetailInfo}},{key:"onSelectService",value:function(e){this.selectedServiceIndex=e}},{key:"getSelectedServiceLib",value:function(){return this.agentData.serverMetaData.serviceInfos[this.selectedServiceIndex].serviceLibs}},{key:"isServiceInfoEmpty",value:function(){return!this.agentData.serverMetaData||0===this.agentData.serverMetaData.serviceInfos.length}},{key:"isSameApplication",value:function(){return this.agentData.applicationName===this.urlApplicationName}},{key:"formatDate",value:function(e){return de(e).tz(this.timezone).format(this.dateFormat)}},{key:"onClickNotSameBtn",value:function(e){var n=e.currentTarget.getBoundingClientRect(),t=n.left,l=n.top,i=n.width,a=n.height,o=this.agentData,u=o.agentId,s=o.applicationName;this.outClickApplicationNameIssue.emit({data:{agentId:u,applicationName:s},coord:{coordX:t+i/2,coordY:l+a/2}})}}]),e}(),ft=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.l-info-table[_ngcontent-%COMP%]{border:none}.l-info-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .l-info-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#000;border-top:1px solid #e5e8f0}.l-info-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fafafc}.l-argument-list[_ngcontent-%COMP%]{width:100%;height:150px;overflow:auto}.l-server-info-service-list[_ngcontent-%COMP%]{float:left;width:40%;max-height:140px;overflow:auto}.l-server-info-lib-list[_ngcontent-%COMP%]{float:left;width:60%;height:150px;overflow:auto}.l-server-info-list[_ngcontent-%COMP%]{border:1px solid #e7e8ec;position:relative;margin-right:10px}.l-server-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:30px;font-size:12px;color:#999;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;padding:0 10px;cursor:pointer;border-top:1px solid #e7e8ec}.l-server-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top-color:transparent}.l-server-info-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.l-server-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:absolute;right:-250px;top:0;color:#999}.l-server-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:auto;border-top:none}.l-category[_ngcontent-%COMP%]{display:inline-block;padding:2px 5px;font-size:10px;color:#fff;font-weight:600;cursor:pointer}.l-category.blue[_ngcontent-%COMP%]{background-color:var(--primary-color)}.l-sub-table[_ngcontent-%COMP%]{display:table-cell;padding:16px 19px;background:#fff}.l-sub-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .l-sub-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 10px}.l-sub-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] + td[_ngcontent-%COMP%]{border-left:1px solid #e5e8f0}.l-sub-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff}.l-not-same[_ngcontent-%COMP%]{color:#f27d70!important}.l-not-same-button[_ngcontent-%COMP%]{float:right;font-size:14px}"]],data:{}});function mt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","l-not-same-button"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onClickNotSameBtn(t)&&l),l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-comment-alt"]],null,null,null,null,null))],null,null)}function vt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,n){e(n,1,0,n.context.$implicit)}))}function bt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[],[[2,"active",null]],[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onSelectService(e.context.index)&&l),l}),null,null)),(e()(),l["\u0275ted"](1,null,[""," "])),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[["class","fas fa-angle-right"]],null,null,null,null,null))],null,(function(e,n){var t=n.component;e(n,0,0,n.context.index===t.selectedServiceIndex),e(n,1,0,n.context.$implicit.serviceName)}))}function yt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,n){e(n,1,0,n.context.$implicit)}))}function Tt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","l-server-info-service-list"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"ul",[["class","l-server-info-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,bt)),l["\u0275did"](4,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"div",[["class","l-server-info-lib-list"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,yt)),l["\u0275did"](8,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var t=n.component;e(n,4,0,null==t.agentData.serverMetaData?null:t.agentData.serverMetaData.serviceInfos),e(n,8,0,t.getSelectedServiceLib())}),null)}function Ct(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,84,"table",[["class","table l-info-table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"caption",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Information"])),(e()(),l["\u0275eld"](3,0,null,null,4,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"col",[["width","15%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"col",[["width","35%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"col",[["width","15%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"col",[["width","35%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,76,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,10,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Application Name"])),(e()(),l["\u0275eld"](12,0,null,null,3,"td",[],[[2,"l-not-same",null]],null,null,null,null)),(e()(),l["\u0275ted"](13,null,[""," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,mt)),l["\u0275did"](15,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](16,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Agent Version"])),(e()(),l["\u0275eld"](18,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](19,null,["",""])),(e()(),l["\u0275eld"](20,0,null,null,8,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Agent Id"])),(e()(),l["\u0275eld"](23,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](24,null,["",""])),(e()(),l["\u0275eld"](25,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["PID"])),(e()(),l["\u0275eld"](27,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](28,null,["",""])),(e()(),l["\u0275eld"](29,0,null,null,8,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](30,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Hostname"])),(e()(),l["\u0275eld"](32,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](33,null,["",""])),(e()(),l["\u0275eld"](34,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["JVM (GC Type)"])),(e()(),l["\u0275eld"](36,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](37,null,[""," (",")"])),(e()(),l["\u0275eld"](38,0,null,null,8,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](39,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["IP"])),(e()(),l["\u0275eld"](41,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](42,null,["",""])),(e()(),l["\u0275eld"](43,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Start Time"])),(e()(),l["\u0275eld"](45,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](46,null,[""," "])),(e()(),l["\u0275eld"](47,0,null,null,11,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](48,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Service Type"])),(e()(),l["\u0275eld"](50,0,null,null,4,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](51,null,[""," (",") "])),(e()(),l["\u0275eld"](52,0,null,null,2,"span",[["class","l-category blue"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.toggleDetailInfo()&&l),l}),null,null)),(e()(),l["\u0275ted"](-1,null,["Detail "])),(e()(),l["\u0275eld"](54,0,null,null,0,"span",[["class","fas fa-caret-down"]],null,null,null,null,null)),(e()(),l["\u0275eld"](55,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["End Status"])),(e()(),l["\u0275eld"](57,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](58,null,[""," (last checked : ",")"])),(e()(),l["\u0275eld"](59,0,null,null,25,"tr",[],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](60,0,null,null,24,"td",[["class","l-sub-table"],["colspan","4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](61,0,null,null,23,"table",[["class","table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](62,0,null,null,0,"caption",[],null,null,null,null,null)),(e()(),l["\u0275eld"](63,0,null,null,2,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275eld"](64,0,null,null,0,"col",[["width","20%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](65,0,null,null,0,"col",[["width",""]],null,null,null,null,null)),(e()(),l["\u0275eld"](66,0,null,null,18,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275eld"](67,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](68,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Server Info"])),(e()(),l["\u0275eld"](70,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](71,null,["",""])),(e()(),l["\u0275eld"](72,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](73,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["JVM Arguments"])),(e()(),l["\u0275eld"](75,0,null,null,3,"td",[],null,null,null,null,null)),(e()(),l["\u0275eld"](76,0,null,null,2,"div",[["class","l-argument-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,vt)),l["\u0275did"](78,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](79,0,null,null,5,"tr",[["class","l-server-info-list-local"]],null,null,null,null,null)),(e()(),l["\u0275eld"](80,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Services"])),(e()(),l["\u0275eld"](82,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Tt)),l["\u0275did"](84,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){var t=n.component;e(n,15,0,!t.isSameApplication()),e(n,78,0,null==t.agentData.serverMetaData?null:t.agentData.serverMetaData.vmArgs),e(n,84,0,!t.isServiceInfoEmpty())}),(function(e,n){var t=n.component;e(n,12,0,!t.isSameApplication()),e(n,13,0,t.agentData.applicationName),e(n,19,0,t.agentData.agentVersion),e(n,24,0,t.agentData.agentId),e(n,28,0,t.agentData.pid),e(n,33,0,t.agentData.hostName),e(n,37,0,null==t.agentData.jvmInfo?null:t.agentData.jvmInfo.jvmVersion,null==t.agentData.jvmInfo?null:t.agentData.jvmInfo.gcTypeName),e(n,42,0,t.agentData.ip),e(n,46,0,t.formatDate(t.agentData.startTimestamp)),e(n,51,0,t.agentData.serviceType,null==t.agentData.serverMetaData?null:t.agentData.serverMetaData.serverInfo),e(n,58,0,null==t.agentData.status?null:null==t.agentData.status.state?null:t.agentData.status.state.desc,t.formatDate(null==t.agentData.status?null:t.agentData.status.eventTimestamp)),e(n,59,0,t.isHideDetailInfo),e(n,71,0,t.isServiceInfoEmpty()?"":t.agentData.serverMetaData.serverInfo)}))}l["\u0275ccf"]("pp-agent-info",gt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-info",[],null,null,null,Ct,ft)),l["\u0275did"](1,638976,null,0,gt,[L.a],null,null)],(function(e,n){e(n,1,0)}),null)}),{urlApplicationName:"urlApplicationName",agentData:"agentData",timezone:"timezone",dateFormat:"dateFormat"},{outClickApplicationNameIssue:"outClickApplicationNameIssue"},[]);var St=function(){function e(n){_classCallCheck(this,e),this.http=n,this.requestURL="getAgentInfo.pinpoint"}return _createClass(e,[{key:"getData",value:function(e,n){return this.http.get(this.requestURL,this.makeRequestOptionsArgs(e,n)).pipe(Object(ke.a)(3))}},{key:"makeRequestOptionsArgs",value:function(e,n){return{params:(new et.h).set("agentId",e).set("timestamp",n+"")}}}]),e}(),kt=function(){function e(n,t,l,i,a,o,u){_classCallCheck(this,e),this.newUrlStateNotificationService=n,this.storeHelperService=t,this.agentInfoDataService=l,this.dynamicPopupService=i,this.componentFactoryResolver=a,this.injector=o,this.inspectorPageService=u,this.unsubscribe=new b.b,this.showLoading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.urlApplicationName$=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(T.a)((function(e){return e.getPathValue(k.b.APPLICATION).getApplicationName()}))),this.connectStore(),this.inspectorPageService.sourceForAgentInfo$.pipe(Object(y.a)(this.unsubscribe),Object(le.a)((function(){return e.showLoading=!0})),Object(ne.a)((function(n){var t=n.agentId,l=n.selectedTime;return e.lastRequestParam=[t,l],e.agentInfoDataService.getData(t,l)})),Object(z.a)((function(e){return!(!e||!e.applicationName)}))).subscribe((function(n){e.agentData=n,e.dataRequestSuccess=!0,e.completed()}),(function(n){e.dataRequestSuccess=!1,e.completed()}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"connectStore",value:function(){this.timezone$=this.storeHelperService.getTimezone(this.unsubscribe),this.dateFormat$=this.storeHelperService.getDateFormat(this.unsubscribe,1)}},{key:"completed",value:function(){this.showLoading=!1}},{key:"onRequestAgain",value:function(){var e=this,n=_slicedToArray(this.lastRequestParam,2),t=n[0],l=n[1];this.showLoading=!0,this.agentInfoDataService.getData(t,l).subscribe((function(n){e.agentData=n,e.dataRequestSuccess=!0,e.completed()}),(function(n){e.dataRequestSuccess=!1,e.completed()}))}},{key:"onClickApplicationNameIssue",value:function(e){var n=e.data,t=e.coord;this.dynamicPopupService.openPopup({data:n,coord:t,component:O},{resolver:this.componentFactoryResolver,injector:this.injector})}}]),e}(),Ot=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{width:calc(100% - 20px);display:block;margin:20px 10px 10px;border:1px solid #000;position:relative}.l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background:#f6f8fb}.l-reload-btn[_ngcontent-%COMP%]{color:#f06c6b;float:right}"]],data:{}});function Et(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","l-reload-btn"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onRequestAgain()&&l),l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-sync fa-lg"]],null,null,null,null,null))],null,null)}function Pt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"pp-agent-info",[],null,[[null,"outClickApplicationNameIssue"]],(function(e,n,t){var l=!0,i=e.component;return"outClickApplicationNameIssue"===n&&(l=!1!==i.onClickApplicationNameIssue(t)&&l),l}),Ct,ft)),l["\u0275did"](2,638976,null,0,gt,[L.a],{urlApplicationName:[0,"urlApplicationName"],agentData:[1,"agentData"],timezone:[2,"timezone"],dateFormat:[3,"dateFormat"]},{outClickApplicationNameIssue:"outClickApplicationNameIssue"}),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,n){var t=n.component;e(n,2,0,l["\u0275unv"](n,2,0,l["\u0275nov"](n,3).transform(t.urlApplicationName$)),t.agentData,l["\u0275unv"](n,2,2,l["\u0275nov"](n,4).transform(t.timezone$)),l["\u0275unv"](n,2,3,l["\u0275nov"](n,5).transform(t.dateFormat$)))}),null)}function _t(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Information "])),(e()(),l["\u0275and"](16777216,null,null,1,null,Et)),l["\u0275did"](3,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Pt)),l["\u0275did"](5,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,1,"pp-loading",[],null,null,null,Sn.b,Sn.a)),l["\u0275did"](7,114688,null,0,kn.a,[l.ElementRef,l.Renderer2],{showLoading:[0,"showLoading"],zIndex:[1,"zIndex"]},null)],(function(e,n){var t=n.component;e(n,3,0,!1===t.dataRequestSuccess),e(n,5,0,t.dataRequestSuccess),e(n,7,0,t.showLoading,10)}),null)}l["\u0275ccf"]("pp-agent-info-container",kt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-info-container",[],null,null,null,_t,Ot)),l["\u0275did"](1,245760,null,0,kt,[E.a,N.a,St,F.a,l.ComponentFactoryResolver,l.Injector,Se],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var It=function(){function e(){_classCallCheck(this,e),this.outCheckedIdChange=new l.EventEmitter,this.showSourceSelectModal=!1,this.checkedIdSet=new Set}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var n=this;Object.keys(e).map((function(e){switch(e){case"data":n.initCheckedIdSet()}}))}},{key:"onSourceSelectClick",value:function(){this.showSourceSelectModal=!this.showSourceSelectModal}},{key:"onCheckAllBtnClick",value:function(){this.initCheckedIdSet(),this.outCheckedIdChange.emit(this.checkedIdSet)}},{key:"onSourceCheckboxChange",value:function(e){this.toggleCheckedId(e)}},{key:"initCheckedIdSet",value:function(){var e=this;this.data.map((function(n){var t=n.id;return e.checkedIdSet.add(t)}))}},{key:"toggleCheckedId",value:function(e){this.checkedIdSet.has(e)?this.checkedIdSet.delete(e):this.checkedIdSet.add(e),this.outCheckedIdChange.emit(this.checkedIdSet)}}]),e}(),Rt=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.l-source-select-button[_ngcontent-%COMP%]{color:#a8acb5;font-size:15px}.l-source-select-modal[_ngcontent-%COMP%]{position:absolute;top:34px;right:0;border-radius:3px;border:1px solid transparent;box-shadow:0 6px 12px rgba(0,0,0,.175);width:100%;z-index:1000;padding:15px;background-color:#fff;font-weight:400}.l-source-select-modal[_ngcontent-%COMP%]::after{content:'';width:0;height:0;position:absolute;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent;bottom:100%;right:44px}.l-select-all-button[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:3px;padding:5px}.l-source-data-list[_ngcontent-%COMP%]{margin-top:10px;border-top:1px solid #ddd;padding:10px 0}.l-source-data-list-item[_ngcontent-%COMP%]{display:inline-block}.l-list-item-label[_ngcontent-%COMP%]{margin-right:20px}.l-list-item-input[_ngcontent-%COMP%]{margin-right:5px}"]],data:{}});function xt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[["class","l-source-data-list-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"label",[["class","l-list-item-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"input",[["class","l-list-item-input"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,t){var l=!0,i=e.component;return"change"===n&&(l=!1!==i.onSourceCheckboxChange(e.context.$implicit.id)&&l),l}),null,null)),(e()(),l["\u0275ted"](3,null,[" "," "]))],null,(function(e,n){e(n,2,0,n.component.checkedIdSet.has(n.context.$implicit.id)),e(n,3,0,n.context.$implicit.databaseName?n.context.$implicit.databaseName:n.context.$implicit.id)}))}function wt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","l-source-select-button"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onSourceSelectClick()&&l),l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-filter"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,5,"div",[["class","l-source-select-modal"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"button",[["class","button l-select-all-button"],["type","button"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onCheckAllBtnClick()&&l),l}),null,null)),(e()(),l["\u0275ted"](-1,null,["Check All"])),(e()(),l["\u0275eld"](5,0,null,null,2,"ul",[["class","l-source-data-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,xt)),l["\u0275did"](7,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,7,0,n.component.data)}),(function(e,n){e(n,2,0,!n.component.showSourceSelectModal)}))}l["\u0275ccf"]("pp-agent-data-source-chart-select-source",It,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-data-source-chart-select-source",[],null,null,null,wt,Rt)),l["\u0275did"](1,638976,null,0,It,[],null,null)],(function(e,n){e(n,1,0)}),null)}),{data:"data"},{outCheckedIdChange:"outCheckedIdChange"},[]);var Mt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),At=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%;background-color:#fff;font-size:12px;padding:0 10px 10px}.l-source-info-table[_ngcontent-%COMP%]{border:1px solid #ddd;width:100%}.l-source-info-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;font-size:13px;text-align:left;background-color:#f6f8fb}.l-source-info-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:4px;text-align:center;word-break:break-all}.l-source-info-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:120px}"]],data:{}});function Dt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,40,"table",[["class","l-source-info-table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"thead",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"th",[["colspan","2"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Data Source Info"])),(e()(),l["\u0275eld"](5,0,null,null,35,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Active Avg"])),(e()(),l["\u0275eld"](9,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](10,null,["",""])),(e()(),l["\u0275eld"](11,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Active Max"])),(e()(),l["\u0275eld"](14,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](15,null,["",""])),(e()(),l["\u0275eld"](16,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Total Max"])),(e()(),l["\u0275eld"](19,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](20,null,["",""])),(e()(),l["\u0275eld"](21,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["ID"])),(e()(),l["\u0275eld"](24,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](25,null,["",""])),(e()(),l["\u0275eld"](26,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Type"])),(e()(),l["\u0275eld"](29,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](30,null,["",""])),(e()(),l["\u0275eld"](31,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Database Name"])),(e()(),l["\u0275eld"](34,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](35,null,["",""])),(e()(),l["\u0275eld"](36,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](37,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Jdbc URL"])),(e()(),l["\u0275eld"](39,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](40,null,["",""]))],null,(function(e,n){var t=n.component;e(n,10,0,t.infoTableObj.activeAvg),e(n,15,0,t.infoTableObj.activeMax),e(n,20,0,t.infoTableObj.totalMax),e(n,25,0,t.infoTableObj.id),e(n,30,0,t.infoTableObj.serviceType),e(n,35,0,t.infoTableObj.databaseName),e(n,40,0,t.infoTableObj.jdbcUrl)}))}l["\u0275ccf"]("pp-agent-data-source-chart-infotable",Mt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-data-source-chart-infotable",[],null,null,null,Dt,At)),l["\u0275did"](1,114688,null,0,Mt,[],null,null)],(function(e,n){e(n,1,0)}),null)}),{infoTableObj:"infoTableObj"},{},[]);var Nt=t("7m67"),Lt=function(){function e(n,t,l,i,a,o,u,s,r){_classCallCheck(this,e),this.storeHelperService=n,this.inspectorChartDataService=t,this.translateService=l,this.analyticsService=i,this.dynamicPopupService=a,this.componentFactoryResolver=o,this.injector=u,this.inspectorPageService=s,this.messageQueueService=r,this.onoverDataHolder=[],this.unsubscribe=new b.b,this.defaultYMax=4,this.chartVisibility={},this._activeLayer=Cn.LOADING}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.initI18nText(),this.initTimezoneAndDateFormat(),this.initInfoTableObj(),this.initChartData(),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.INSPECTOR_CHART_MOUSE_MOVE).subscribe((function(n){e.yRatio=n}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"initI18nText",value:function(){var e=this;Object(Rn.a)(this.translateService.get("COMMON.FAILED_TO_FETCH_DATA"),this.translateService.get("COMMON.NO_DATA")).subscribe((function(n){var t=_slicedToArray(n,2),l=t[0],i=t[1];e.dataFetchFailedText=l,e.dataEmptyText=i}))}},{key:"initTimezoneAndDateFormat",value:function(){var e=this;Object(K.a)(this.storeHelperService.getTimezone(this.unsubscribe),this.storeHelperService.getDateFormatArray(this.unsubscribe,4,5)).subscribe((function(n){var t=_slicedToArray(n,2),l=t[0],i=t[1];e.timezone=l,e.dateFormat=i}))}},{key:"onRendered",value:function(){this.activeLayer=Cn.CHART}},{key:"onMouseMove",value:function(e){var n=e.clientY,t=e.target.getBoundingClientRect(),l=t.height,i=(n-t.top)/l;this.messageQueueService.sendMessage({to:S.b.INSPECTOR_CHART_MOUSE_MOVE,param:i})}},{key:"initInfoTableObj",value:function(){this.infoTableObj={activeAvg:"-",activeMax:"-",totalMax:"-",id:"-",serviceType:"-",databaseName:"-",jdbcUrl:"-"}}},{key:"updateInfoTable",value:function(e){var n=e.id,t=e.index;this.infoTableObj=this.chartData.filter((function(e){return e.id===Number(n)})).reduce((function(e,n){var l=n.id,i=n.jdbcUrl,a=n.serviceType,o=n.databaseName,u=n.charts;return{id:l,jdbcUrl:i,serviceType:a,databaseName:o,activeAvg:u.y.ACTIVE_CONNECTION_SIZE.map((function(e){return e[2]}))[t],activeMax:u.y.ACTIVE_CONNECTION_SIZE.map((function(e){return e[1]}))[t],totalMax:u.y.MAX_CONNECTION_SIZE.map((function(e){return e[1]}))[t]}}),{})}},{key:"initChartData",value:function(){var e=this;this.inspectorPageService.sourceForChart$.pipe(Object(y.a)(this.unsubscribe),Object(le.a)((function(){return e.activeLayer=Cn.LOADING})),Object(le.a)((function(n){var t=n.range;return e.previousRange=t})),Object(ne.a)((function(n){var t=n.range;return e.inspectorChartDataService.getData(t).pipe(Object(xn.a)((function(){return Object(ee.a)(null)})))}))).subscribe((function(n){return e.chartDataResCallbackFn(n)}))}},{key:"setChartVisibility",value:function(e){this.chartVisibility={"show-chart":e,"shady-chart":!e&&void 0!==this.chartConfig}}},{key:"isActiveLayer",value:function(e){return this.activeLayer===e}},{key:"onRetry",value:function(){var e=this;this.activeLayer=Cn.LOADING,this.inspectorChartDataService.getData(this.previousRange).pipe(Object(xn.a)((function(){return Object(ee.a)(null)}))).subscribe((function(n){return e.chartDataResCallbackFn(n)}))}},{key:"chartDataResCallbackFn",value:function(e){!e||Object(Ee.c)(e,"exception")?(this.activeLayer=Cn.RETRY,this.setRetryMessage(e)):(this.chartData=e,this.sourceListForFilter=e.map((function(e){return{databaseName:e.databaseName,id:e.id}})),this.setChartConfig(this.makeChartData(e)))}},{key:"setChartConfig",value:function(e){this.chartConfig={dataConfig:this.makeDataOption(e),elseConfig:this.makeElseOption(e)},this.isDataEmpty=this.isEmpty(e)}},{key:"setRetryMessage",value:function(e){this.retryMessage=e?e.exception.message:this.dataFetchFailedText}},{key:"isEmpty",value:function(e){return 0===e.length||e.slice(1).every((function(e){return 1===e.length}))}},{key:"onCheckedIdChange",value:function(e){this.activeLayer=Cn.LOADING,this.setChartConfig(this.makeChartData(this.chartData.filter((function(n){var t=n.id;return e.has(t)}))))}},{key:"makeChartData",value:function(e){return 0===e.length?[]:[["x"].concat(_toConsumableArray(Object(Hn.c)(e[0].charts.x)))].concat(_toConsumableArray(e.map((function(e){return[e.id.toString()].concat(_toConsumableArray(Object(Hn.d)(e.charts.y.ACTIVE_CONNECTION_SIZE,2)))}))))}},{key:"makeDataOption",value:function(e){var n=["#850901","#969755","#421416","#c8814b","#aa8735","#cd7af4","#f6546a","#1c1a1f","#127999","#b7ebd9","#f6546a","#bea87f","#d1b4b0","#e0d4ba","#0795d9","#43aa83","#09d05b","#c26e67","#ed7575","#96686a"],t=e.slice(1).length,l=this;return{x:"x",columns:e,type:"spline",colors:e.slice(1).reduce((function(e,t,l){var i=_slicedToArray(t,1)[0];return Object.assign({},e,_defineProperty({},i,n[l]))}),{}),onover:function(e){l.onoverDataHolder.push(e);var n=this.axis.max().y;if(l.onoverDataHolder.length===t&&l.yRatio){var i=n-l.yRatio*n,a=l.onoverDataHolder.map((function(e){var n=e.value;return Math.abs(n-i)})),o=a.indexOf(Math.min.apply(Math,_toConsumableArray(a)));l.updateInfoTable(l.onoverDataHolder[o]),l.onoverDataHolder=[]}},empty:{label:{text:this.dataEmptyText}}}}},{key:"makeElseOption",value:function(e){var n,t=this;return{padding:{top:20,bottom:35,right:45},axis:{x:{type:"timeseries",tick:{count:4,format:function(e){return de(e).tz(t.timezone).format(t.dateFormat[0])+"\n"+de(e).tz(t.timezone).format(t.dateFormat[1])}},padding:{left:0,right:0}},y:{label:{text:"Connection (count)",position:"outer-middle"},tick:{count:5},padding:{top:0,bottom:0},min:0,max:(n=Object(Hn.a)(e,1),0===n?t.defaultYMax:n),default:[0,this.defaultYMax]}},point:{r:0,focus:{expand:{r:3}}},tooltip:{linked:!0,contents:function(e,n){return'<table class="bb-tooltip"><th>'.concat(n(e[0].x),"</th></table>")}},transition:{duration:0},legend:{show:!1},zoom:{enabled:{type:"drag"}}}}},{key:"onShowHelp",value:function(e){this.analyticsService.trackEvent(S.e.TOGGLE_HELP_VIEWER,A.a.AGENT_DATA_SOURCE);var n=e.target.getBoundingClientRect(),t=n.left,l=n.top,i=n.width,a=n.height;this.dynamicPopupService.openPopup({data:A.a.AGENT_DATA_SOURCE,coord:{coordX:t+i/2,coordY:l+a/2},component:A.b},{resolver:this.componentFactoryResolver,injector:this.injector})}},{key:"activeLayer",set:function(e){this._activeLayer=e,this.setChartVisibility(this._activeLayer===Cn.CHART)},get:function(){return this._activeLayer}}]),e}(),Ft=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;position:relative}.l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background:#f6f8fb}.l-title-group[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{margin-left:7px;font-size:18px;color:#a8acb5;cursor:pointer}.l-icon-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.l-chart-area-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}"]],data:{}});function jt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-agent-data-source-chart-select-source",[],null,[[null,"outCheckedIdChange"]],(function(e,n,t){var l=!0,i=e.component;return"outCheckedIdChange"===n&&(l=!1!==i.onCheckedIdChange(t)&&l),l}),wt,Rt)),l["\u0275did"](2,638976,null,0,It,[],{data:[0,"data"]},{outCheckedIdChange:"outCheckedIdChange"})],(function(e,n){e(n,2,0,n.component.sourceListForFilter)}),null)}function Ut(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-agent-data-source-chart-infotable",[],null,null,null,Dt,At)),l["\u0275did"](2,114688,null,0,Mt,[],{infoTableObj:[0,"infoTableObj"]},null)],(function(e,n){e(n,2,0,n.component.infoTableObj)}),null)}function zt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"h4",[["class","l-title-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Data Source"])),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","l-icon-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,jt)),l["\u0275did"](5,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,n,t){var l=!0,i=e.component;return"click"===n&&(l=!1!==i.onShowHelp(t)&&l),l}),null,null)),(e()(),l["\u0275eld"](7,0,null,null,8,"div",[["class","l-chart-area-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"pp-loading",[],null,null,null,Sn.b,Sn.a)),l["\u0275did"](9,114688,null,0,kn.a,[l.ElementRef,l.Renderer2],{showLoading:[0,"showLoading"],zIndex:[1,"zIndex"]},null),(e()(),l["\u0275eld"](10,0,null,null,1,"pp-retry",[],null,[[null,"outRetry"]],(function(e,n,t){var l=!0,i=e.component;return"outRetry"===n&&(l=!1!==i.onRetry()&&l),l}),On.b,On.a)),l["\u0275did"](11,114688,null,0,En.a,[],{showRetry:[0,"showRetry"],message:[1,"message"]},{outRetry:"outRetry"}),(e()(),l["\u0275eld"](12,0,null,null,3,"pp-inspector-chart",[],null,[[null,"outRendered"],[null,"mousemove"]],(function(e,n,t){var l=!0,i=e.component;return"outRendered"===n&&(l=!1!==i.onRendered()&&l),"mousemove"===n&&(l=!1!==i.onMouseMove(t)&&l),l}),Pn.b,Pn.a)),l["\u0275prd"](512,null,h["\u0275NgClassImpl"],h["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](14,278528,null,0,h.NgClass,[h["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["\u0275did"](15,770048,null,0,_n.a,[_e.b,In.a,E.a,l.ElementRef,l.Renderer2],{chartConfig:[0,"chartConfig"]},{outRendered:"outRendered"}),(e()(),l["\u0275and"](16777216,null,null,1,null,Ut)),l["\u0275did"](17,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){var t=n.component;e(n,5,0,t.chartConfig),e(n,9,0,t.isActiveLayer("loading"),10),e(n,11,0,t.isActiveLayer("retry"),t.retryMessage),e(n,14,0,t.chartVisibility),e(n,15,0,t.chartConfig),e(n,17,0,t.chartConfig&&!t.isDataEmpty)}),null)}l["\u0275ccf"]("pp-agent-data-source-chart-container",Lt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-data-source-chart-container",[],null,null,null,zt,Ft)),l["\u0275did"](1,245760,null,0,Lt,[N.a,Nt.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]);var Gt=function(){function e(n,t,l,i,a){_classCallCheck(this,e),this.webAppSettingDataService=n,this.messageQueueService=t,this.newUrlStateNotificationService=l,this.translateService=i,this.renderer=a,this.hostClass="l-agent-inspector-contents",this.unsubscribe=new b.b,this.chartType=Mn.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.coverRangeElements$=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(T.a)((function(e){return e.isRealTimeMode()}))),this.guideMessage$=this.translateService.get("INSPECTOR.CHART_INTERACTION_GUIDE_MESSAGE"),Object(Xn.a)(Object(ee.a)(this.webAppSettingDataService.getChartLayoutOption()),this.messageQueueService.receiveMessage(this.unsubscribe,S.b.INSPECTOR_CHART_SET_LAYOUT)).subscribe((function(n){e.renderer.setStyle(e.chartGroupWrapper.nativeElement,"grid-template-columns",e.getGridLayout(n))}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"getGridLayout",value:function(e){return"repeat(".concat(e,", 1fr)")}}]),e}(),Ht=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column nowrap;width:100%;height:100%}.l-date-range[_ngcontent-%COMP%]{background-color:#fff;height:150px;position:relative}.l-cover[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#ccc;z-index:5;position:absolute;left:0;top:0;opacity:.5}.l-main-contents[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto}.l-chart-option-area[_ngcontent-%COMP%]{width:calc(100% - 20px);display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;margin:5px 10px 0 15px}.l-guide-text[_ngcontent-%COMP%]{font-family:'Open Sans';color:#333;font-size:14px;font-style:italic}.l-chart-group-wrap[_ngcontent-%COMP%]{display:grid;width:100%;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;row-gap:10px;padding:10px;min-height:0;min-width:0}.l-chart-wrapper[_ngcontent-%COMP%]{overflow:hidden;min-width:0}"]],data:{}});function Vt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","l-cover"]],null,null,null,null,null))],null,null)}function $t(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{chartGroupWrapper:0}),(e()(),l["\u0275eld"](1,0,null,null,7,"article",[["class","l-date-range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"pp-timeline-command-group-container",[],null,null,null,sn,un)),l["\u0275did"](3,245760,null,0,on,[N.a],null,null),(e()(),l["\u0275eld"](4,0,null,null,1,"pp-agent-inspector-timeline-container",[],null,null,null,it,lt)),l["\u0275did"](5,245760,null,0,tt,[N.a,E.a,V.a,nt,_e.b,F.a,L.a,l.ComponentFactoryResolver,l.Injector,Se],null,null),(e()(),l["\u0275and"](16777216,null,null,2,null,Vt)),l["\u0275did"](7,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](9,0,null,null,1,"pp-agent-event-view-container",[],null,null,null,pt,ht)),l["\u0275did"](10,245760,null,0,ct,[l.ChangeDetectorRef,N.a,_e.b,rt,F.a,l.ComponentFactoryResolver,l.Injector],null,null),(e()(),l["\u0275eld"](11,0,null,null,45,"div",[["class","l-main-contents"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"pp-agent-info-container",[],null,null,null,_t,Ot)),l["\u0275did"](13,245760,null,0,kt,[E.a,N.a,St,F.a,l.ComponentFactoryResolver,l.Injector,Se],null,null),(e()(),l["\u0275eld"](14,0,null,null,5,"div",[["class","l-chart-option-area"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,2,"p",[["class","l-guide-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](16,null,["",""])),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](18,0,null,null,1,"pp-chart-layout-option-container",[],null,null,null,Tn,yn)),l["\u0275did"](19,114688,null,0,bn,[H.a,_e.b,L.a],null,null),(e()(),l["\u0275eld"](20,0,[[1,0],["chartGroupWrapper",1]],null,36,"div",[["class","l-chart-group-wrap"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](23,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](24,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](26,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](27,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](28,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](29,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](30,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](32,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](33,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](34,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](35,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](36,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](37,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](38,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](39,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](40,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](41,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](42,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](43,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](44,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](45,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](46,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](47,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](48,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](49,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](50,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](51,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](52,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,Ln,Dn)),l["\u0275did"](53,245760,null,0,An,[N.a,wn.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](54,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](55,0,null,null,1,"pp-agent-data-source-chart-container",[],null,null,null,zt,Ft)),l["\u0275did"](56,245760,null,0,Lt,[N.a,Nt.a,P.i,L.a,F.a,l.ComponentFactoryResolver,l.Injector,Se,_e.b],null,null)],(function(e,n){var t=n.component;e(n,3,0),e(n,5,0),e(n,7,0,l["\u0275unv"](n,7,0,l["\u0275nov"](n,8).transform(t.coverRangeElements$))),e(n,10,0),e(n,13,0),e(n,19,0),e(n,23,0,t.chartType.AGENT_JVM_HEAP),e(n,26,0,t.chartType.AGENT_JVM_NON_HEAP),e(n,29,0,t.chartType.AGENT_CPU),e(n,32,0,t.chartType.AGENT_TPS),e(n,35,0,t.chartType.AGENT_ACTIVE_THREAD),e(n,38,0,t.chartType.AGENT_RESPONSE_TIME),e(n,41,0,t.chartType.AGENT_OPEN_FILE_DESCRIPTOR),e(n,44,0,t.chartType.AGENT_DIRECT_BUFFER_COUNT),e(n,47,0,t.chartType.AGENT_DIRECT_BUFFER_MEMORY),e(n,50,0,t.chartType.AGENT_MAPPED_BUFFER_COUNT),e(n,53,0,t.chartType.AGENT_MAPPED_BUFFER_MEMORY),e(n,56,0)}),(function(e,n){var t=n.component;e(n,16,0,l["\u0275unv"](n,16,0,l["\u0275nov"](n,17).transform(t.guideMessage$)))}))}var Bt=l["\u0275ccf"]("pp-agent-inspector-contents-container",Gt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-inspector-contents-container",[],[[8,"className",0]],null,null,$t,Ht)),l["\u0275did"](1,245760,null,0,Gt,[H.a,_e.b,E.a,P.i,l.Renderer2],null,null)],(function(e,n){e(n,1,0)}),(function(e,n){e(n,0,0,l["\u0275nov"](n,1).hostClass)}))}),{},{},[]),Zt=t("yIm2"),Xt=t("o7q+"),Wt=t("s7LF"),Yt=t("+TFa"),qt=t("7006"),Qt=t("22Na"),Kt=t("IbkX"),Jt=t("M0ag"),el=t("uuw7"),nl=t("IP0z"),tl=t("/HVE"),ll=t("hOhj"),il=t("FTGN"),al=t("jsEk"),ol=t("3Dce"),ul=t("MyRj"),sl=t("lXRe"),rl=function e(){_classCallCheck(this,e)},cl=t("bGL8"),hl=function e(){_classCallCheck(this,e)},dl=function e(){_classCallCheck(this,e)},pl=function e(){_classCallCheck(this,e)},gl=function e(){_classCallCheck(this,e)},fl=t("5gQU"),ml=t("daz4"),vl=function e(){_classCallCheck(this,e)},bl=function e(){_classCallCheck(this,e)},yl=function e(){_classCallCheck(this,e)},Tl=function e(){_classCallCheck(this,e)},Cl=function e(){_classCallCheck(this,e)},Sl=function e(){_classCallCheck(this,e)},kl=function e(){_classCallCheck(this,e)},Ol=t("ezOy"),El=t("iSkw"),Pl={showRealTimeButton:!0,enableRealTimeMode:!0},_l={path:k.a.INSPECTOR},Il={path:k.a.INSPECTOR},Rl={showRealTimeButton:!0,enableRealTimeMode:!1};k.a.REAL_TIME,k.a.INSPECTOR,k.b.APPLICATION,S.c,k.b.AGENT_ID,S.c,k.b.APPLICATION,Ol.a,k.b.PERIOD,Ol.a,k.b.END_TIME,k.b.AGENT_ID,El.a;var xl=t("zMA2"),wl=t("/48X");t.d(n,"InspectorPageModuleNgFactory",(function(){return Ml}));var Ml=l["\u0275cmf"](i,[],(function(e){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[a.a,o.a,u.a,s.a,r.a,c.a,x,Ye,Jn,Bt,Zt.a,Xt.a]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,h.NgLocalization,h.NgLocaleLocalization,[l.LOCALE_ID,[2,h["\u0275angular_packages_common_common_a"]]]),l["\u0275mpd"](4608,Wt["\u0275angular_packages_forms_forms_o"],Wt["\u0275angular_packages_forms_forms_o"],[]),l["\u0275mpd"](4608,Yt.a,Yt.a,[]),l["\u0275mpd"](4608,qt.NguiDatetime,qt.NguiDatetime,[]),l["\u0275mpd"](4608,Oe,Oe,[et.c]),l["\u0275mpd"](4608,rt,rt,[et.c,E.a]),l["\u0275mpd"](4608,nt,nt,[et.c]),l["\u0275mpd"](4608,Nt.a,Nt.a,[et.c,E.a]),l["\u0275mpd"](4608,Gn.a,Gn.a,[et.c,E.a]),l["\u0275mpd"](4608,wn.a,wn.a,[et.c,E.a]),l["\u0275mpd"](4608,St,St,[et.c]),l["\u0275mpd"](1073742336,h.CommonModule,h.CommonModule,[]),l["\u0275mpd"](1073742336,$e.q,$e.q,[[2,$e.v],[2,$e.m]]),l["\u0275mpd"](1073742336,Qt.ClickOutsideModule,Qt.ClickOutsideModule,[]),l["\u0275mpd"](1073742336,Wt["\u0275angular_packages_forms_forms_d"],Wt["\u0275angular_packages_forms_forms_d"],[]),l["\u0275mpd"](1073742336,Wt.FormsModule,Wt.FormsModule,[]),l["\u0275mpd"](1073742336,Kt.b,Kt.b,[]),l["\u0275mpd"](1073742336,Jt.a,Jt.a,[]),l["\u0275mpd"](1073742336,el.a,el.a,[]),l["\u0275mpd"](1073742336,nl.a,nl.a,[]),l["\u0275mpd"](1073742336,tl.b,tl.b,[]),l["\u0275mpd"](1073742336,ll.g,ll.g,[]),l["\u0275mpd"](1073742336,il.a,il.a,[]),l["\u0275mpd"](1073742336,al.NguiDatetimePickerModule,al.NguiDatetimePickerModule,[]),l["\u0275mpd"](1073742336,ol.a,ol.a,[]),l["\u0275mpd"](1073742336,ul.a,ul.a,[]),l["\u0275mpd"](1073742336,sl.a,sl.a,[]),l["\u0275mpd"](1073742336,rl,rl,[]),l["\u0275mpd"](1073742336,cl.a,cl.a,[]),l["\u0275mpd"](1073742336,hl,hl,[]),l["\u0275mpd"](1073742336,dl,dl,[]),l["\u0275mpd"](1073742336,pl,pl,[]),l["\u0275mpd"](1073742336,gl,gl,[]),l["\u0275mpd"](1073742336,fl.a,fl.a,[]),l["\u0275mpd"](1073742336,ml.a,ml.a,[]),l["\u0275mpd"](1073742336,vl,vl,[]),l["\u0275mpd"](1073742336,bl,bl,[]),l["\u0275mpd"](1073742336,yl,yl,[]),l["\u0275mpd"](1073742336,Tl,Tl,[]),l["\u0275mpd"](1073742336,Cl,Cl,[]),l["\u0275mpd"](1073742336,Sl,Sl,[]),l["\u0275mpd"](1073742336,kl,kl,[]),l["\u0275mpd"](1073742336,i,i,[]),l["\u0275mpd"](1024,$e.k,(function(){return[[{path:"",component:Be,children:[{path:"realtime",children:[{path:"",pathMatch:"full",redirectTo:"/inspector"},{path:":application",data:Pl,children:[{path:"",pathMatch:"full",resolve:{serverTime:xl.a},component:Wn},{path:":agentId",resolve:{serverTime:xl.a},component:Gt}]}]},{path:":application",children:[{path:"",pathMatch:"full",data:_l,component:Ol.a},{path:":period",children:[{path:"",pathMatch:"full",data:Il,component:Ol.a},{path:":endTime",data:Rl,children:[{path:"",pathMatch:"full",component:Wn},{path:":agentId",component:Gt}]}]}]},{path:"",pathMatch:"full",component:wl.a}]}]]}),[])])}))},huS9:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var l=t("8Y7J"),i=t("XNiG"),a=t("1G5W"),o=t("Kj3r"),u=t("/uUt"),s=t("pLZG"),r=function(){function e(n){_classCallCheck(this,e),this.elementRef=n,this.searchMinLength=0,this.searchMaxLength=Number.MAX_SAFE_INTEGER,this.debounceTime=100,this.outCancel=new l.EventEmitter,this.outSearch=new l.EventEmitter,this.outArrowKey=new l.EventEmitter,this.unsubscribe=new i.b,this.userInput=new i.b}return _createClass(e,[{key:"onKeyDown",value:function(e){var n=e.keyCode;this.isArrowKey(n)&&this.outArrowKey.emit(n)}},{key:"onKeyUp",value:function(e){var n=e.keyCode,t=e.srcElement,l=t.value.trim();if(!this.isArrowKey(n))return this.isESC(n)?(t.value="",void this.outCancel.next()):void(this.useEnter?this.isEnter(n)&&this.isValidLength(l)&&this.outSearch.next(l):this.userInput.next(l))}},{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){e.useEnter&&(this.useEnter?this.unsubscribe.next():this.setObservable())}},{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}},{key:"setObservable",value:function(){var e=this;this.userInput.pipe(Object(a.a)(this.unsubscribe),Object(o.a)(this.debounceTime),Object(u.a)(),Object(s.a)((function(n){return e.isValidLength(n)}))).subscribe((function(n){e.outSearch.next(n)}))}},{key:"isValidLength",value:function(e){return 0===e.length||e.length>=this.searchMinLength&&e.length<this.searchMaxLength}},{key:"isESC",value:function(e){return 27===e}},{key:"isEnter",value:function(e){return 13===e}},{key:"isArrowKey",value:function(e){return e>=37&&e<=40}},{key:"clear",value:function(){this.elementRef.nativeElement.value=""}},{key:"setFocus",value:function(){this.elementRef.nativeElement.focus()}}]),e}()}}]);