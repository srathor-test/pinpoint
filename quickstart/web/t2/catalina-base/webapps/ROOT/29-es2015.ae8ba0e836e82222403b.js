(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"24Za":function(e,t,n){"use strict";n.r(t);var l=n("8Y7J");class i{}var a=n("pMnS"),o=n("EGXd"),s=n("XWnP"),r=n("exIq"),u=n("C6IX"),c=n("h6xd"),h=n("SVse");class d{constructor(){}ngOnInit(){}}var p=[["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]::after{content:'';width:0;height:0;position:absolute;border-bottom:7px solid #f6f8fb;border-right:7px solid transparent;border-left:7px solid transparent;bottom:100%;left:0;right:0;margin:auto}.l-popup-title[_ngcontent-%COMP%]{background-color:#f6f8fb;border-bottom:1px solid #e5e8f0;padding:10px;display:-webkit-box;display:flex;-webkit-box-pack:space-evenly;justify-content:space-evenly;font-weight:400}.l-popup-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.l-issue-message[_ngcontent-%COMP%]{padding:12px 15px 8px;font-size:13px}.l-cause-list[_ngcontent-%COMP%]{padding:0 12px 12px;font-size:13px;border-bottom:1px solid #e5e8f0}.l-cause-list-item[_ngcontent-%COMP%], .l-solution-list-item[_ngcontent-%COMP%]{padding:3px}.l-solution-list[_ngcontent-%COMP%]{padding:12px;font-size:13px}"]],g=l["\u0275crt"]({encapsulation:0,styles:p,data:{}});function m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","l-cause-list-item"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.context.$implicit)}))}function f(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","l-solution-list-item"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.context.$implicit)}))}function v(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"h4",[["class","l-popup-title"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"span",[["class","l-prev-application-name-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,["",""])),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","fas fa-arrows-alt-h"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"span",[["class","l-curr-application-name-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,["",""])),(e()(),l["\u0275eld"](6,0,null,null,0,"p",[["class","l-issue-message"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,2,"ul",[["class","l-cause-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,m)),l["\u0275did"](9,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](10,0,null,null,2,"ul",[["class","l-solution-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,f)),l["\u0275did"](12,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,9,0,n.data.message.ISSUE_CAUSES),e(t,12,0,n.data.message.ISSUE_SOLUTIONS)}),(function(e,t){var n=t.component;e(t,2,0,n.data.prevAppName),e(t,5,0,n.data.currAppName),e(t,6,0,n.data.message.ISSUE_MESSAGE)}))}l["\u0275ccf"]("pp-application-name-issue-popup",d,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-name-issue-popup",[],null,null,null,v,g)),l["\u0275did"](1,114688,null,0,d,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{data:"data"},{},[]);var b=n("S5y4"),T=n("XNiG"),S=n("1G5W"),C=n("lJxs"),O=n("zp1y"),y=n("ZF+8"),E=n("TwVa");class P{constructor(e,t,n,i){this.elementRef=e,this.newUrlStateNotificationService=t,this.translateService=n,this.translateReplaceService=i,this.outCreated=new l.EventEmitter,this.outClose=new l.EventEmitter,this.unsubscribe=new T.b}ngOnInit(){const e=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(S.a)(this.unsubscribe),Object(C.a)(e=>e.getPathValue(E.b.APPLICATION).getApplicationName()));this.data$=this.translateService.get("INSPECTOR.APPLICAITION_NAME_ISSUE").pipe(Object(O.a)(e),Object(C.a)(([e,t])=>{const{agentId:n,applicationName:l}=this.data;return{prevAppName:t,currAppName:l,message:{ISSUE_MESSAGE:this.translateReplaceService.replace(e.ISSUE_MESSAGE,t,l),ISSUE_CAUSES:[this.translateReplaceService.replace(e.ISSUE_CAUSES[0],t,l),this.translateReplaceService.replace(e.ISSUE_CAUSES[1],n,l)],ISSUE_SOLUTIONS:[this.translateReplaceService.replace(e.ISSUE_SOLUTIONS[0],t,n),e.ISSUE_SOLUTIONS[1]]}}}))}ngAfterViewInit(){this.outCreated.emit({coordX:this.coord.coordX-this.elementRef.nativeElement.offsetWidth/2,coordY:this.coord.coordY+9+7})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onInputChange(){this.outClose.emit()}onClickOutside(){this.outClose.emit()}}var I=n("nUCp"),R=n("TSSN"),x=n("jVku"),M=[["[_nghost-%COMP%]{display:block;width:300px;border-radius:3px}"]],w=l["\u0275crt"]({encapsulation:0,styles:M,data:{}});function _(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"pp-application-name-issue-popup",[],null,[[null,"clickOutside"]],(function(e,t,n){var l=!0,i=e.component;"clickOutside"===t&&(l=!1!==i.onClickOutside()&&l);return l}),v,g)),l["\u0275did"](1,737280,null,0,b.ClickOutsideDirective,[l.ElementRef,l.NgZone,l.PLATFORM_ID],{exclude:[0,"exclude"]},{clickOutside:"clickOutside"}),l["\u0275did"](2,114688,null,0,d,[],{data:[0,"data"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,1,0,".l-not-same-button, .fa-comment-alt"),e(t,2,0,l["\u0275unv"](t,2,0,l["\u0275nov"](t,3).transform(n.data$)))}),null)}var D=l["\u0275ccf"]("pp-application-name-issue-popup-container",P,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-name-issue-popup-container",[],null,null,null,_,w)),l["\u0275did"](1,4440064,null,0,P,[l.ElementRef,I.a,R.i,x.a],null,null)],(function(e,t){e(t,1,0)}),null)}),{data:"data",coord:"coord"},{outCreated:"outCreated",outClose:"outClose"},[]),A=n("huS9"),N=n("oIO+"),k=n("Xf8D");class L{constructor(e,t,n,l,i,a,o){this.storeHelperService=e,this.translateService=t,this.translateReplaceService=n,this.analyticsService=l,this.dynamicPopupService=i,this.componentFactoryResolver=a,this.injector=o,this.i18nText={MIN_LENGTH_MSG:""},this.searchUseEnter=!1,this.SEARCH_MIN_LENGTH=2}ngOnInit(){this.getI18NText()}getI18NText(){this.translateService.get("COMMON.MIN_LENGTH").subscribe(e=>{this.i18nText.MIN_LENGTH_MSG=this.translateReplaceService.replace(e,this.SEARCH_MIN_LENGTH)})}onSearchQuery(e){this.analyticsService.trackEvent(y.e.SEARCH_AGENT),this.storeHelperService.dispatch(new N.a.UpdateFilterOfServerAndAgentList(e))}onCancel(){this.storeHelperService.dispatch(new N.a.UpdateFilterOfServerAndAgentList(""))}onShowHelp(e){this.analyticsService.trackEvent(y.e.TOGGLE_HELP_VIEWER,k.a.AGENT_LIST);const{left:t,top:n,width:l,height:i}=e.target.getBoundingClientRect();this.dynamicPopupService.openPopup({data:k.a.AGENT_LIST,coord:{coordX:t+l/2,coordY:n+i/2},component:k.b},{resolver:this.componentFactoryResolver,injector:this.injector})}}var F=n("OPvN"),j=n("/yY+"),U=n("9BJz"),z=[["[_nghost-%COMP%]{display:block;height:38px}.l-container-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;background:#f5f5f5;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;width:100%;height:100%;padding:4px 4px 4px 11px}.l-container-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#a8acb5;font-size:18px}.l-wrapper[_ngcontent-%COMP%]{width:205px;height:100%;color:#b3b3b4;position:relative;margin-right:7px}.l-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #d7dde4;background-color:#fff;padding:9px 8px 9px 11px}.l-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:50%;right:8px;-webkit-transform:translateY(-50%);transform:translateY(-50%)}[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:12px}[_ngcontent-%COMP%]::-moz-placeholder{font-size:12px}[_ngcontent-%COMP%]::-ms-input-placeholder{font-size:12px}[_ngcontent-%COMP%]::placeholder{font-size:12px}"]],G=l["\u0275crt"]({encapsulation:0,styles:z,data:{}});function H(e){return l["\u0275vid"](2,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","l-container-wrapper font-opensans"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","l-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"input",[["class","l-search-input"],["ppSearchInput",""],["type","text"]],[[8,"placeholder",0]],[[null,"outCancel"],[null,"outSearch"],[null,"keydown"],[null,"keyup"]],(function(e,t,n){var i=!0,a=e.component;"keydown"===t&&(i=!1!==l["\u0275nov"](e,3).onKeyDown(n)&&i);"keyup"===t&&(i=!1!==l["\u0275nov"](e,3).onKeyUp(n)&&i);"outCancel"===t&&(i=!1!==a.onCancel()&&i);"outSearch"===t&&(i=!1!==a.onSearchQuery(n)&&i);return i}),null,null)),l["\u0275did"](3,737280,null,0,A.a,[l.ElementRef],{searchMinLength:[0,"searchMinLength"],useEnter:[1,"useEnter"]},{outCancel:"outCancel",outSearch:"outSearch"}),(e()(),l["\u0275eld"](4,0,null,null,0,"button",[["class","fas fa-search"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onShowHelp(n)&&l);return l}),null,null))],(function(e,t){var n=t.component;e(t,3,0,n.SEARCH_MIN_LENGTH,n.searchUseEnter)}),(function(e,t){var n=t.component;e(t,2,0,l["\u0275inlineInterpolate"](1,"",n.i18nText.MIN_LENGTH_MSG,""))}))}l["\u0275ccf"]("pp-agent-search-input-container",L,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-search-input-container",[],null,null,null,H,G)),l["\u0275did"](1,114688,null,0,L,[F.a,R.i,x.a,j.a,U.a,l.ComponentFactoryResolver,l.Injector],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);var V=n("pLZG");class ${constructor(e,t,n,l){this.webAppSettingDataService=e,this.newUrlStateNotificationService=t,this.urlRouteManagerService=n,this.analyticsService=l,this.unsubscribe=new T.b}ngOnInit(){this.funcImagePath=this.webAppSettingDataService.getIconPathMakeFunc(),this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(S.a)(this.unsubscribe),Object(V.a)(e=>e.hasValue(E.b.APPLICATION))).subscribe(e=>{this.applicationName=e.getPathValue(E.b.APPLICATION).getApplicationName(),this.applicationServiceType=e.getPathValue(E.b.APPLICATION).getServiceType(),this.applicationIconImagePath=this.funcImagePath(this.applicationServiceType),this.agentId=e.hasValue(E.b.AGENT_ID)?e.getPathValue(E.b.AGENT_ID):""})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onSelectApplication(){const e=this.newUrlStateNotificationService.isRealTimeMode()?[E.a.INSPECTOR,E.a.REAL_TIME,this.newUrlStateNotificationService.getPathValue(E.b.APPLICATION).getUrlStr()]:[E.a.INSPECTOR,this.newUrlStateNotificationService.getPathValue(E.b.APPLICATION).getUrlStr(),this.newUrlStateNotificationService.getPathValue(E.b.PERIOD).getValueWithTime(),this.newUrlStateNotificationService.getPathValue(E.b.END_TIME).getEndTime()];this.urlRouteManagerService.moveOnPage({url:e}),this.analyticsService.trackEvent(y.e.GO_TO_APPLICATION_INSPECTOR)}}var B=n("W33f"),Z=n("D5ZC"),X=[["[_nghost-%COMP%]{display:block;height:32px}.l-wrapper[_ngcontent-%COMP%]{cursor:pointer;display:block;padding:8px 6px 6px 13px;overflow:hidden;font-size:12px;white-space:nowrap;text-overflow:ellipsis}.l-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;width:22px;height:18px;margin-right:4px}.l-wrapper.active[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600}.l-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer;color:var(--primary-color);background-color:#eee}"]],Y=l["\u0275crt"]({encapsulation:0,styles:X,data:{}});function W(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","l-wrapper"]],[[2,"active",null],[1,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onSelectApplication()&&l);return l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),l["\u0275ted"](2,null,["","\n"]))],null,(function(e,t){var n=t.component;e(t,0,0,!n.agentId,n.applicationName),e(t,1,0,n.applicationIconImagePath),e(t,2,0,n.applicationName)}))}l["\u0275ccf"]("pp-application-inspector-title-container",$,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-inspector-title-container",[],null,null,null,W,Y)),l["\u0275did"](1,245760,null,0,$,[B.a,I.a,Z.a,j.a],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);class q{constructor(){this.outSelectAgent=new l.EventEmitter}set serverKeyList(e){this._serverKeyList=e,0!==e.length&&(this.isCollapsed=e.reduce((e,t)=>Object.assign({},e,{[t]:!1}),{}))}get serverKeyList(){return this._serverKeyList}ngOnInit(){}getIconPath(e){let t="";switch(e){case 200:case 201:t="icon-down";break;case 300:t="icon-disconnect";break;case-1:t="icon-error"}return this.funcImagePath(t)}onSelectAgent(e){this.outSelectAgent.emit(e)}toggleMenu(e){this.isCollapsed[e]=!this.isCollapsed[e]}getCollapsedState(e){return this.isCollapsed[e]?"collapsed":"spreaded"}isActive(e){return Array.from(e.nextElementSibling.querySelectorAll(".l-agent-name-wrapper")).some(e=>e.classList.contains("active"))}}var Q=[["[_nghost-%COMP%]{display:block;height:100%;font-size:13px}.l-servers-list[_ngcontent-%COMP%]{overflow-x:hidden;height:100%}.l-depth-0[_ngcontent-%COMP%]   .l-name-wrapper[_ngcontent-%COMP%]{padding:8px 10px 8px 17px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.l-name[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.l-depth-1[_ngcontent-%COMP%]   .l-name-wrapper[_ngcontent-%COMP%]{margin-left:15px;font-size:90%;max-width:calc(100% - 15px)}.l-name-wrapper[_ngcontent-%COMP%]{display:block}.l-name-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.l-name-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#eee;color:var(--primary-color)!important}.l-name-wrapper.active[_ngcontent-%COMP%]{color:var(--primary-color)!important}.l-icon-alert[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{vertical-align:middle}"]],K=l["\u0275crt"]({encapsulation:0,styles:Q,data:{animation:[{type:7,name:"collapseSpread",definitions:[{type:0,name:"collapsed",styles:{type:6,styles:{height:0,overflow:"hidden"},offset:null},options:void 0},{type:0,name:"spreaded",styles:{type:6,styles:{height:"auto"},offset:null},options:void 0},{type:1,expr:"collapsed <=> spreaded",animation:[{type:4,styles:null,timings:"0.5s"}],options:null}],options:{}},{type:7,name:"rightDown",definitions:[{type:0,name:"collapsed",styles:{type:6,styles:{transform:"none"},offset:null},options:void 0},{type:0,name:"spreaded",styles:{type:6,styles:{transform:"rotate(90deg)"},offset:null},options:void 0},{type:1,expr:"collapsed <=> spreaded",animation:[{type:4,styles:null,timings:"0.3s"}],options:null}],options:{}}]}});function J(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","l-icon-alert"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(e,t){e(t,1,0,t.component.getIconPath(t.parent.context.$implicit.status.state.code))}))}function ee(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","l-agent"]],[[1,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onSelectAgent(e.context.$implicit.agentId)&&l);return l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","l-agent-name-wrapper l-name-wrapper"]],[[2,"active",null]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"span",[["class","l-name"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["class","fas fa-hdd"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,[" "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,J)),l["\u0275did"](6,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,6,0,100!==t.context.$implicit.status.state.code)}),(function(e,t){var n=t.component;e(t,0,0,t.context.$implicit.agentId),e(t,1,0,t.context.$implicit.agentId===n.agentId),e(t,4,0,t.context.$implicit.agentId)}))}function te(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,[["serverDiv",1]],null,4,"div",[["class","l-server-name-wrapper l-name-wrapper"]],[[1,"title",0],[2,"active",null]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.toggleMenu(e.context.$implicit)&&l);return l}),null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"span",[["class","l-name"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["class","fas fa-server"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,[" "," "])),(e()(),l["\u0275eld"](5,0,null,null,0,"i",[["class","fas fa-angle-right"]],[[24,"@rightDown",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"ul",[["class","l-agent-list l-depth-1"]],[[24,"@collapseSpread",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ee)),l["\u0275did"](8,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,8,0,t.component.serverList[t.context.$implicit])}),(function(e,t){var n=t.component;e(t,1,0,t.context.$implicit,n.isActive(l["\u0275nov"](t,1))),e(t,4,0,t.context.$implicit),e(t,5,0,n.getCollapsedState(t.context.$implicit)),e(t,6,0,n.getCollapsedState(t.context.$implicit))}))}function ne(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","l-servers-list l-depth-0"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,te)),l["\u0275did"](2,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,2,0,t.component.serverKeyList)}),null)}l["\u0275ccf"]("pp-server-and-agent-list",q,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-server-and-agent-list",[],null,null,null,ne,K)),l["\u0275did"](1,114688,null,0,q,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{funcImagePath:"funcImagePath",serverKeyList:"serverKeyList",serverList:"serverList",agentId:"agentId"},{outSelectAgent:"outSelectAgent"},[]);var le=n("itXk"),ie=n("r0o6"),ae=n("LRne"),oe=n("eIep"),se=n("3E0/"),re=n("vkgz"),ue=n("bOdf"),ce=n("Ej/u"),he=n("2Vo4");class de{constructor(e,t,n){this.snap=e,this.group=t,this.options=n,this.addElements()}addElements(){this.backgroundRect=this.snap.rect(this.options.left,this.options.top,this.options.width,this.options.height),this.group.add(this.backgroundRect)}reset(e){this.backgroundRect.animate({width:e},this.options.duration,mina.easein)}destroy(){}}class pe{constructor(e){this.onChangeStatusData$=new he.a(null),this.onChangeEventData$=new he.a(null),this.initData(e),this.onChangeStatusData$.next(this.aStatusRawData),this.onChangeEventData$.next(this.aEventRawData)}initData(e){this.initStatusData(e.agentStatusTimeline),this.initEventData(e.agentEventTimeline)}initStatusData(e){this.aStatusRawData=e.timelineSegments||[],this.oStatusRawHash={},this.aStatusRawData.forEach(e=>{this.oStatusRawHash[this.makeID(e)]=e})}initEventData(e){this.aEventRawData=e.timelineSegments||[]}makeID(e){return e.endTimestamp+""}eventCount(){return this.aEventRawData.length}statusCount(){return this.aStatusRawData.length}getDataByIndex(e){return this.aStatusRawData[e]}getDataByKey(e){return this.oStatusRawHash[e]}getEventDataByIndex(e){return this.aEventRawData[e]}emptyData(){this.aStatusRawData=[],this.oStatusRawHash={},this.aEventRawData=[]}addData(e){this.initData(e),this.onChangeStatusData$.next(this.aStatusRawData),this.onChangeEventData$.next(this.aEventRawData)}destroy(){}}class ge{constructor(e,t,n,l){this.snap=e,this.group=t,this.options=n,this.oPositionManager=l,this.aEventGroupElement=[],this.clickEvent$=new T.b,this.initOptions(),this.addEvents()}initOptions(){const e={y:4,barLength:4,gapBarNCircle:2,circleRadius:8,filter:this.snap.filter(Snap.filter.shadow(1,1,1,"#000",.3))};Object.keys(e).forEach(t=>{this.options[t]=e[t]})}addEvents(){this.group.click((e,t,n)=>{const l=this.getElement(e,"g"),i=Math.floor(l.getAttribute("data-id"));this.clickEvent$.next(this.aEventStatusData[i])})}getElement(e,t){let n=e.target;for(;n&&n.tagName.toLowerCase()!==t;)n=n.parentElement;return n}updateData(e){this.aEventStatusData=e,this.emptyData(),this.reset()}emptyData(){this.aEventGroupElement.forEach(e=>{e.attr("display","none")})}reset(){const e=this.aEventGroupElement.length,t=this.aEventStatusData.length;let n;if(e===t)for(n=0;n<t;n++)this.reposition(this.aEventGroupElement[n],n);else if(e>t){for(n=t;n<e;n++)this.aEventGroupElement[n].attr("display","none");for(n=0;n<t;n++)this.reposition(this.aEventGroupElement[n],n)}else{for(n=0;n<e;n++)this.reposition(this.aEventGroupElement[n],n);for(n=e;n<t;n++)this.addEventElement(this.aEventStatusData[n],n)}}reposition(e,t){const n=this.aEventStatusData[t],l=n.startTimestamp+(n.endTimestamp-n.startTimestamp)/2,i=this.oPositionManager.getPositionByTime(l),a=this.getEventTextInfo(n.value.totalCount);e[2].attr({x:a.x,y:a.y,text:a.text}),e.attr("display","block"),e.animate({transform:`translate(${i}, 0)`},this.options.duration)}addEventElement(e,t){this.group.add(this.makeElement(e,t))}makeElement(e,t){const n=e.startTimestamp+(e.endTimestamp-e.startTimestamp)/2,l=this.getEventTextInfo(e.value.totalCount),i=this.group.g().attr({"data-id":t,"data-time":n,transform:`translate(${this.oPositionManager.getPositionByTime(n)}, 0)`});return i.add(this.snap.line(0,this.options.y,0,this.options.y+this.options.barLength),this.snap.circle(0,this.options.y+this.options.circleRadius+this.options.gapBarNCircle+this.options.barLength,this.options.circleRadius).attr({class:"event",filter:this.options.filter,"data-time":n}),this.snap.text(l.x,l.y,l.text).attr({class:"event"})),this.aEventGroupElement.push(i),i}getEventTextInfo(e){return{x:e<10?-this.options.circleRadius/3:-this.options.circleRadius/4*3,y:this.options.y+this.options.circleRadius+this.options.circleRadius/2+this.options.gapBarNCircle+this.options.barLength,text:e>=100?"...":e+""}}destroy(){}}class me{constructor(e,t,n){this.snap=e,this.group=t,this.options=n,this.onDragStart$=new T.b,this.onDragging$=new T.b,this.onDragEnd$=new T.b,this.previousX=n.x,this.addElements(),this.setX(n.x),this.addEvent()}addElements(){this.handlerGrip=this.snap.circle(0,3,5).attr({fill:"#777af9",cursor:"pointer",stroke:"#4E50C8","stroke-width":"3px"}),this.handlerGroup=this.group.g(),this.handlerGroup.add(this.snap.line(0,0,0,this.options.height),this.snap.circle(0,3,7).attr({fill:"#000",filter:Snap.filter.shadow(0,0,2,"#000",.5)}),this.handlerGrip)}addEvent(){let e=-1;this.handlerGrip.click(e=>{e.stopPropagation()}),this.handlerGrip.mousedown(e=>{e.stopPropagation()}),this.handlerGrip.drag((t,n,l,i,a)=>{const o=l-this.options.margin;!1!==this.isInRestrictionZone(o)&&(this.handlerGroup.attr({transform:`translate(${o}, 0)`}),e=o,this.onDragging$.next(o))},(e,t,n)=>{n.stopPropagation(),this.onDragStart$.next(e-this.options.margin)},t=>{t.stopPropagation(),this.previousX!==e&&-1!==e?(this.onDragEnd$.next({dragged:!0,x:e}),this.previousX=e):this.onDragEnd$.next({dragged:!1,x:-1})})}setX(e){this.handlerGroup.animate({transform:`translate(${e}, 0)`},this.options.duration,mina.easeout)}isInRestrictionZone(e){return!(e<=this.options.zone[0]||e>=this.options.zone[1])}setZone(e,t){this.options.zone=[e,t]}setPositionAndZone(e,t){this.setX(e),this.onDragging$.next(e),this.setZone(t[0],t[1])}destroy(){}}me.HANDLER_IMAGE_WIDTH=30,me.HANDLER_IMAGE_HEIGHT=18;class fe{constructor(e,t,n){this.snap=e,this.group=t,this.options=n,this.bRun=!1,this.addElements(),this.show()}addElements(){const e=this.getCenterPosition(this.options.width,this.options.height,this.options.size),t=this.snap.rect(0,0,this.options.width,this.options.height);this.clockWiseRect=this.snap.rect(e.x,e.y,this.options.size,this.options.size).attr({stroke:"rgba(197, 197, 197, .9)"}),this.antiClockWiseRect=this.snap.rect(e.x,e.y,this.options.size,this.options.size).attr({stroke:"rgba(239, 246, 105)"}),this.group.add(t,this.clockWiseRect,this.antiClockWiseRect)}getCenterPosition(e,t,n){const l=n/2;return{x:e/2-l,y:t/2-l}}show(){this.group.attr("display","block"),this.bRun=!0,this.animate(this.clockWiseRect,0,360,mina.easeout),this.animate(this.antiClockWiseRect,45,-315,mina.easein)}animate(e,t,n,l){Snap.animate(t,n,t=>{e.attr("transform","rotate("+t+"deg)")},this.options.duration,l,()=>{!0===this.bRun&&this.animate(e,n,t,l)})}hide(){this.group.attr("display","none"),this.bRun=!1}destroy(){}}var ve=n("f0Wu");class be{constructor(e){this.options=e,this.aSelectionTimeRange=[],this.aSelectionPosition=[],this.width=e.width,this.minTimeRange=e.minTimeRange,this.maxSelectionTimeRange=e.maxSelectionTimeRange,this.initInnerVar(),this.setTimelineRange(e.timelineRange[0],e.timelineRange[1]),this.initSelectionTimeRange(e.selectionTimeRange||[]),this.resetSelectionByTime(),this.xAxisTicks=e.xAxisTicks||be.X_AXIS_TICKS,this.setPointingTime(e.pointingTime)}initInnerVar(){this.aSelectionTimeRange=[],this.aSelectionPosition=[]}setTimelineRange(e,t){this.startTime=e,this.endTime=t,this.calcuTimePerPoint()}initSelectionTimeRange(e){2!==e.length&&(e=[this.startTime,this.endTime]),e[1]-e[0]>this.maxSelectionTimeRange&&(e[0]=e[1]-this.maxSelectionTimeRange),this.setSelectionTimeRange(e[0],e[1])}resetSelectionByTime(){this.setSelectionPosition(this.getPositionByTime(this.aSelectionTimeRange[0]),this.getPositionByTime(this.aSelectionTimeRange[1]))}calcuTimePerPoint(){this.timePerPoint=(this.endTime-this.startTime)/this.width}setSelectionTimeRange(e,t){this.aSelectionTimeRange[0]=null===e?this.aSelectionTimeRange[0]:e,this.aSelectionTimeRange[1]=null===t?this.aSelectionTimeRange[1]:t}setSelectionPosition(e,t){this.aSelectionPosition[0]=null===e?this.aSelectionPosition[0]:e,this.aSelectionPosition[1]=null===t?this.aSelectionPosition[1]:t}getPositionByTime(e){return Math.floor((e-this.startTime)/this.timePerPoint)}setPointingTime(e){this.pointingTime=e,this.pointingPosition=this.getPositionByTime(e)}isInMaxSelectionTimeRange(e,t){return t-e<=this.maxSelectionTimeRange}getNewSelectionTimeRangeFromStart(e){return[e,e+this.maxSelectionTimeRange]}getNewSelectionTimeRangeFromEnd(e){return[e-this.maxSelectionTimeRange,e]}isBeforeSliderStartTime(e){return e<this.startTime}isAfterSliderEndTime(e){return e>this.endTime}getTimelineEndTime(){return this.endTime}setWidth(e){this.width=e,this.calcuTimePerPoint(),this.reset()}getTimelineEndPosition(){return this.width}getTimelineStartTimeStr(){return this.formatDate(new Date(this.startTime))}getTimelineEndTimeStr(){return this.formatDate(new Date(this.endTime))}getFullTimeStr(e){return this.formatDate(new Date(this.getTimeFromPosition(e)))}formatDate(e){return ve(e).tz(this.options.timezone).format(this.options.dateFormat[0])}isInSelectionZone(){return this.pointingTime>=this.aSelectionTimeRange[0]&&this.pointingTime<=this.aSelectionTimeRange[1]}isInTimelineRange(e){return e>=this.startTime&&e<=this.endTime}getTimelineRange(){return[this.startTime,this.endTime]}getSelectionTimeRange(){return[this.aSelectionTimeRange[0],this.aSelectionTimeRange[1]]}getSelectionPosition(){return[this.aSelectionPosition[0],this.aSelectionPosition[1]]}getPointingPosition(){return this.pointingPosition}getPointingTime(){return this.pointingTime}getPrevTime(){const e=this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0];return this.aSelectionTimeRange[0]-Math.floor(e/2)-1}getNextTime(){const e=this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0],t=this.aSelectionTimeRange[1]+Math.floor(e/2)+1;return t>Date.now()?Date.now():t}getTimeFromPosition(e){return this.startTime+Math.floor(this.timePerPoint*e)}calcuSelectionZone(){const e=this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0],t=Math.round(e/2);let n=this.pointingTime-t,l=this.pointingTime+t;n<this.startTime?(l=n+e,n=this.startTime):l>this.endTime&&(n=this.endTime-e,l=this.endTime),this.setSelectionTimeRange(n,l),this.setSelectionPosition(this.getPositionByTime(n),this.getPositionByTime(l))}getXAxisPositionData(){const e=be.X_AXIS_TICKS+1,t=Math.floor(this.width/e),n=[];for(let l=0;l<e;l++){if(0===l)continue;const e=l*t;n.push({x:e,time:this.getTimeStr(e)})}return n}getTimeStr(e){const t=Math.floor(e*this.timePerPoint)+this.startTime;return ve(new Date(t)).tz(this.options.timezone).format(this.options.dateFormat[1])+" "+ve(new Date(t)).tz(this.options.timezone).format(this.options.dateFormat[2])}setSelectionStartTime(e){this.setSelectionTimeRange(e,null),this.setSelectionPosition(this.getPositionByTime(e),null)}setSelectionEndTime(e){this.setSelectionTimeRange(null,e),this.setSelectionPosition(null,this.getPositionByTime(e))}setSelectionStartPosition(e){this.setSelectionTimeRange(this.getTimeFromPosition(e),null),this.setSelectionPosition(e,null)}setSelectionEndPosition(e){this.setSelectionTimeRange(null,this.getTimeFromPosition(e)),this.setSelectionPosition(null,e)}zoomIn(){if(this.startTime===this.aSelectionTimeRange[0]&&this.endTime===this.aSelectionTimeRange[1])return;const e=Math.floor((this.endTime-this.startTime)/4);let t,n=this.pointingTime-e,l=this.pointingTime+e;if(l-n<this.minTimeRange){const e=Math.floor(this.minTimeRange/2);n=this.pointingTime-e,l=this.pointingTime+e}if(this.aSelectionTimeRange[0]<n){t=n-this.aSelectionTimeRange[0];const e=this.aSelectionTimeRange[1]+t>l?l:this.aSelectionTimeRange[1]+t;this.setSelectionTimeRange(n,e)}if(this.aSelectionTimeRange[1]>l){t=this.aSelectionTimeRange[1]-l;const e=this.aSelectionTimeRange[0]-t<n?n:this.aSelectionTimeRange[0]-t;this.setSelectionTimeRange(e,l)}this.setTimelineRange(n,l),this.reset()}zoomOut(){const e=this.endTime-this.startTime,t=this.aSelectionTimeRange[0]+Math.floor((this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0])/2);this.setTimelineRange(t-e,t+e),this.reset()}resetBySelectTime(e,t){const n=Math.floor((this.endTime-this.startTime)/2),l=Math.floor((this.aSelectionTimeRange[1]-this.aSelectionTimeRange[0])/2);!0===t?(this.setTimelineRange(e-2*n,e),this.setSelectionTimeRange(e-2*l,e)):(this.setTimelineRange(e-n,e+n),this.setSelectionTimeRange(e-l,e+l)),this.resetSelectionByTime(),this.setPointingTime(e)}reset(){this.setPointingTime(this.pointingTime),this.resetSelectionByTime()}setTimezone(e){this.options.timezone=e}setDateFormat(e){this.options.dateFormat=e}destroy(){}}be.X_AXIS_TICKS=5;class Te{constructor(){this.changedSelectedTime=!1,this.changedSelectionRange=!1,this.changedRange=!1,this.data={selectedTime:0,range:[0,0],selectionRange:[0,0]}}setData(e,t,n){return this.data.selectedTime=e,this.data.selectionRange=t,this.data.range=n,this}setSelectedTime(e){return this.data.selectedTime=e,this}setSelectionRange(e){return this.data.selectionRange=e,this}setRange(e){return this.data.range=e,this}setOnChangedSelectedTime(){this.changedSelectedTime=!0}setOffChangedSelectedTime(){this.changedSelectedTime=!1}setOnChangedSelectionRange(){this.changedSelectionRange=!0}setOffChangedSelectionRange(){this.changedSelectionRange=!1}setOnRange(){this.changedRange=!0}setOffRange(){this.changedRange=!1}}class Se{constructor(e,t,n,l,i,a,o,s){this.options=e,this.oSelectionZone=t,this.oSelectionPoint=n,this.oLeftHandler=l,this.oRightHandler=i,this.oLeftTimeSignboard=a,this.oRightTimeSignboard=o,this.oPositionManager=s,this.onChangeTimelineUIEvent$=new T.b,this.onReset$=new T.b,this.initClass()}initClass(){this.unsubscribe=this.oLeftHandler.onDragStart$.subscribe(e=>{this.oLeftTimeSignboard.onDragStart(e)}),this.unsubscribe.add(this.oLeftHandler.onDragging$.subscribe(e=>{this.oSelectionZone.onDragXStart(e),this.oLeftTimeSignboard.onDrag(e)})),this.unsubscribe.add(this.oLeftHandler.onDragEnd$.subscribe(e=>{this.oLeftTimeSignboard.onDragEnd(),e.dragged&&this.movedLeftHandler(e.x)})),this.unsubscribe.add(this.oRightHandler.onDragStart$.subscribe(e=>{this.oRightTimeSignboard.onDragStart(e)})),this.unsubscribe.add(this.oRightHandler.onDragging$.subscribe(e=>{this.oSelectionZone.onDragXEnd(e),this.oRightTimeSignboard.onDrag(e)})),this.unsubscribe.add(this.oRightHandler.onDragEnd$.subscribe(e=>{this.oRightTimeSignboard.onDragEnd(),e.dragged&&this.movedRightHandler(e.x)}))}movedLeftHandler(e){let t=this.oPositionManager.getPointingTime();const n=new Te,l=this.oPositionManager.getSelectionTimeRange(),i=this.oPositionManager.getTimeFromPosition(e);if(this.oPositionManager.isInMaxSelectionTimeRange(i,l[1]))this.oRightHandler.setZone(e,this.oPositionManager.getTimelineEndPosition()),this.oPositionManager.setSelectionStartPosition(e),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.setPointingTime(i),this.oSelectionPoint.setPointing(e),t=i,n.setOnChangedSelectedTime());else{const l=this.oPositionManager.getNewSelectionTimeRangeFromStart(i),a=this.oPositionManager.getPositionByTime(l[1]);this.oRightHandler.setZone(e,this.oPositionManager.getTimelineEndPosition()),this.oPositionManager.setSelectionStartPosition(e),this.oRightHandler.setX(a),this.oRightTimeSignboard.onDrag(a),this.oLeftHandler.setZone(0,a),this.oPositionManager.setSelectionEndPosition(a),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.setPointingTime(l[1]),this.oSelectionPoint.setPointing(a),t=l[1],n.setOnChangedSelectedTime())}this.oSelectionZone.redraw(),n.setOnChangedSelectionRange(),n.setData(t,this.oPositionManager.getSelectionTimeRange(),this.oPositionManager.getTimelineRange()),this.onChangeTimelineUIEvent$.next(n)}movedRightHandler(e){let t=this.oPositionManager.getPointingTime();const n=new Te,l=this.oPositionManager.getSelectionTimeRange(),i=this.oPositionManager.getTimeFromPosition(e);if(this.oPositionManager.isInMaxSelectionTimeRange(l[0],i))this.oLeftHandler.setZone(0,e),this.oPositionManager.setSelectionEndPosition(e),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.setPointingTime(i),this.oSelectionPoint.setPointing(e),t=i,n.setOnChangedSelectedTime());else{const l=this.oPositionManager.getNewSelectionTimeRangeFromEnd(i),a=this.oPositionManager.getPositionByTime(l[0]);this.oLeftHandler.setZone(0,e),this.oPositionManager.setSelectionEndPosition(e),this.oLeftHandler.setX(a),this.oLeftTimeSignboard.onDrag(a),this.oRightHandler.setZone(a,this.oPositionManager.getTimelineEndPosition()),this.oPositionManager.setSelectionStartPosition(a),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.setPointingTime(l[0]),this.oSelectionPoint.setPointing(a),t=l[0],n.setOnChangedSelectedTime())}this.oSelectionZone.redraw(),n.setOnChangedSelectionRange(),n.setData(t,this.oPositionManager.getSelectionTimeRange(),this.oPositionManager.getTimelineRange()),this.onChangeTimelineUIEvent$.next(n)}moveSelectionAndHandler(){const e=this.oPositionManager.getSelectionPosition();this.oLeftHandler.setPositionAndZone(e[0],[0,e[1]]),this.oRightHandler.setPositionAndZone(e[1],[e[0],this.oPositionManager.getTimelineEndPosition()]),this.oSelectionZone.redraw()}onSetPointingByPosition(e){this.onSetPointingByTime(this.oPositionManager.getTimeFromPosition(e))}onSetPointingByTime(e,t){const n=new Te;n.setOnChangedSelectedTime(),this.oPositionManager.isInTimelineRange(e)?(this.oPositionManager.setPointingTime(e),!1===this.oPositionManager.isInSelectionZone()&&(this.oPositionManager.calcuSelectionZone(),this.moveSelectionAndHandler(),n.setOnChangedSelectionRange()),this.oSelectionPoint.setPointing(this.oPositionManager.getPointingPosition())):(this.oPositionManager.resetBySelectTime(e,t),this.onReset$.next(),n.setOnChangedSelectionRange()),n.setData(this.oPositionManager.getPointingTime(),this.oPositionManager.getSelectionTimeRange(),this.oPositionManager.getTimelineRange()),this.onChangeTimelineUIEvent$.next(n)}reset(){const e=this.oPositionManager.getSelectionPosition();this.oLeftHandler.setPositionAndZone(e[0],[0,e[1]]),this.oRightHandler.setPositionAndZone(e[1],[e[0],this.oPositionManager.getTimelineEndPosition()]),this.oSelectionZone.redraw(),this.oSelectionPoint.setPointing(this.oPositionManager.getPointingPosition())}destroy(){this.unsubscribe.unsubscribe()}}class Ce{constructor(e,t,n){this.snap=e,this.group=t,this.options=n,this.addElements(),this.setPointing(n.x)}addElements(){this.options.radius;this.group.add(this.snap.line(0,0,0,this.options.height),this.snap.circle(0,this.options.height/2,this.options.radius).attr({filter:this.snap.filter(Snap.filter.shadow(0,0,4,"#FF0",1))}))}setPointing(e){this.group.animate({transform:`translate(${e}, ${this.options.y})`},this.options.duration,mina.easein)}destroy(){}}class Oe{constructor(e,t,n,l){this.snap=e,this.group=t,this.options=n,this.oPositionManager=l,this.textMaxWidth=10,this.xPadding=10,this.addElements()}addElements(){const e=this.isIn(this.options.x),t=this.options.x+(e?this.xPadding:-this.xPadding);this.timeText=this.group.text(t,26,this.oPositionManager.getFullTimeStr(this.options.x)).attr({"text-anchor":this.getAnchorPosition(e)}),this.group.add(this.timeText)}setX(e){const t=this.isIn(e);this.timeText.attr({x:e+(t?this.xPadding:-this.xPadding),text:this.oPositionManager.getFullTimeStr(e),"text-anchor":this.getAnchorPosition(t)})}getAnchorPosition(e){return e?"start":"end"}isIn(e){return"left"===this.options.direction?e<this.textMaxWidth:e+this.textMaxWidth<this.oPositionManager.getTimelineEndPosition()}onDragStart(e){this.setX(e)}onDragEnd(){}onDrag(e){this.setX(e)}destroy(){}}class ye{constructor(e,t,n,l){this.snap=e,this.group=t,this.options=n,this.oPositionManager=l,this.aBaseLine=[],this.aLineElement=[],this.initBaseLine()}initBaseLine(){this.aBaseLine.push(this.makeRect(0,this.options.width,0,this.options.height,this.options.statusColor.BASE,ye.ID_PREFIX_BASE+Date.now())),this.aBaseLine.forEach(e=>{this.group.add(e)})}addStatus(e,t){this.isOutsideOfTimeline(e.startTimestamp,e.endTimestamp)||this.addLine(this.oPositionManager.getPositionByTime(e.startTimestamp),this.getX2(e.endTimestamp),this.options.statusColor[e.value],this.makeID(e))}isOutsideOfTimeline(e,t){return!1===this.oPositionManager.isInTimelineRange(e)&&!1===this.oPositionManager.isInTimelineRange(t)}makeID(e){return e.endTimestamp+ye.ID_POSTFIX}addLine(e,t,n,l){const i=this.makeRect(e,t,0,this.options.height,n,l);this.aLineElement.push(i),this.group.add(i)}makeRect(e,t,n,l,i,a){return this.snap.rect(e,n,t,l).attr({fill:i,"data-id":a})}getX2(e){return this.oPositionManager.getPositionByTime(-1===e?this.oPositionManager.getTimelineEndTime():e)}updateData(e){this.statusData=e,this.updateRender()}updateRender(){let e;const t=this.aLineElement.length,n=this.statusData.length;if(t===n)for(e=0;e<t;e++)this.show(this.aLineElement[e]);else if(t>n)for(e=n;e<t;e++)this.hide(this.aLineElement[e]);else{for(e=0;e<t;e++)this.show(this.aLineElement[e]);for(e=t;e<n;e++)this.addStatus(this.statusData[e],e)}this.reset()}emptyData(){this.aLineElement.forEach(e=>{this.hide(e)})}reset(){for(let t=0;t<this.aLineElement.length;t++){const e=this.aLineElement[t],n=this.statusData[t];if(n){const t=this.oPositionManager.getPositionByTime(n.startTimestamp);this.show(e),e.animate({x:t,width:this.getX2(n.endTimestamp)-t},this.options.duration,mina.easeOut,()=>{e.attr("fill",this.options.statusColor[n.value])})}else this.hide(e)}const e=this.oPositionManager.getTimelineEndPosition();this.aBaseLine.forEach(t=>{t.animate({width:e},this.options.duration)})}show(e){e.attr("display","block")}hide(e){e.attr("display","none")}destroy(){}}ye.ID_SPLITER="+",ye.ID_PREFIX_BASE="base-",ye.ID_POSTFIX="+state-line";class Ee{constructor(e,t,n,l){this.snap=e,this.group=t,this.options=n,this.oPositionManager=l,this.aAxisGroup=[],this.aText=[],this.init()}init(){const e=this.oPositionManager.getXAxisPositionData(),t=this.options.width/2;e.forEach((n,l)=>{const i=this.group.g(),a=this.snap.text(0,this.options.textY,e[l].time);this.aText.push(a),i.attr("transform","translate("+t+", 0)"),i.add(a,this.snap.line(0,this.options.startY,0,this.options.endY)),this.group.add(i),this.aAxisGroup.push(i),this.resetXPosition(i,e[l].x,t)})}resetXPosition(e,t,n){Snap.animate(n,t,t=>{e.attr("transform",`translate(${t}, 0)`)},this.options.duration)}reset(){const e=this.oPositionManager.getXAxisPositionData();for(let t=0;t<e.length;t++)this.aAxisGroup[t].attr("transform",`translate(${e[t].x}, 0)`),this.aText[t].attr("text",e[t].time)}destroy(){}}class Pe{constructor(e,t,n,l){this.snap=e,this.group=t,this.options=n,this.oPositionManager=l,this.addElements()}addElements(){const e=this.oPositionManager.getSelectionPosition();this.elZone=this.snap.rect(e[0],this.options.top,e[1]-e[0],this.options.height),this.group.add(this.elZone)}redraw(){const e=this.oPositionManager.getSelectionPosition();this.elZone.animate({x:e[0],width:e[1]-e[0]},this.options.duration)}onDragXStart(e){const t=this.oPositionManager.getSelectionPosition()[1]-e;this.elZone.attr({x:e,width:t})}onDragXEnd(e){const t=this.oPositionManager.getSelectionPosition()[0];this.elZone.attr({x:t,width:e-t})}destroy(){}}class Ie{constructor(e,t){this.element=e,this.svgGroups={},this.options={top:0,left:0,duration:50,xAxisTicks:5,minTimeRange:6e3,eventZoneHeight:30,headerZoneHeight:20,stateLineThickness:4,maxSelectionTimeRange:Ie.MAX_TIME_RANGE,headerTextTopPadding:10,pointerRadius:6},this.onChangeTimelineUIEvent$=new T.b,this.onSelectEventStatus$=new T.b,this.snap=Snap(e),this.snap.attr({height:t.height}),this.initOptions(t),this.initDataClass(t.timelineData),this.checkOffset(),this.initControlClass(),this.addEventListener()}initOptions(e){Object.keys(e).forEach(t=>{this.options[t]=e[t]}),this.setDefaultStatusColor(),this.checkOffset()}setDefaultStatusColor(){if(this.options.statusColor)Object.keys(Ie.DEFAULT_STATUS_COLOR).forEach(e=>{this.options.statusColor[e]||(this.options.statusColor[e]=Ie.DEFAULT_STATUS_COLOR[e])});else{const e={};Object.keys(Ie.DEFAULT_STATUS_COLOR).forEach(t=>{e[t]=Ie.DEFAULT_STATUS_COLOR[t]}),this.options.statusColor=e}}initDataClass(e){this.oTimelineData=new pe(e||{agentEventTimeline:{timelineSegments:[]},agentStatusTimeline:{includeWarning:!1,timelineSegments:[]}})}checkOffset(){const e=this.element.getBoundingClientRect();this.options.top=e.top,this.options.left=e.left}initControlClass(){this.oPositionManager=new be({width:this.options.width,xAxisTicks:this.options.xAxisTicks,pointingTime:this.options.pointingTime,minTimeRange:this.options.minTimeRange,timelineRange:this.options.timelineRange,selectionTimeRange:this.options.selectionTimeRange,maxSelectionTimeRange:this.options.maxSelectionTimeRange,timezone:this.options.timezone,dateFormat:this.options.dateFormat});const e=this.options.height-this.options.headerZoneHeight-this.options.eventZoneHeight;this.oLoading=new fe(this.snap,this.getGroup("loading",Ie.GROUP_TYPE.TOP_BASE,Ie.DRAWING_ORDER.loading),{size:30,width:this.options.width,height:this.options.height,duration:2e3}),this.oBackground=new de(this.snap,this.getGroup("background",Ie.GROUP_TYPE.CONTENT_BASE,Ie.DRAWING_ORDER.background),{top:0,left:0,size:30,width:this.options.width,height:e,duration:this.options.duration}),this.oStateLine=new ye(this.snap,this.getGroup("state-line",Ie.GROUP_TYPE.CONTENT_BASE,Ie.DRAWING_ORDER["state-line"]),{width:this.options.width,height:e,duration:this.options.duration,thickness:this.options.stateLineThickness,statusColor:this.options.statusColor},this.oPositionManager);const t=this.oPositionManager.getSelectionPosition(),n=new Pe(this.snap,this.getGroup("selection-zone",Ie.GROUP_TYPE.CONTENT_BASE,Ie.DRAWING_ORDER["selection-zone"]),{top:0,left:t[0],width:t[1]-t[0],height:e,duration:this.options.duration},this.oPositionManager),l=new Ce(this.snap,this.getGroup("selection-point",Ie.GROUP_TYPE.CONTENT_BASE,Ie.DRAWING_ORDER["selection-point"]),{y:this.options.headerZoneHeight,x:this.oPositionManager.getPointingPosition(),radius:this.options.pointerRadius,height:e,duration:this.options.duration}),i=new me(this.snap,this.getGroup("left-handler",Ie.GROUP_TYPE.CONTENT_BASE,Ie.DRAWING_ORDER["left-handler"]),{x:t[0],zone:[0,t[1]],height:e,margin:this.options.left,duration:this.options.duration}),a=new me(this.snap,this.getGroup("right-handler",Ie.GROUP_TYPE.CONTENT_BASE,Ie.DRAWING_ORDER["right-handler"]),{x:t[1],zone:[t[0],this.oPositionManager.getTimelineEndPosition()],height:e,margin:this.options.left,duration:this.options.duration}),o=new Oe(this.snap,this.getGroup("time-left-signboard",Ie.GROUP_TYPE.CONTENT_BASE,Ie.DRAWING_ORDER["time-signboard"]),{x:t[0],direction:"left"},this.oPositionManager),s=new Oe(this.snap,this.getGroup("time-right-signboard",Ie.GROUP_TYPE.CONTENT_BASE,Ie.DRAWING_ORDER["time-signboard"]),{x:t[1],direction:"right"},this.oPositionManager);this.oSelectionManager=new Se({headerZoneHeight:this.options.headerZoneHeight,contentZoneHeight:e},n,l,i,a,o,s,this.oPositionManager),this.oXAxis=new Ee(this.snap,this.getGroup("x-axis",Ie.GROUP_TYPE.TOP_BASE,Ie.DRAWING_ORDER["x-axis"]),{endY:this.options.height-this.options.eventZoneHeight,width:this.options.width,textY:this.options.headerTextTopPadding,startY:this.options.headerZoneHeight,duration:this.options.duration},this.oPositionManager),this.oEvents=new ge(this.snap,this.getGroup("events",Ie.GROUP_TYPE.BOTTOM_BASE,Ie.DRAWING_ORDER.events),{duration:this.options.duration},this.oPositionManager),this.oLoading.hide()}getGroup(e,t,n){if(this.svgGroups[e])return this.svgGroups[e];const l=this.svgGroups[e]=this.snap.g().attr({class:e,"data-order":n});return this.setTransform(l,t),this.sortGroup(l,n),l}setTransform(e,t){switch(t){case Ie.GROUP_TYPE.TOP_BASE:e.attr({transform:"translate(0, 0)"});break;case Ie.GROUP_TYPE.CONTENT_BASE:e.attr({transform:`translate(0, ${this.options.headerZoneHeight})`});break;case Ie.GROUP_TYPE.BOTTOM_BASE:e.attr({transform:`translate(0, ${this.options.height-this.options.eventZoneHeight})`})}}sortGroup(e,t){const n=this.snap.selectAll("g");let l=null;for(let i=n.length-1;i>=0;i--)n[i]!==e&&t<Math.floor(n[i].attr("data-order"))&&(l=n[i]);null!==l&&l.before(e)}addEventListener(){let e=-1;window.addEventListener("resize",()=>{this.checkOffset(),this.resize()}),this.snap.mousedown((t,n,l)=>{e=n}),this.oEvents.clickEvent$.subscribe(e=>{this.onSelectEventStatus$.next(e)}),this.oTimelineData.onChangeStatusData$.subscribe(e=>{this.oStateLine.updateData(e)}),this.oTimelineData.onChangeEventData$.subscribe(e=>{this.oEvents.updateData(e)}),this.oSelectionManager.onChangeTimelineUIEvent$.subscribe(e=>{this.onChangeTimelineUIEvent$.next(e)}),this.oSelectionManager.onReset$.subscribe(()=>{this.reset()});const t=this.options.headerZoneHeight,n=this.options.height-this.options.eventZoneHeight;this.snap.click((l,i,a)=>{e===i&&l.offsetY>t&&l.offsetY<n&&this.oSelectionManager.onSetPointingByPosition(l.offsetX)})}addData(e){this.oLoading.show(),this.oTimelineData.addData(e),this.oLoading.hide()}reset(){this.oXAxis.reset(),this.oSelectionManager.reset(),this.oStateLine.reset(),this.oEvents.reset()}resize(){this.oPositionManager.setWidth(this.element.getBoundingClientRect().width),this.oBackground.reset(this.oPositionManager.getTimelineEndPosition()),this.reset()}zoomIn(){this.oPositionManager.zoomIn(),this.reset(),this.fireChangedRangeEvent()}zoomOut(){this.oPositionManager.zoomOut(),this.reset(),this.fireChangedRangeEvent()}fireChangedRangeEvent(){const e=new Te;e.setOnRange(),e.setData(this.oPositionManager.getPointingTime(),this.oPositionManager.getSelectionTimeRange(),this.oPositionManager.getTimelineRange()),this.onChangeTimelineUIEvent$.next(e)}resetTimeRangeAndSelectionZone(e,t,n){this.oPositionManager.setTimelineRange(t[0],t[1]),this.oPositionManager.setSelectionStartTime(e[0]),this.oPositionManager.setSelectionEndTime(e[1]),this.oPositionManager.setPointingTime(n||e[1]),this.emptyData(),this.reset()}movePrev(){this.oSelectionManager.onSetPointingByTime(this.oPositionManager.getPrevTime())}moveNext(){this.oSelectionManager.onSetPointingByTime(this.oPositionManager.getNextTime())}moveHead(){this.oSelectionManager.onSetPointingByTime(Date.now(),!0)}getTimelineRange(){return this.oPositionManager.getTimelineRange()}getSelectionTimeRange(){return this.oPositionManager.getSelectionTimeRange()}emptyData(){this.oLoading.show(),this.oTimelineData.emptyData(),this.oEvents.emptyData(),this.oStateLine.emptyData(),this.oLoading.hide()}setPointingTime(e){this.oSelectionManager.onSetPointingByTime(e)}getPointingTime(){return this.oPositionManager.getPointingTime()}setTimezone(e){this.options.timezone=e,this.oPositionManager.setTimezone(e),this.reset()}setDateFormat(e){this.options.dateFormat=e,this.oPositionManager.setDateFormat(e),this.reset()}destroy(){this.oLoading.destroy(),this.oBackground.destroy(),this.oTimelineData.destroy(),this.oPositionManager.destroy(),this.oStateLine.destroy(),this.oSelectionManager.destroy(),this.oXAxis.destroy(),this.oEvents.destroy()}}Ie.MAX_TIME_RANGE=6048e5,Ie.GROUP_TYPE={TOP_BASE:"TOP-BASE",CONTENT_BASE:"CONTENT-BASE",BOTTOM_BASE:"BOTTOM-BASE"},Ie.DRAWING_ORDER={background:0,"state-line":3,"selection-zone":5,"x-axis":10,events:10,"time-signboard":15,"selection-point":15,"left-handler":25,"right-handler":25,guide:30,loading:100},Ie.DEFAULT_STATUS_COLOR={BASE:"rgba(187, 187, 187, 0.3)",UNKNOWN:"rgba(220, 214, 214, 0.8)",RUNNING:"rgba(0, 158, 0, 0.4)",SHUTDOWN:"rgba(209, 82, 96, 0.7)",UNSTABLE_RUNNING:"rgba(255, 102, 0, 0.4)",EMPTY:"rgba(165, 219, 245, 0.7)"};class Re{constructor(e,t,n,l){this.newUrlStateNotificationService=e,this.storeHelperService=t,this.webAppSettingDataService=n,this.messageQueueService=l,this.sourceForServerAndAgentList=new he.a(null),this.sourceForTimeline=new T.b,this.sourceForAgentInfo=new T.b,this.sourceForChart=new T.b,this.sourceForServerAndAgentList$=this.sourceForServerAndAgentList.asObservable(),this.sourceForTimeline$=this.sourceForTimeline.asObservable(),this.sourceForAgentInfo$=this.sourceForAgentInfo.asObservable(),this.sourceForChart$=this.sourceForChart.asObservable()}activate(e){this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(S.a)(e),Object(re.a)(e=>{this.agentId=e.getPathValue(E.b.AGENT_ID)}),Object(C.a)(e=>{if(e.isRealTimeMode()){const t=e.getUrlServerTimeData();return[t-this.webAppSettingDataService.getSystemDefaultPeriod().getMiliSeconds(),t]}return[e.getStartTimeToNumber(),e.getEndTimeToNumber()]})).subscribe(e=>{this.notifyToServerAndAgentList(e)}),this.messageQueueService.receiveMessage(e,y.b.INSPECTOR_PAGE_VALID).pipe(Object(re.a)(()=>this.isFirstFlow=!this.timelineInfo)).subscribe(({range:e,now:t})=>{if(this.notifyToTimeline(e),this.isFirstFlow||this.shouldUpdateRange()||(this.notifyToAgentInfo(),this.notifyToChart()),this.newUrlStateNotificationService.isRealTimeMode()){const n=this.webAppSettingDataService.getChartRefreshInterval(E.a.INSPECTOR),l=e[1]+n,i=t>l,a=i?t:l,o=a-this.webAppSettingDataService.getSystemDefaultPeriod().getMiliSeconds(),s=i?0:l-t;this.notifyToServerAndAgentList([o,a],s)}}),this.storeHelperService.getInspectorTimelineData(e).pipe(Object(V.a)(()=>!this.isFirstFlow),Object(re.a)(e=>this.timelineInfo=e)).subscribe(()=>{this.notifyToAgentInfo(),this.notifyToChart()})}updateTimelineData(e){this.storeHelperService.dispatch(new N.a.UpdateTimelineData(e))}calcuRetrieveTime([e,t]){const n=Ie.MAX_TIME_RANGE,l=t-e;if(l>n)return[t-n,t];{const e=3*l;return[t-(e>n?n:e),t]}}shouldUpdateRange(){return this.newUrlStateNotificationService.isRealTimeMode()||this.newUrlStateNotificationService.isValueChanged(E.b.PERIOD)||this.newUrlStateNotificationService.isValueChanged(E.b.END_TIME)}notifyToTimeline(e){(this.isFirstFlow||this.shouldUpdateRange())&&this.updateTimelineData({range:this.calcuRetrieveTime(e),selectedTime:e[1],selectionRange:e}),this.sourceForTimeline.next({timelineInfo:this.timelineInfo,agentId:this.agentId})}notifyToServerAndAgentList(e,t=0){this.sourceForServerAndAgentList.next({range:e,agentId:this.agentId,emitAfter:t})}notifyToAgentInfo(){this.sourceForAgentInfo.next({selectedTime:this.timelineInfo.selectedTime,agentId:this.agentId})}notifyToChart(){this.sourceForChart.next({range:this.timelineInfo.selectionRange})}}var xe=n("un/a");class Me{constructor(e){this.http=e,this.url="getAgentList.pinpoint"}getData(e,t){return this.http.get(this.url,this.makeRequestOptionsArgs(e,t)).pipe(Object(xe.a)(3))}makeRequestOptionsArgs(e,[t,n]){return{params:{application:e,from:t,to:n}}}}var we=n("ueBd");class _e{constructor(e,t,n,l,i,a,o,s,r,u,c,h){this.newUrlStateNotificationService=e,this.urlRouteManagerService=t,this.webAppSettingDataService=n,this.storeHelperService=l,this.dynamicPopupService=i,this.analyticsService=a,this.componentFactoryResolver=o,this.injector=s,this.inspectorPageService=r,this.serverAndAgentListDataService=u,this.messageQueueService=c,this.translateService=h,this.unsubscribe=new T.b}ngOnInit(){this.initI18nText(),this.funcImagePath=this.webAppSettingDataService.getImagePathMakeFunc(),Object(le.a)(this.inspectorPageService.sourceForServerAndAgentList$.pipe(Object(S.a)(this.unsubscribe),Object(V.a)(e=>!!e),Object(oe.a)(e=>Object(ie.a)(()=>0===e.emitAfter,Object(ae.a)(e),Object(ae.a)(e).pipe(Object(se.a)(e.emitAfter)))),Object(re.a)(({agentId:e})=>{this.agentId=e}),Object(ue.a)(({range:e})=>{const t=this.newUrlStateNotificationService.getPathValue(E.b.APPLICATION).getApplicationName(),n=Date.now();return this.serverAndAgentListDataService.getData(t,e).pipe(Object(V.a)(e=>{if(this.agentId){const t=this.filterServerList(e,this.agentId,({agentId:e})=>this.agentId.toLowerCase()===e.toLowerCase());if(0!==Object.keys(t).length)return!0;{const e=this.newUrlStateNotificationService.isRealTimeMode()?[E.a.INSPECTOR,E.b.REAL_TIME,this.newUrlStateNotificationService.getPathValue(E.b.APPLICATION).getUrlStr()]:[E.a.INSPECTOR,this.newUrlStateNotificationService.getPathValue(E.b.APPLICATION).getUrlStr(),this.newUrlStateNotificationService.getPathValue(E.b.PERIOD).getValueWithTime(),this.newUrlStateNotificationService.getPathValue(E.b.END_TIME).getEndTime()];return this.urlRouteManagerService.moveOnPage({url:e}),!1}}return!0}),Object(re.a)(()=>{const t=Date.now()-n,l=e[1]+t;this.messageQueueService.sendMessage({to:y.b.INSPECTOR_PAGE_VALID,param:{range:e,now:l}})}))})),this.storeHelperService.getServerAndAgentQuery(this.unsubscribe)).subscribe(([e,t])=>{this.filteredServerList=this.filterServerList(e,t,({agentId:e})=>e.toLowerCase().includes(t.toLowerCase())),this.filteredServerKeyList=Object.keys(this.filteredServerList).sort(),this.isEmpty=Object(we.b)(this.filteredServerList)},e=>{this.dynamicPopupService.openPopup({data:{title:"Error",contents:e},component:ce.a},{resolver:this.componentFactoryResolver,injector:this.injector})})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}initI18nText(){this.emptyText$=this.translateService.get("COMMON.EMPTY_ON_SEARCH")}onSelectAgent(e){const t=this.newUrlStateNotificationService.isRealTimeMode()?[E.a.INSPECTOR,E.a.REAL_TIME,this.newUrlStateNotificationService.getPathValue(E.b.APPLICATION).getUrlStr(),e]:[E.a.INSPECTOR,this.newUrlStateNotificationService.getPathValue(E.b.APPLICATION).getUrlStr(),this.newUrlStateNotificationService.getPathValue(E.b.PERIOD).getValueWithTime(),this.newUrlStateNotificationService.getPathValue(E.b.END_TIME).getEndTime(),e];this.urlRouteManagerService.moveOnPage({url:t}),this.analyticsService.trackEvent(y.e.GO_TO_AGENT_INSPECTOR)}filterServerList(e,t,n){return""===t?e:Object.keys(e).reduce((t,l)=>{const i=e[l].filter(n);return 0!==i.length?Object.assign({},t,{[l]:i}):t},{})}}var De=n("kKeB"),Ae=[["[_nghost-%COMP%]{display:block;height:calc(100% - 71px);overflow-y:auto}.l-empty-text[_ngcontent-%COMP%]{font-size:14px;padding:7px 13px}"]],Ne=l["\u0275crt"]({encapsulation:0,styles:Ae,data:{}});function ke(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-server-and-agent-list",[],null,[[null,"outSelectAgent"]],(function(e,t,n){var l=!0,i=e.component;"outSelectAgent"===t&&(l=!1!==i.onSelectAgent(n)&&l);return l}),ne,K)),l["\u0275did"](2,114688,null,0,q,[],{funcImagePath:[0,"funcImagePath"],serverKeyList:[1,"serverKeyList"],serverList:[2,"serverList"],agentId:[3,"agentId"]},{outSelectAgent:"outSelectAgent"})],(function(e,t){var n=t.component;e(t,2,0,n.funcImagePath,n.filteredServerKeyList,n.filteredServerList,n.agentId)}),null)}function Le(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"p",[["class","l-empty-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""])),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],null,(function(e,t){var n=t.component;e(t,1,0,l["\u0275unv"](t,1,0,l["\u0275nov"](t,2).transform(n.emptyText$)))}))}function Fe(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,ke)),l["\u0275did"](1,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["\u0275and"](0,[["emptyText",2]],null,0,null,Le))],(function(e,t){var n=t.component;e(t,1,0,n.filteredServerList&&!n.isEmpty,l["\u0275nov"](t,2))}),null)}l["\u0275ccf"]("pp-server-and-agent-list-container",_e,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-server-and-agent-list-container",[],null,null,null,Fe,Ne)),l["\u0275did"](1,245760,null,0,_e,[I.a,Z.a,B.a,F.a,U.a,j.a,l.ComponentFactoryResolver,l.Injector,Re,Me,De.b,R.i],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);var je=n("m1dV"),Ue=n("QJdi"),ze=n("7rHv"),Ge=n("w1KT"),He=n("xcNo"),Ve=n("rgvr"),$e=n("vHCP"),Be=n("z/t1"),Ze=n("0fGH"),Xe=n("AMqW"),Ye=n("UQIx"),We=n("u41I"),qe=n("iInd");class Qe{constructor(e,t,n,l,i,a){this.inspectorPageService=e,this.newUrlStateNotificationService=t,this.analyticsService=n,this.dynamicPopupService=l,this.componentFactoryResolver=i,this.injector=a,this.unsubscribe=new T.b}ngOnInit(){this.showSideMenu$=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(C.a)(e=>e.isRealTimeMode()||e.hasValue(E.b.END_TIME))),this.inspectorPageService.activate(this.unsubscribe)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onShowHelp(e){this.analyticsService.trackEvent(y.e.TOGGLE_HELP_VIEWER,k.a.NAVBAR);const{left:t,top:n,width:l,height:i}=e.target.getBoundingClientRect();this.dynamicPopupService.openPopup({data:k.a.NAVBAR,coord:{coordX:t+l/2,coordY:n+i/2},component:k.b},{resolver:this.componentFactoryResolver,injector:this.injector})}}var Ke=[["[_nghost-%COMP%]{display:block;width:100%;height:100%}.l-widget-group[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-flex:1;flex:1;padding:0 15px;height:100%;-webkit-box-align:center;align-items:center}.l-main-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;height:calc(100vh - 50px);width:100%;overflow-y:hidden}.l-sidemenu-wrap[_ngcontent-%COMP%]{position:relative;height:100%}.l-sidemenu-left[_ngcontent-%COMP%]{width:250px;overflow:visible;border-right:1px solid #e5e8f0;background:#fff;height:100%}.l-main-section[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;background:#edf2f8;position:relative;height:100%;width:calc(100% - 250px)}.fa-question-circle[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin-right:15px}button[_ngcontent-%COMP%]{outline:0}.l-application-inspector-title-wrapper[_ngcontent-%COMP%]{border-bottom:1px solid #e0e7ee}"]],Je=l["\u0275crt"]({encapsulation:0,styles:Ke,data:{animation:[{type:7,name:"fadeInOut",definitions:[{type:0,name:"in",styles:{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},options:void 0},{type:1,expr:":leave",animation:[{type:4,styles:{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},timings:"1.5s 0.1s ease-in"}],options:null},{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:null,timings:"2s ease-out"}],options:null}],options:{}}]}});function et(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"section",[["class","l-sidemenu-wrap font-opensans"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","l-sidemenu-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"pp-agent-search-input-container",[],null,null,null,H,G)),l["\u0275did"](3,114688,null,0,L,[F.a,R.i,x.a,j.a,U.a,l.ComponentFactoryResolver,l.Injector],null,null),(e()(),l["\u0275eld"](4,0,null,null,2,"section",[["class","l-application-inspector-title-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"pp-application-inspector-title-container",[],null,null,null,W,Y)),l["\u0275did"](6,245760,null,0,$,[B.a,I.a,Z.a,j.a],null,null),(e()(),l["\u0275eld"](7,0,null,null,1,"pp-server-and-agent-list-container",[],null,null,null,Fe,Ne)),l["\u0275did"](8,245760,null,0,_e,[I.a,Z.a,B.a,F.a,U.a,j.a,l.ComponentFactoryResolver,l.Injector,Re,Me,De.b,R.i],null,null)],(function(e,t){e(t,3,0),e(t,6,0),e(t,8,0)}),null)}function tt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-notice-container",[],null,null,null,je.b,je.a)),l["\u0275did"](1,114688,null,0,Ue.a,[l.ElementRef,l.Renderer2,ze.a],null,null),(e()(),l["\u0275eld"](2,0,null,null,10,"header",[["class","flex-container flex-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"pp-header-logo",[],null,null,null,Ge.b,Ge.a)),l["\u0275did"](4,114688,null,0,He.a,[B.a,j.a],null,null),(e()(),l["\u0275eld"](5,0,null,null,4,"div",[["class","l-widget-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"pp-application-list-for-header-container",[],null,null,null,Ve.b,Ve.a)),l["\u0275did"](7,4440064,null,0,$e.a,[l.ChangeDetectorRef,F.a,B.a,Be.a,I.a,Z.a,R.i,j.a,l.Renderer2],null,null),(e()(),l["\u0275eld"](8,0,null,null,1,"pp-period-selector-container",[],null,null,null,Ze.b,Ze.a)),l["\u0275did"](9,245760,null,0,Xe.a,[B.a,F.a,I.a,Z.a,R.i,x.a,j.a,l.ChangeDetectorRef],null,null),(e()(),l["\u0275eld"](10,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onShowHelp(n)&&l);return l}),null,null)),(e()(),l["\u0275eld"](11,0,null,null,1,"pp-configuration-icon-container",[],null,null,null,Ye.b,Ye.a)),l["\u0275did"](12,114688,null,0,We.a,[U.a,j.a,l.ComponentFactoryResolver,l.Injector],null,null),(e()(),l["\u0275eld"](13,0,null,null,6,"div",[["class","l-main-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,2,null,et)),l["\u0275did"](15,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](17,0,null,null,2,"section",[["class","l-main-section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l["\u0275did"](19,212992,null,0,qe.r,[qe.b,l.ViewContainerRef,l.ComponentFactoryResolver,[8,null],l.ChangeDetectorRef],null,null)],(function(e,t){var n=t.component;e(t,1,0),e(t,4,0),e(t,7,0),e(t,9,0),e(t,12,0),e(t,15,0,l["\u0275unv"](t,15,0,l["\u0275nov"](t,16).transform(n.showSideMenu$))),e(t,19,0)}),null)}var nt=l["\u0275ccf"]("pp-inspector-page",Qe,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"pp-inspector-page",[],null,null,null,tt,Je)),l["\u0275prd"](512,null,Re,Re,[I.a,F.a,B.a,De.b]),l["\u0275did"](2,245760,null,0,Qe,[Re,I.a,j.a,U.a,l.ComponentFactoryResolver,l.Injector],null,null)],(function(e,t){e(t,2,0)}),null)}),{},{},[]),lt=n("KSFr"),it=n("cUpR"),at=n("uidH");class ot{constructor(e){this.translateService=e}ngOnInit(){this.guideMessage$=this.translateService.get("INSPECTOR.APPLICATION_INSPECTOR_USAGE_GUIDE_MESSAGE")}}var st=[["[_nghost-%COMP%]{display:block;height:100%}.l-guide-wrapper[_ngcontent-%COMP%]{width:480px;height:200px;margin:auto;position:relative;top:35%;background-color:#fff;padding:15px 20px;border-radius:3px;line-height:200%}.l-guide-title[_ngcontent-%COMP%]{text-align:center;font-size:30px;padding:25px 0}.l-guide-title[_ngcontent-%COMP%] > .fas[_ngcontent-%COMP%]{font-size:30px;margin-right:5px}.l-guide-text[_ngcontent-%COMP%]{text-align:center}"]],rt=l["\u0275crt"]({encapsulation:0,styles:st,data:{}});function ut(e){return l["\u0275vid"](0,[l["\u0275pid"](0,lt.a,[it.b]),l["\u0275pid"](0,at.a,[B.a]),(e()(),l["\u0275eld"](2,0,null,null,7,"section",[["class","l-guide-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"h4",[["class","l-guide-title"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[["class","fas fa-exclamation-circle"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Warning"])),(e()(),l["\u0275eld"](6,0,null,null,3,"p",[["class","l-guide-text"]],[[8,"innerHTML",1]],null,null,null,null)),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275ppd"](8,1),l["\u0275ppd"](9,1)],null,(function(e,t){var n=t.component,i=l["\u0275unv"](t,6,0,e(t,9,0,l["\u0275nov"](t,0),l["\u0275unv"](t,6,0,e(t,8,0,l["\u0275nov"](t,1),l["\u0275unv"](t,6,0,l["\u0275nov"](t,7).transform(n.guideMessage$))))));e(t,6,0,i)}))}l["\u0275ccf"]("pp-application-inspector-usage-guide-container",ot,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-inspector-usage-guide-container",[],null,null,null,ut,rt)),l["\u0275did"](1,114688,null,0,ot,[R.i],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);class ct{constructor(e){this.messageQueueService=e}ngOnInit(){}onClickZoomIn(){this.messageQueueService.sendMessage({to:y.b.TIMELINE_ZOOM_IN})}onClickZoomOut(){this.messageQueueService.sendMessage({to:y.b.TIMELINE_ZOOM_OUT})}onClickPrev(){this.messageQueueService.sendMessage({to:y.b.TIMELINE_MOVE_PREV})}onClickNext(){this.messageQueueService.sendMessage({to:y.b.TIMELINE_MOVE_NEXT})}onClickNow(){this.messageQueueService.sendMessage({to:y.b.TIMELINE_MOVE_NOW})}}var ht=[["[_nghost-%COMP%]{display:-webkit-box;display:flex}.l-current-time[_ngcontent-%COMP%]{height:28px;display:-webkit-box;display:flex}.l-current-time[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;cursor:pointer;height:100%;display:inline-block;padding:7px 10px;font-size:13px;font-weight:600;background-color:var(--primary-color)}.l-current-time[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:180px;height:100%;border:1px solid var(--primary-color);display:inline-block;font-size:13px;text-align:center;background-color:#fff}.l-command-group[_ngcontent-%COMP%]{display:inline-block}.l-command-group[_ngcontent-%COMP%]:first-child{margin-right:30px}.l-command-group[_ngcontent-%COMP%]:nth-child(2){margin-right:10px}.l-command-group[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%]{font-size:14px;text-decoration:underline}.l-command-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0}"]],dt=l["\u0275crt"]({encapsulation:0,styles:ht,data:{}});function pt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","l-command-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","l-current-time"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"label",[],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickNow()&&l);return l}),null,null)),(e()(),l["\u0275ted"](-1,null,["NOW"])),(e()(),l["\u0275eld"](4,0,null,null,0,"input",[["readonly",""],["type","text"]],[[8,"value",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,4,"div",[["class","l-command-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickZoomIn()&&l);return l}),null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[["class","fas fa-plus"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickZoomOut()&&l);return l}),null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","fas fa-minus"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,6,"div",[["class","l-command-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickPrev()&&l);return l}),null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"span",[["class","fas fa-backward"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickNext()&&l);return l}),null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"span",[["class","fas fa-forward"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,1,"button",[["class","btn btn-sm btn-blue"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickNow()&&l);return l}),null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"span",[["class","fas fa-fast-forward"]],null,null,null,null,null))],null,(function(e,t){var n=t.component;e(t,4,0,l["\u0275inlineInterpolate"](1,"",n.pointingTime,""))}))}l["\u0275ccf"]("pp-timeline-command-group",ct,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-timeline-command-group",[],null,null,null,pt,dt)),l["\u0275did"](1,114688,null,0,ct,[De.b],null,null)],(function(e,t){e(t,1,0)}),null)}),{pointingTime:"pointingTime"},{},[]);class gt{constructor(e){this.storeHelperService=e,this.unsubscribe=new T.b}ngOnInit(){this.connectStore()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}connectStore(){this.pointingTime$=Object(le.a)(this.storeHelperService.getDateFormat(this.unsubscribe,0),this.storeHelperService.getTimezone(this.unsubscribe),this.storeHelperService.getInspectorTimelineSelectedTime(this.unsubscribe).pipe(Object(V.a)(e=>0!==e))).pipe(Object(C.a)(([e,t,n])=>ve(n).tz(t).format(e)))}}var mt=[["[_nghost-%COMP%]{display:block}.l-command-group[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:5px 12px;-webkit-box-pack:end;justify-content:flex-end;background-color:#f5f5f5}"]],ft=l["\u0275crt"]({encapsulation:0,styles:mt,data:{}});function vt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","l-command-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"pp-timeline-command-group",[],null,null,null,pt,dt)),l["\u0275did"](2,114688,null,0,ct,[De.b],{pointingTime:[0,"pointingTime"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,2,0,l["\u0275unv"](t,2,0,l["\u0275nov"](t,3).transform(n.pointingTime$)))}),null)}l["\u0275ccf"]("pp-timeline-command-group-container",gt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-timeline-command-group-container",[],null,null,null,vt,ft)),l["\u0275did"](1,245760,null,0,gt,[F.a],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);class bt{constructor(e,t){this.hostElRef=e,this.renderer=t,this.outChangeTimelineUIEvent=new l.EventEmitter,this.outSelectEventStatus=new l.EventEmitter}ngOnInit(){this.renderer.setStyle(this.hostElRef.nativeElement,"display","block")}ngOnChanges(e){e.data&&e.data.currentValue&&this.initTimeline(),e.timezone&&this.timeline&&this.timeline.setTimezone(this.timezone),e.dateFormat&&this.timeline&&this.timeline.setDateFormat(this.dateFormat)}initTimeline(){this.timeline?(this.timeline.resetTimeRangeAndSelectionZone([this.selectionStartTime,this.selectionEndTime],[this.timelineStartTime,this.timelineEndTime],this.pointingTime),this.timeline.addData(this.data)):(this.timeline=new Ie(this.el.nativeElement,{width:this.hostElRef.nativeElement.offsetWidth,height:this.height,timelineRange:[this.timelineStartTime,this.timelineEndTime],selectionTimeRange:[this.selectionStartTime,this.selectionEndTime],pointingTime:this.pointingTime,timelineData:this.data,timezone:this.timezone,dateFormat:this.dateFormat,statusColor:{BASE:"rgba(187, 187, 187, .3)",UNKNOWN:"rgba(220, 214, 214, .8)",RUNNING:"rgba(0, 158, 0, .4 )",SHUTDOWN:"rgba(209, 82, 96, .7)",UNSTABLE_RUNNING:"rgba(255, 102, 0, .4)",EMPTY:"rgba(165, 219, 245, .7)"}}),this.timeline.onSelectEventStatus$.subscribe(e=>{this.outSelectEventStatus.emit(e)}),this.timeline.onChangeTimelineUIEvent$.subscribe(e=>{this.outChangeTimelineUIEvent.emit(e)}))}zoomIn(){this.timeline.zoomIn()}zoomOut(){this.timeline.zoomOut()}movePrev(){this.timeline.movePrev()}moveNext(){this.timeline.moveNext()}moveNow(){this.timeline.moveHead()}getTimelineRange(){return this.timeline.getTimelineRange()}updateData(e){this.timeline.addData(e)}ngOnDestroy(){}}var Tt=[[":host{display:block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.l-timeline-svg{width:100%}.l-timeline-svg text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.hide{display:none}.background rect{fill:#eee}.selection-zone rect{fill:rgba(255,255,255,.5)}.x-axis text{font-size:12px;text-anchor:middle}.x-axis line{stroke:#fff;stroke-width:.5;stroke-linecap:square}.left-handler rect,.right-handler rect{fill:#fff}.left-handler line,.right-handler line{stroke:#000;stroke-width:2}.guide line{stroke:red;stroke-width:.5;stroke-linecap:square;stroke-dasharray:2,2}.guide circle{stroke:red;stroke-width:2}.selection-point line{stroke:#ff0;stroke-width:1}.selection-point circle{fill:#ff0;stroke:#000;stroke-width:2}.events line{stroke:#000;stroke-width:1}.events circle{fill:#bdb76b}.events text{fill:#fff;font-size:11px}.event,image{cursor:pointer}.loading{fill:rgba(170,170,170,.1)}.loading rect{stroke-width:2px}.loading rect:nth-child(2){stroke:rgba(197,197,197,.9)}.loading rect:nth-child(3){stroke:rgba(239,246,105,.9)}.time-left-signboard text,.time-right-signboard text{fill:#000;font-size:13px}.time-series-signboard text{fill:#bbb}"]],St=l["\u0275crt"]({encapsulation:2,styles:Tt,data:{}});function Ct(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{el:0}),(e()(),l["\u0275eld"](1,0,[[1,0],["timeline",1]],null,0,":svg:svg",[["class","l-timeline-svg"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("pp-timeline",bt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-timeline",[],null,null,null,Ct,St)),l["\u0275did"](1,770048,null,0,bt,[l.ElementRef,l.Renderer2],null,null)],(function(e,t){e(t,1,0)}),null)}),{data:"data",height:"height",pointingTime:"pointingTime",timelineStartTime:"timelineStartTime",timelineEndTime:"timelineEndTime",selectionStartTime:"selectionStartTime",selectionEndTime:"selectionEndTime",timezone:"timezone",dateFormat:"dateFormat"},{outChangeTimelineUIEvent:"outChangeTimelineUIEvent",outSelectEventStatus:"outSelectEventStatus"},[]);class Ot{constructor(e,t,n,l){this.storeHelperService=e,this.messageQueueService=t,this.analyticsService=n,this.inspectorPageService=l,this.unsubscribe=new T.b}ngOnInit(){this.connectStore(),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_ZOOM_IN).subscribe(()=>{this.analyticsService.trackEvent(y.e.ZOOM_IN_TIMELINE),this.timelineComponent.zoomIn()}),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_ZOOM_OUT).subscribe(()=>{this.analyticsService.trackEvent(y.e.ZOOM_OUT_TIMELINE),this.timelineComponent.zoomOut()}),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_MOVE_PREV).subscribe(()=>{this.analyticsService.trackEvent(y.e.MOVE_TO_PREV_ON_TIMELINE),this.timelineComponent.movePrev()}),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_MOVE_NEXT).subscribe(()=>{this.analyticsService.trackEvent(y.e.MOVE_TO_PREV_ON_TIMELINE),this.timelineComponent.moveNext()}),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_MOVE_NOW).subscribe(()=>{this.analyticsService.trackEvent(y.e.MOVE_TO_NOW_ON_TIMELINE),this.timelineComponent.moveNow()}),this.inspectorPageService.sourceForTimeline$.pipe(Object(S.a)(this.unsubscribe)).subscribe(({timelineInfo:{range:e,selectionRange:t,selectedTime:n}})=>{this.timelineStartTime=e[0],this.timelineEndTime=e[1],this.selectionStartTime=t[0],this.selectionEndTime=t[1],this.pointingTime=n,this.timelineData={agentStatusTimeline:{timelineSegments:[{startTimestamp:e[0],endTimestamp:e[1],value:"EMPTY"}],includeWarning:!1},agentEventTimeline:{timelineSegments:[]}}})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}connectStore(){this.timezone$=this.storeHelperService.getTimezone(this.unsubscribe),this.dateFormat$=this.storeHelperService.getDateFormatArray(this.unsubscribe,0,6,7)}onSelectEventStatus(e){}onChangeTimelineUIEvent(e){e.changedSelectedTime&&this.analyticsService.trackEvent(y.e.CHANGE_POINTING_TIME_ON_TIMELINE),e.changedSelectionRange&&this.analyticsService.trackEvent(y.e.CHANGE_SELECTION_RANGE_ON_TIMELINE),this.inspectorPageService.updateTimelineData(e.data)}}var yt=[["[_nghost-%COMP%]{display:block;margin:18px 12px 0}"]],Et=l["\u0275crt"]({encapsulation:0,styles:yt,data:{}});function Pt(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{timelineComponent:0}),(e()(),l["\u0275eld"](1,0,null,null,3,"pp-timeline",[],null,[[null,"outSelectEventStatus"],[null,"outChangeTimelineUIEvent"]],(function(e,t,n){var l=!0,i=e.component;"outSelectEventStatus"===t&&(l=!1!==i.onSelectEventStatus(n)&&l);"outChangeTimelineUIEvent"===t&&(l=!1!==i.onChangeTimelineUIEvent(n)&&l);return l}),Ct,St)),l["\u0275did"](2,770048,[[1,4]],0,bt,[l.ElementRef,l.Renderer2],{data:[0,"data"],height:[1,"height"],pointingTime:[2,"pointingTime"],timelineStartTime:[3,"timelineStartTime"],timelineEndTime:[4,"timelineEndTime"],selectionStartTime:[5,"selectionStartTime"],selectionEndTime:[6,"selectionEndTime"],timezone:[7,"timezone"],dateFormat:[8,"dateFormat"]},{outChangeTimelineUIEvent:"outChangeTimelineUIEvent",outSelectEventStatus:"outSelectEventStatus"}),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,2,0,n.timelineData,90,n.pointingTime,n.timelineStartTime,n.timelineEndTime,n.selectionStartTime,n.selectionEndTime,l["\u0275unv"](t,2,7,l["\u0275nov"](t,3).transform(n.timezone$)),l["\u0275unv"](t,2,8,l["\u0275nov"](t,4).transform(n.dateFormat$)))}),null)}l["\u0275ccf"]("pp-application-inspector-timeline-container",Ot,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-inspector-timeline-container",[],null,null,null,Pt,Et)),l["\u0275did"](1,245760,null,0,Ot,[F.a,De.b,j.a,Re],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);class It{constructor(){this.outClickOption=new l.EventEmitter}ngOnInit(){this.activeOption=this.chartNumPerRow}onClickOption(e){e!==this.activeOption&&(this.activeOption=e,this.outClickOption.emit(e))}isActive(e){return this.activeOption===e}}var Rt=[["[_nghost-%COMP%]{display:block}.l-layout-option-button[_ngcontent-%COMP%]{color:#495057;padding:8px;outline:0}.l-layout-option-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.l-layout-option-button[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.l-layout-option-button.active[_ngcontent-%COMP%]{color:var(--primary-color)!important}"]],xt=l["\u0275crt"]({encapsulation:0,styles:Rt,data:{}});function Mt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","l-layout-option-button"]],[[2,"active",null]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickOption(2)&&l);return l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-th-large"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"button",[["class","l-layout-option-button"]],[[2,"active",null]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickOption(3)&&l);return l}),null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["class","fas fa-th"]],null,null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.isActive(2)),e(t,2,0,n.isActive(3))}))}l["\u0275ccf"]("pp-chart-layout-option",It,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-chart-layout-option",[],null,null,null,Mt,xt)),l["\u0275did"](1,114688,null,0,It,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{chartNumPerRow:"chartNumPerRow"},{outClickOption:"outClickOption"},[]);class wt{constructor(e,t,n){this.webAppSettingDataService=e,this.messageQueueService=t,this.analyticsService=n}ngOnInit(){this.storedChartLayoutOption=this.webAppSettingDataService.getChartLayoutOption()}onClickOption(e){this.webAppSettingDataService.setChartLayoutOption(e),this.messageQueueService.sendMessage({to:y.b.INSPECTOR_CHART_SET_LAYOUT,param:e}),this.analyticsService.trackEvent(y.e.CLICK_INSPECTOR_CHART_LAYOUT_OPTION,`Chart Number Per Row: ${e}`)}}var _t=[["[_nghost-%COMP%]{display:block}"]],Dt=l["\u0275crt"]({encapsulation:0,styles:_t,data:{}});function At(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-chart-layout-option",[],null,[[null,"outClickOption"]],(function(e,t,n){var l=!0,i=e.component;"outClickOption"===t&&(l=!1!==i.onClickOption(n)&&l);return l}),Mt,xt)),l["\u0275did"](1,114688,null,0,It,[],{chartNumPerRow:[0,"chartNumPerRow"]},{outClickOption:"outClickOption"})],(function(e,t){e(t,1,0,t.component.storedChartLayoutOption)}),null)}l["\u0275ccf"]("pp-chart-layout-option-container",wt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-chart-layout-option-container",[],null,null,null,At,Dt)),l["\u0275did"](1,114688,null,0,wt,[B.a,De.b,j.a],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);var Nt,kt=n("lreY"),Lt=n("fqV1"),Ft=n("Q4w0"),jt=n("3QGz"),Ut=n("SIFb"),zt=n("xW4L"),Gt=n("z7my"),Ht=n("cp0P"),Vt=n("JIr8"),$t=n("1o/0"),Bt=n("VKJE");!function(e){e.LOADING="loading",e.RETRY="retry",e.CHART="chart"}(Nt||(Nt={}));class Zt{constructor(e,t,n,l,i,a,o,s,r){this.storeHelperService=e,this.inspectorChartDataService=t,this.translateService=n,this.analyticsService=l,this.dynamicPopupService=i,this.componentFactoryResolver=a,this.injector=o,this.inspectorPageService=s,this.messageQueueService=r,this.unsubscribe=new T.b,this.chartVisibility={},this._activeLayer=Nt.LOADING}set chartType(e){this._chartType=e,this.chartContainer=Bt.b.createInspectorChartContainer(e,this.inspectorChartDataService)}get chartType(){return this._chartType}ngOnInit(){this.initI18nText(),this.initTimezoneAndDateFormat(),this.initChartData()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}initI18nText(){Object(Ht.a)(this.translateService.get("COMMON.FAILED_TO_FETCH_DATA"),this.translateService.get("COMMON.NO_DATA")).subscribe(([e,t])=>{this.dataFetchFailedText=e,this.dataEmptyText=t})}initTimezoneAndDateFormat(){Object(le.a)(this.storeHelperService.getTimezone(this.unsubscribe),this.storeHelperService.getDateFormatArray(this.unsubscribe,4,5)).subscribe(([e,t])=>{this.timezone=e,this.dateFormat=t})}set activeLayer(e){this._activeLayer=e,this.setChartVisibility(this._activeLayer===Nt.CHART)}get activeLayer(){return this._activeLayer}onRendered(){this.activeLayer=Nt.CHART}onMouseMove({clientY:e,target:t}){const{height:n,top:l}=t.getBoundingClientRect(),i=(e-l)/n;this.messageQueueService.sendMessage({to:y.b.INSPECTOR_CHART_MOUSE_MOVE,param:i})}initChartData(){this.inspectorPageService.sourceForChart$.pipe(Object(S.a)(this.unsubscribe),Object(re.a)(()=>this.activeLayer=Nt.LOADING),Object(re.a)(({range:e})=>this.previousRange=e),Object(oe.a)(({range:e})=>this.chartContainer.getData(e).pipe(Object(Vt.a)(()=>Object(ae.a)(null))))).subscribe(e=>this.chartDataResCallbackFn(e))}setChartVisibility(e){this.chartVisibility={"show-chart":e,"shady-chart":!e&&void 0!==this.chartConfig}}isActiveLayer(e){return this.activeLayer===e}onRetry(){this.activeLayer=Nt.LOADING,this.chartContainer.getData(this.previousRange).pipe(Object(Vt.a)(()=>Object(ae.a)(null))).subscribe(e=>this.chartDataResCallbackFn(e))}chartDataResCallbackFn(e){null===e||Object(we.c)(e,"exception")?(this.activeLayer=Nt.RETRY,this.setRetryMessage(e)):this.setChartConfig(this.makeChartData(e))}setChartConfig(e){this.chartConfig={dataConfig:this.makeDataOption(e),elseConfig:this.makeElseOption(e)},this.isDataEmpty=this.isEmpty(e)}setRetryMessage(e){this.retryMessage=e?e.exception.message:this.dataFetchFailedText}isEmpty(e){return 0===e.length||e.slice(1).every(e=>1===e.length)}makeChartData(e){return this.chartContainer.makeChartData(e)}makeDataOption(e){return Object.assign({x:"x",columns:e,empty:{label:{text:this.dataEmptyText}}},this.chartContainer.makeDataOption())}makeElseOption(e){return Object.assign({padding:{top:20,bottom:15,right:45},axis:Object.assign({x:{type:"timeseries",tick:{count:4,format:e=>ve(e).tz(this.timezone).format(this.dateFormat[0])+"\n"+ve(e).tz(this.timezone).format(this.dateFormat[1])},padding:{left:0,right:0}}},this.chartContainer.makeYAxisOptions(e)),point:{r:0,focus:{expand:{r:3}}},resize:{auto:!1},tooltip:{linked:!0,format:{value:(e,t,n,l)=>this.chartContainer.getTooltipFormat(e,n,l)},order:""},transition:{duration:0},zoom:{enabled:{type:"drag"}}},this.chartContainer.makeElseOption())}onShowHelp(e){this.analyticsService.trackEvent(y.e.TOGGLE_HELP_VIEWER,this.chartType);const{left:t,top:n,width:l,height:i}=e.target.getBoundingClientRect();this.dynamicPopupService.openPopup({data:k.a[this.chartType],coord:{coordX:t+l/2,coordY:n+i/2},component:k.b},{resolver:this.componentFactoryResolver,injector:this.injector})}}var Xt=[["[_nghost-%COMP%]{display:block;width:100%}.l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background:#f6f8fb}.l-title-group[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{font-size:18px;color:#a8acb5;cursor:pointer}.l-chart-area-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}"]],Yt=l["\u0275crt"]({encapsulation:0,styles:Xt,data:{}});function Wt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.chartContainer.title)}))}function qt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Wt)),l["\u0275did"](2,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onShowHelp(n)&&l);return l}),null,null)),(e()(),l["\u0275eld"](4,0,null,null,8,"div",[["class","l-chart-area-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"pp-loading",[],null,null,null,kt.b,kt.a)),l["\u0275did"](6,114688,null,0,Lt.a,[l.ElementRef,l.Renderer2],{showLoading:[0,"showLoading"],zIndex:[1,"zIndex"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"pp-retry",[],null,[[null,"outRetry"]],(function(e,t,n){var l=!0,i=e.component;"outRetry"===t&&(l=!1!==i.onRetry()&&l);return l}),Ft.b,Ft.a)),l["\u0275did"](8,114688,null,0,jt.a,[],{showRetry:[0,"showRetry"],message:[1,"message"]},{outRetry:"outRetry"}),(e()(),l["\u0275eld"](9,0,null,null,3,"pp-inspector-chart",[],null,[[null,"outRendered"],[null,"mousemove"]],(function(e,t,n){var l=!0,i=e.component;"outRendered"===t&&(l=!1!==i.onRendered()&&l);"mousemove"===t&&(l=!1!==i.onMouseMove(n)&&l);return l}),Ut.b,Ut.a)),l["\u0275prd"](512,null,h["\u0275NgClassImpl"],h["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](11,278528,null,0,h.NgClass,[h["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["\u0275did"](12,770048,null,0,zt.a,[De.b,Gt.a,I.a,l.ElementRef,l.Renderer2],{chartConfig:[0,"chartConfig"]},{outRendered:"outRendered"})],(function(e,t){var n=t.component;e(t,2,0,n.chartContainer);e(t,6,0,n.isActiveLayer("loading"),10),e(t,8,0,n.isActiveLayer("retry"),n.retryMessage),e(t,11,0,n.chartVisibility),e(t,12,0,n.chartConfig)}),null)}l["\u0275ccf"]("pp-inspector-chart-container",Zt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](1,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],null,null)],(function(e,t){e(t,1,0)}),null)}),{chartType:"chartType"},{},[]);class Qt{constructor(){this.outSourceDataSelected=new l.EventEmitter,this.selectedIndex=0}ngOnInit(){}ngOnChanges(e){Object.keys(e).map(e=>{switch(e){case"data":this.initSelectedIndex()}})}initSelectedIndex(){this.selectedIndex=0}isItemSelected(e){return e===this.selectedIndex}selectSource(e){this.selectedIndex=e,this.outSourceDataSelected.emit(this.selectedIndex)}onClickSourceList(e){e!==this.selectedIndex&&this.selectSource(e)}}var Kt=[[".l-sourcelist-wrapper[_ngcontent-%COMP%]{background-color:#fff;font-size:12px;padding:10px}.l-sourcelist-title[_ngcontent-%COMP%]{background-color:#f6f8fb;border-top:1px solid #ddd;border-left:1px solid #ddd;border-right:1px solid #ddd;padding:10px}.l-source-data-list[_ngcontent-%COMP%]{border:1px solid #ddd}.l-source-data-list-item[_ngcontent-%COMP%]{cursor:pointer;color:#ddd;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.l-source-data-list-item[_ngcontent-%COMP%]:hover{background-color:#ddd;color:#fff}.l-selected-item[_ngcontent-%COMP%]{color:#000;font-weight:600}.l-selected-item[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000}.l-source-data-list-item[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{width:7%;text-align:center}.l-source-data-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:space-evenly;justify-content:space-evenly;-webkit-box-align:center;align-items:center;border-left:1px solid #ddd;padding:7px 0 7px 7px;width:93%}.l-service-type-wrapper[_ngcontent-%COMP%]{display:inline-block;width:10%;overflow-wrap:break-word}.l-jdbc-url-wrapper[_ngcontent-%COMP%]{display:inline-block;width:85%;overflow-wrap:break-word}"]],Jt=l["\u0275crt"]({encapsulation:0,styles:Kt,data:{}});function en(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","l-source-data-list-item"]],[[2,"l-selected-item",null]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickSourceList(e.context.index)&&l);return l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[["class","fas fa-check"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","l-source-data-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"span",[["class","l-service-type-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,["",""])),(e()(),l["\u0275eld"](5,0,null,null,1,"span",[["class","l-jdbc-url-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275ted"](6,null,["",""]))],null,(function(e,t){e(t,0,0,t.component.isItemSelected(t.context.index)),e(t,4,0,t.context.$implicit.serviceType),e(t,6,0,t.context.$implicit.jdbcUrl)}))}function tn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","l-sourcelist-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"h4",[["class","l-sourcelist-title"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Data Source List"])),(e()(),l["\u0275eld"](3,0,null,null,2,"ul",[["class","l-source-data-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,en)),l["\u0275did"](5,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,5,0,t.component.data)}),null)}l["\u0275ccf"]("pp-application-data-source-chart-sourcelist",Qt,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-data-source-chart-sourcelist",[],null,null,null,tn,Jt)),l["\u0275did"](1,638976,null,0,Qt,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{data:"data"},{outSourceDataSelected:"outSourceDataSelected"},[]);var nn=n("6oKA"),ln=n("0C/I");class an{constructor(e,t,n,l,i,a,o,s){this.storeHelperService=e,this.inspectorChartDataService=t,this.translateService=n,this.analyticsService=l,this.dynamicPopupService=i,this.componentFactoryResolver=a,this.injector=o,this.inspectorPageService=s,this.unsubscribe=new T.b,this.defaultYMax=4,this.chartVisibility={},this._activeLayer=Nt.LOADING}ngOnInit(){this.initI18nText(),this.initTimezoneAndDateFormat(),this.initChartData()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}initI18nText(){Object(Ht.a)(this.translateService.get("COMMON.FAILED_TO_FETCH_DATA"),this.translateService.get("COMMON.NO_DATA")).subscribe(([e,t])=>{this.dataFetchFailedText=e,this.dataEmptyText=t})}initTimezoneAndDateFormat(){Object(le.a)(this.storeHelperService.getTimezone(this.unsubscribe),this.storeHelperService.getDateFormatArray(this.unsubscribe,4,5)).subscribe(([e,t])=>{this.timezone=e,this.dateFormat=t})}set activeLayer(e){this._activeLayer=e,this.setChartVisibility(this._activeLayer===Nt.CHART)}get activeLayer(){return this._activeLayer}onRendered(){this.activeLayer=Nt.CHART}initChartData(){this.inspectorPageService.sourceForChart$.pipe(Object(S.a)(this.unsubscribe),Object(re.a)(()=>this.activeLayer=Nt.LOADING),Object(re.a)(({range:e})=>this.previousRange=e),Object(oe.a)(({range:e})=>this.inspectorChartDataService.getData(e).pipe(Object(Vt.a)(()=>Object(ae.a)(null))))).subscribe(e=>this.chartDataResCallbackFn(e))}setChartVisibility(e){this.chartVisibility={"show-chart":e,"shady-chart":!e&&void 0!==this.chartConfig}}isActiveLayer(e){return this.activeLayer===e}onRetry(){this.activeLayer=Nt.LOADING,this.inspectorChartDataService.getData(this.previousRange).pipe(Object(Vt.a)(()=>Object(ae.a)(null))).subscribe(e=>this.chartDataResCallbackFn(e))}onSourceDataSelected(e){this.activeLayer=Nt.LOADING,this.setMinMaxAgentIdList(this.chartData[e]),this.setChartConfig(this.makeChartData(this.chartData[e]))}chartDataResCallbackFn(e){null===e||Object(we.c)(e,"exception")?(this.activeLayer=Nt.RETRY,this.setRetryMessage(e)):(this.chartData=e,this.sourceForList=e.map(({serviceType:e,jdbcUrl:t})=>({serviceType:e,jdbcUrl:t})),this.setMinMaxAgentIdList(e[0]),this.setChartConfig(this.makeChartData(e[0])))}setChartConfig(e){this.chartConfig={dataConfig:this.makeDataOption(e),elseConfig:this.makeElseOption(e)},this.isDataEmpty=this.isEmpty(e)}setRetryMessage(e){this.retryMessage=e?e.exception.message:this.dataFetchFailedText}isEmpty(e){return 0===e.length||e.slice(1).every(e=>1===e.length)}setMinMaxAgentIdList(e){this.minAgentIdList=e.charts.y.ACTIVE_CONNECTION_SIZE.map(e=>e[1]),this.maxAgentIdList=e.charts.y.ACTIVE_CONNECTION_SIZE.map(e=>e[3])}makeChartData({charts:e}){return[["x",...Object(ln.c)(e.x)],["min",...Object(ln.d)(e.y.ACTIVE_CONNECTION_SIZE,0)],["avg",...Object(ln.d)(e.y.ACTIVE_CONNECTION_SIZE,4)],["max",...Object(ln.d)(e.y.ACTIVE_CONNECTION_SIZE,2)]]}makeDataOption(e){return{x:"x",columns:e,type:"spline",names:{min:"Min",avg:"Avg",max:"Max"},colors:{min:"#66B2FF",avg:"#4C0099",max:"#0000CC"},empty:{label:{text:this.dataEmptyText}}}}makeElseOption(e){return{line:{classes:["min","avg","max"]},padding:{top:20,bottom:15,right:45},axis:{x:{type:"timeseries",tick:{count:4,format:e=>ve(e).tz(this.timezone).format(this.dateFormat[0])+"\n"+ve(e).tz(this.timezone).format(this.dateFormat[1])},padding:{left:0,right:0}},y:{label:{text:"Connection (count)",position:"outer-middle"},tick:{count:5},padding:{top:0,bottom:0},min:0,max:(()=>{const t=Object(ln.a)(e,1);return 0===t?this.defaultYMax:t})(),default:[0,this.defaultYMax]}},point:{r:0,focus:{expand:{r:3}}},tooltip:{linked:!0,format:{value:(e,t,n,l)=>e<0?"-":`${e} ${this.getAgentId(n,l)}`}},transition:{duration:0},zoom:{enabled:{type:"drag"}}}}getAgentId(e,t){return"avg"===e?"":`(${"min"===e?this.minAgentIdList[t]:this.maxAgentIdList[t]})`}onShowHelp(e){this.analyticsService.trackEvent(y.e.TOGGLE_HELP_VIEWER,k.a.APPLICATION_DATA_SOURCE);const{left:t,top:n,width:l,height:i}=e.target.getBoundingClientRect();this.dynamicPopupService.openPopup({data:k.a.APPLICATION_DATA_SOURCE,coord:{coordX:t+l/2,coordY:n+i/2},component:k.b},{resolver:this.componentFactoryResolver,injector:this.injector})}}var on=[["[_nghost-%COMP%]{display:block}.l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background:#f6f8fb}.l-title-group[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{font-size:18px;color:#a8acb5;cursor:pointer}.l-chart-area-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}"]],sn=l["\u0275crt"]({encapsulation:0,styles:on,data:{}});function rn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-application-data-source-chart-sourcelist",[],null,[[null,"outSourceDataSelected"]],(function(e,t,n){var l=!0,i=e.component;"outSourceDataSelected"===t&&(l=!1!==i.onSourceDataSelected(n)&&l);return l}),tn,Jt)),l["\u0275did"](2,638976,null,0,Qt,[],{data:[0,"data"]},{outSourceDataSelected:"outSourceDataSelected"})],(function(e,t){e(t,2,0,t.component.sourceForList)}),null)}function un(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Data Source"])),(e()(),l["\u0275eld"](3,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onShowHelp(n)&&l);return l}),null,null)),(e()(),l["\u0275eld"](4,0,null,null,8,"div",[["class","l-chart-area-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"pp-loading",[],null,null,null,kt.b,kt.a)),l["\u0275did"](6,114688,null,0,Lt.a,[l.ElementRef,l.Renderer2],{showLoading:[0,"showLoading"],zIndex:[1,"zIndex"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"pp-retry",[],null,[[null,"outRetry"]],(function(e,t,n){var l=!0,i=e.component;"outRetry"===t&&(l=!1!==i.onRetry()&&l);return l}),Ft.b,Ft.a)),l["\u0275did"](8,114688,null,0,jt.a,[],{showRetry:[0,"showRetry"],message:[1,"message"]},{outRetry:"outRetry"}),(e()(),l["\u0275eld"](9,0,null,null,3,"pp-inspector-chart",[],null,[[null,"outRendered"]],(function(e,t,n){var l=!0,i=e.component;"outRendered"===t&&(l=!1!==i.onRendered()&&l);return l}),Ut.b,Ut.a)),l["\u0275prd"](512,null,h["\u0275NgClassImpl"],h["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](11,278528,null,0,h.NgClass,[h["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["\u0275did"](12,770048,null,0,zt.a,[De.b,Gt.a,I.a,l.ElementRef,l.Renderer2],{chartConfig:[0,"chartConfig"]},{outRendered:"outRendered"}),(e()(),l["\u0275and"](16777216,null,null,1,null,rn)),l["\u0275did"](14,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,6,0,n.isActiveLayer("loading"),10),e(t,8,0,n.isActiveLayer("retry"),n.retryMessage),e(t,11,0,n.chartVisibility),e(t,12,0,n.chartConfig),e(t,14,0,n.chartConfig&&!n.isDataEmpty)}),null)}l["\u0275ccf"]("pp-application-data-source-chart-container",an,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-data-source-chart-container",[],null,null,null,un,sn)),l["\u0275did"](1,245760,null,0,an,[F.a,nn.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);var cn=n("VRyK");class hn{constructor(e,t,n,l,i){this.webAppSettingDataService=e,this.messageQueueService=t,this.newUrlStateNotificationService=n,this.translateService=l,this.renderer=i,this.hostClass="l-application-inspector-contents",this.unsubscribe=new T.b,this.chartType=Bt.a}ngOnInit(){this.isApplicationInspectorActivated$=this.webAppSettingDataService.isApplicationInspectorActivated(),this.coverRangeElements$=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(C.a)(e=>e.isRealTimeMode())),this.guideMessage$=this.translateService.get("INSPECTOR.CHART_INTERACTION_GUIDE_MESSAGE"),Object(cn.a)(Object(ae.a)(this.webAppSettingDataService.getChartLayoutOption()),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.INSPECTOR_CHART_SET_LAYOUT)).subscribe(e=>{this.renderer.setStyle(this.chartGroupWrapper.nativeElement,"grid-template-columns",this.getGridLayout(e))})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}getGridLayout(e){return`repeat(${e}, 1fr)`}}var dn=[["[_nghost-%COMP%]{display:block;width:100%;height:100%}.l-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column nowrap;width:100%;height:100%}.l-date-range[_ngcontent-%COMP%]{background-color:#fff;height:150px;position:relative}.l-cover[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#ccc;z-index:5;position:absolute;left:0;top:0;opacity:.5}.l-main-contents[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto}.l-chart-option-area[_ngcontent-%COMP%]{width:calc(100% - 20px);display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;margin:5px 10px 0 15px}.l-guide-text[_ngcontent-%COMP%]{font-family:'Open Sans';color:#333;font-size:14px;font-style:italic}.l-chart-group-wrap[_ngcontent-%COMP%]{display:grid;width:100%;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;row-gap:10px;padding:10px;min-height:0;min-width:0}.l-chart-wrapper[_ngcontent-%COMP%]{overflow:hidden;min-width:0}"]],pn=l["\u0275crt"]({encapsulation:0,styles:dn,data:{}});function gn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","l-cover"]],null,null,null,null,null))],null,null)}function mn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-application-inspector-usage-guide-container",[],null,null,null,ut,rt)),l["\u0275did"](2,114688,null,0,ot,[R.i],null,null)],(function(e,t){e(t,2,0)}),null)}function fn(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{chartGroupWrapper:0}),(e()(),l["\u0275eld"](1,0,null,null,56,"div",[["class","l-wrapper"]],[[8,"hidden",0]],null,null,null,null)),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](3,0,null,null,7,"article",[["class","l-date-range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"pp-timeline-command-group-container",[],null,null,null,vt,ft)),l["\u0275did"](5,245760,null,0,gt,[F.a],null,null),(e()(),l["\u0275eld"](6,0,null,null,1,"pp-application-inspector-timeline-container",[],null,null,null,Pt,Et)),l["\u0275did"](7,245760,null,0,Ot,[F.a,De.b,j.a,Re],null,null),(e()(),l["\u0275and"](16777216,null,null,2,null,gn)),l["\u0275did"](9,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](11,0,null,null,46,"div",[["class","l-main-contents"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,5,"div",[["class","l-chart-option-area"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,2,"p",[["class","l-guide-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](14,null,["",""])),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](16,0,null,null,1,"pp-chart-layout-option-container",[],null,null,null,At,Dt)),l["\u0275did"](17,114688,null,0,wt,[B.a,De.b,j.a],null,null),(e()(),l["\u0275eld"](18,0,[[1,0],["chartGroupWrapper",1]],null,39,"div",[["class","l-chart-group-wrap"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](21,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](22,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](24,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](25,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](27,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](28,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](30,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](31,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](33,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](34,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](35,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](36,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](37,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](38,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](39,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](40,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](41,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](42,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](43,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](44,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](45,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](46,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](47,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](48,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](49,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](50,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](51,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](52,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](53,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](54,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](55,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](56,0,null,null,1,"pp-application-data-source-chart-container",[],null,null,null,un,sn)),l["\u0275did"](57,245760,null,0,an,[F.a,nn.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re],null,null),(e()(),l["\u0275and"](16777216,null,null,2,null,mn)),l["\u0275did"](59,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,5,0),e(t,7,0),e(t,9,0,l["\u0275unv"](t,9,0,l["\u0275nov"](t,10).transform(n.coverRangeElements$))),e(t,17,0),e(t,21,0,n.chartType.APPLICATION_JVM_HEAP),e(t,24,0,n.chartType.APPLICATION_JVM_NON_HEAP),e(t,27,0,n.chartType.APPLICATION_JVM_CPU),e(t,30,0,n.chartType.APPLICATION_SYSTEM_CPU),e(t,33,0,n.chartType.APPLICATION_TPS),e(t,36,0,n.chartType.APPLICATION_ACTIVE_THREAD),e(t,39,0,n.chartType.APPLICATION_RESPONSE_TIME),e(t,42,0,n.chartType.APPLICATION_OPEN_FILE_DESCRIPTOR),e(t,45,0,n.chartType.APPLICATION_DIRECT_BUFFER_COUNT),e(t,48,0,n.chartType.APPLICATION_DIRECT_BUFFER_MEMORY),e(t,51,0,n.chartType.APPLICATION_MAPPED_BUFFER_COUNT),e(t,54,0,n.chartType.APPLICATION_MAPPED_BUFFER_MEMORY),e(t,57,0),e(t,59,0,!l["\u0275unv"](t,59,0,l["\u0275nov"](t,60).transform(n.isApplicationInspectorActivated$)))}),(function(e,t){var n=t.component;e(t,1,0,!l["\u0275unv"](t,1,0,l["\u0275nov"](t,2).transform(n.isApplicationInspectorActivated$))),e(t,14,0,l["\u0275unv"](t,14,0,l["\u0275nov"](t,15).transform(n.guideMessage$)))}))}var vn=l["\u0275ccf"]("pp-application-inspector-contents-container",hn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-application-inspector-contents-container",[],[[8,"className",0]],null,null,fn,pn)),l["\u0275did"](1,245760,null,0,hn,[B.a,De.b,I.a,R.i,l.Renderer2],null,null)],(function(e,t){e(t,1,0)}),(function(e,t){e(t,0,0,l["\u0275nov"](t,1).hostClass)}))}),{},{},[]),bn=n("IheW");class Tn{constructor(e){this.http=e,this.requestURL="getAgentStatusTimeline.pinpoint"}getData(e,t){return this.http.get(this.requestURL,this.makeRequestOptionsArgs(e,t)).pipe(Object(xe.a)(3))}makeRequestOptionsArgs(e,[t,n]){return{params:(new bn.h).set("agentId",e).set("from",t+"").set("to",n+"").set("exclude","10199")}}}class Sn{constructor(e,t,n,l,i,a,o,s,r,u){this.storeHelperService=e,this.newUrlStateNotificationService=t,this.urlRouteManagerService=n,this.agentTimelineDataService=l,this.messageQueueService=i,this.dynamicPopupService=a,this.analyticsService=o,this.componentFactoryResolver=s,this.injector=r,this.inspectorPageService=u,this.unsubscribe=new T.b}ngOnInit(){this.connectStore(),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_ZOOM_IN).subscribe(()=>{this.analyticsService.trackEvent(y.e.ZOOM_IN_TIMELINE),this.timelineComponent.zoomIn(),this.updateTimelineData()}),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_ZOOM_OUT).subscribe(()=>{this.analyticsService.trackEvent(y.e.ZOOM_OUT_TIMELINE),this.timelineComponent.zoomOut(),this.updateTimelineData()}),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_MOVE_PREV).subscribe(()=>{this.analyticsService.trackEvent(y.e.MOVE_TO_PREV_ON_TIMELINE),this.timelineComponent.movePrev(),this.updateTimelineData()}),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_MOVE_NEXT).subscribe(()=>{this.analyticsService.trackEvent(y.e.MOVE_TO_PREV_ON_TIMELINE),this.timelineComponent.moveNext(),this.updateTimelineData()}),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_MOVE_NOW).subscribe(()=>{this.analyticsService.trackEvent(y.e.MOVE_TO_NOW_ON_TIMELINE),this.timelineComponent.moveNow(),this.updateTimelineData()}),this.inspectorPageService.sourceForTimeline$.pipe(Object(S.a)(this.unsubscribe),Object(C.a)(({timelineInfo:e,agentId:t})=>{const{range:n,selectionRange:l,selectedTime:i}=e;return this.timelineStartTime=n[0],this.timelineEndTime=n[1],this.selectionStartTime=l[0],this.selectionEndTime=l[1],this.pointingTime=i,{range:n,agentId:t}}),Object(oe.a)(({range:e,agentId:t})=>this.agentTimelineDataService.getData(t,e))).subscribe(e=>{this.timelineData=e},e=>{this.dynamicPopupService.openPopup({data:{title:"Error",contents:e},component:ce.a,onCloseCallback:()=>{this.urlRouteManagerService.reload()}},{resolver:this.componentFactoryResolver,injector:this.injector})})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}connectStore(){this.timezone$=this.storeHelperService.getTimezone(this.unsubscribe),this.dateFormat$=this.storeHelperService.getDateFormatArray(this.unsubscribe,0,6,7)}updateTimelineData(){const e=this.timelineComponent.getTimelineRange(),t=this.newUrlStateNotificationService.getPathValue(E.b.AGENT_ID);this.agentTimelineDataService.getData(t,e).subscribe(e=>{this.timelineComponent.updateData(e)})}onSelectEventStatus(e){this.messageQueueService.sendMessage({to:y.b.TIMELINE_SELECTED_EVENT_STATUS,param:e})}onChangeTimelineUIEvent(e){e.changedSelectedTime&&this.analyticsService.trackEvent(y.e.CHANGE_POINTING_TIME_ON_TIMELINE),e.changedSelectionRange&&this.analyticsService.trackEvent(y.e.CHANGE_SELECTION_RANGE_ON_TIMELINE),this.inspectorPageService.updateTimelineData(e.data)}}var Cn=[["[_nghost-%COMP%]{display:block;margin:18px 12px 0}"]],On=l["\u0275crt"]({encapsulation:0,styles:Cn,data:{}});function yn(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{timelineComponent:0}),(e()(),l["\u0275eld"](1,0,null,null,3,"pp-timeline",[],null,[[null,"outSelectEventStatus"],[null,"outChangeTimelineUIEvent"]],(function(e,t,n){var l=!0,i=e.component;"outSelectEventStatus"===t&&(l=!1!==i.onSelectEventStatus(n)&&l);"outChangeTimelineUIEvent"===t&&(l=!1!==i.onChangeTimelineUIEvent(n)&&l);return l}),Ct,St)),l["\u0275did"](2,770048,[[1,4]],0,bt,[l.ElementRef,l.Renderer2],{data:[0,"data"],height:[1,"height"],pointingTime:[2,"pointingTime"],timelineStartTime:[3,"timelineStartTime"],timelineEndTime:[4,"timelineEndTime"],selectionStartTime:[5,"selectionStartTime"],selectionEndTime:[6,"selectionEndTime"],timezone:[7,"timezone"],dateFormat:[8,"dateFormat"]},{outChangeTimelineUIEvent:"outChangeTimelineUIEvent",outSelectEventStatus:"outSelectEventStatus"}),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,2,0,n.timelineData,90,n.pointingTime,n.timelineStartTime,n.timelineEndTime,n.selectionStartTime,n.selectionEndTime,l["\u0275unv"](t,2,7,l["\u0275nov"](t,3).transform(n.timezone$)),l["\u0275unv"](t,2,8,l["\u0275nov"](t,4).transform(n.dateFormat$)))}),null)}l["\u0275ccf"]("pp-agent-inspector-timeline-container",Sn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-inspector-timeline-container",[],null,null,null,yn,On)),l["\u0275did"](1,245760,null,0,Sn,[F.a,I.a,Z.a,Tn,De.b,U.a,j.a,l.ComponentFactoryResolver,l.Injector,Re],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);class En{constructor(){this.outClose=new l.EventEmitter}ngOnInit(){}onClickClose(){this.outClose.next()}formatDate(e){return ve(e).tz(this.timezone).format(this.dateFormat)}}var Pn=[[".l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background-color:#9dd4bb}.l-title-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000;float:right;font-size:14px}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;min-height:40px;max-height:200px;overflow-y:auto}"]],In=l["\u0275crt"]({encapsulation:0,styles:Pn,data:{}});function Rn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,["",""])),(e()(),l["\u0275eld"](3,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,["",""])),(e()(),l["\u0275eld"](5,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["\u0275ted"](7,null,["",""]))],null,(function(e,t){e(t,2,0,t.component.formatDate(t.context.$implicit.eventTimestamp)),e(t,4,0,t.context.$implicit.eventTypeDesc),e(t,7,0,t.context.$implicit.eventMessage)}))}function xn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["Event - "," "])),(e()(),l["\u0275eld"](2,0,null,null,0,"button",[["class","fas fa-times"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickClose()&&l);return l}),null,null)),(e()(),l["\u0275eld"](3,0,null,null,17,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,16,"table",[["class","table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"caption",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Events"])),(e()(),l["\u0275eld"](7,0,null,null,3,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,0,"col",[["width","30%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"col",[["width","30%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"col",[["width","40%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,6,"thead",[],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Time"])),(e()(),l["\u0275eld"](14,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Description"])),(e()(),l["\u0275eld"](16,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Message"])),(e()(),l["\u0275eld"](18,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Rn)),l["\u0275did"](20,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,20,0,t.component.eventData)}),(function(e,t){var n=t.component;e(t,1,0,null==n.eventData?null:n.eventData.length)}))}l["\u0275ccf"]("pp-agent-event-view",En,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-event-view",[],null,null,null,xn,In)),l["\u0275did"](1,114688,null,0,En,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{eventData:"eventData",timezone:"timezone",dateFormat:"dateFormat"},{outClose:"outClose"},[]);class Mn{constructor(e,t){this.http=e,this.newUrlStateNotificationService=t,this.requestURL="getAgentEvents.pinpoint"}getData(e,t){return this.http.get(this.requestURL,this.makeRequestOptionsArgs(e,t)).pipe(Object(xe.a)(3))}makeRequestOptionsArgs(e,t){return{params:(new bn.h).set("agentId",this.newUrlStateNotificationService.getPathValue(E.b.AGENT_ID)).set("from",e+"").set("to",t+"").set("exclude","10199")}}}class wn{constructor(e,t,n,l,i,a,o){this.changeDetectorRef=e,this.storeHelperService=t,this.messageQueueService=n,this.agentEventsDataService=l,this.dynamicPopupService=i,this.componentFactoryResolver=a,this.injector=o,this.unsubscribe=new T.b,this.viewComponent=!1}ngOnInit(){this.connectStore()}connectStore(){this.timezone$=this.storeHelperService.getTimezone(this.unsubscribe),this.dateFormat$=this.storeHelperService.getDateFormat(this.unsubscribe,1),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.TIMELINE_SELECTED_EVENT_STATUS).pipe(Object(oe.a)(e=>this.agentEventsDataService.getData(e.startTimestamp,e.endTimestamp))).subscribe(e=>{this.eventData=e,this.viewComponent=!0,this.changeDetectorRef.detectChanges()},e=>{this.dynamicPopupService.openPopup({data:{title:"Error",contents:e},component:ce.a},{resolver:this.componentFactoryResolver,injector:this.injector})})}onClose(){this.viewComponent=!1,this.changeDetectorRef.detectChanges()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}var _n=[["[_nghost-%COMP%]{display:block;border-bottom:1px solid #e5e8f0}"]],Dn=l["\u0275crt"]({encapsulation:0,styles:_n,data:{}});function An(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"pp-agent-event-view",[],null,[[null,"outClose"]],(function(e,t,n){var l=!0,i=e.component;"outClose"===t&&(l=!1!==i.onClose()&&l);return l}),xn,In)),l["\u0275did"](2,114688,null,0,En,[],{eventData:[0,"eventData"],timezone:[1,"timezone"],dateFormat:[2,"dateFormat"]},{outClose:"outClose"}),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,2,0,n.eventData,l["\u0275unv"](t,2,1,l["\u0275nov"](t,3).transform(n.timezone$)),l["\u0275unv"](t,2,2,l["\u0275nov"](t,4).transform(n.dateFormat$)))}),null)}function Nn(e){return l["\u0275vid"](2,[(e()(),l["\u0275and"](16777216,null,null,1,null,An)),l["\u0275did"](1,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.viewComponent)}),null)}l["\u0275ccf"]("pp-agent-event-view-container",wn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-event-view-container",[],null,null,null,Nn,Dn)),l["\u0275did"](1,245760,null,0,wn,[l.ChangeDetectorRef,F.a,De.b,Mn,U.a,l.ComponentFactoryResolver,l.Injector],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);class kn{constructor(e){this.analyticsService=e,this.outClickApplicationNameIssue=new l.EventEmitter,this.isHideDetailInfo=!0,this.selectedServiceIndex=0}ngOnInit(){}ngOnChanges(e){Object.keys(e).filter(t=>e[t].currentValue).forEach(e=>{switch(e){case"agentData":this.isHideDetailInfo=!0,this.selectedServiceIndex=0}})}toggleDetailInfo(){return this.analyticsService.trackEvent(y.e.TOGGLE_SERVER_TYPE_DETAIL),this.isHideDetailInfo=!this.isHideDetailInfo}onSelectService(e){this.selectedServiceIndex=e}getSelectedServiceLib(){return this.agentData.serverMetaData.serviceInfos[this.selectedServiceIndex].serviceLibs}isServiceInfoEmpty(){return!this.agentData.serverMetaData||0===this.agentData.serverMetaData.serviceInfos.length}isSameApplication(){return this.agentData.applicationName===this.urlApplicationName}formatDate(e){return ve(e).tz(this.timezone).format(this.dateFormat)}onClickNotSameBtn(e){const{left:t,top:n,width:l,height:i}=e.currentTarget.getBoundingClientRect(),{agentId:a,applicationName:o}=this.agentData;this.outClickApplicationNameIssue.emit({data:{agentId:a,applicationName:o},coord:{coordX:t+l/2,coordY:n+i/2}})}}var Ln=[["[_nghost-%COMP%]{display:block}.l-info-table[_ngcontent-%COMP%]{border:none}.l-info-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .l-info-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#000;border-top:1px solid #e5e8f0}.l-info-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fafafc}.l-argument-list[_ngcontent-%COMP%]{width:100%;height:150px;overflow:auto}.l-server-info-service-list[_ngcontent-%COMP%]{float:left;width:40%;max-height:140px;overflow:auto}.l-server-info-lib-list[_ngcontent-%COMP%]{float:left;width:60%;height:150px;overflow:auto}.l-server-info-list[_ngcontent-%COMP%]{border:1px solid #e7e8ec;position:relative;margin-right:10px}.l-server-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:30px;font-size:12px;color:#999;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;padding:0 10px;cursor:pointer;border-top:1px solid #e7e8ec}.l-server-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top-color:transparent}.l-server-info-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.l-server-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:absolute;right:-250px;top:0;color:#999}.l-server-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:auto;border-top:none}.l-category[_ngcontent-%COMP%]{display:inline-block;padding:2px 5px;font-size:10px;color:#fff;font-weight:600;cursor:pointer}.l-category.blue[_ngcontent-%COMP%]{background-color:var(--primary-color)}.l-sub-table[_ngcontent-%COMP%]{display:table-cell;padding:16px 19px;background:#fff}.l-sub-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .l-sub-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 10px}.l-sub-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] + td[_ngcontent-%COMP%]{border-left:1px solid #e5e8f0}.l-sub-table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff}.l-not-same[_ngcontent-%COMP%]{color:#f27d70!important}.l-not-same-button[_ngcontent-%COMP%]{float:right;font-size:14px}"]],Fn=l["\u0275crt"]({encapsulation:0,styles:Ln,data:{}});function jn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","l-not-same-button"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onClickNotSameBtn(n)&&l);return l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-comment-alt"]],null,null,null,null,null))],null,null)}function Un(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.context.$implicit)}))}function zn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[],[[2,"active",null]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onSelectService(e.context.index)&&l);return l}),null,null)),(e()(),l["\u0275ted"](1,null,[""," "])),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[["class","fas fa-angle-right"]],null,null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,t.context.index===n.selectedServiceIndex),e(t,1,0,t.context.$implicit.serviceName)}))}function Gn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.context.$implicit)}))}function Hn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","l-server-info-service-list"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"ul",[["class","l-server-info-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,zn)),l["\u0275did"](4,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"div",[["class","l-server-info-lib-list"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Gn)),l["\u0275did"](8,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,4,0,null==n.agentData.serverMetaData?null:n.agentData.serverMetaData.serviceInfos),e(t,8,0,n.getSelectedServiceLib())}),null)}function Vn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,84,"table",[["class","table l-info-table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"caption",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Information"])),(e()(),l["\u0275eld"](3,0,null,null,4,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"col",[["width","15%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"col",[["width","35%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"col",[["width","15%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"col",[["width","35%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,76,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,10,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Application Name"])),(e()(),l["\u0275eld"](12,0,null,null,3,"td",[],[[2,"l-not-same",null]],null,null,null,null)),(e()(),l["\u0275ted"](13,null,[""," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,jn)),l["\u0275did"](15,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](16,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Agent Version"])),(e()(),l["\u0275eld"](18,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](19,null,["",""])),(e()(),l["\u0275eld"](20,0,null,null,8,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Agent Id"])),(e()(),l["\u0275eld"](23,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](24,null,["",""])),(e()(),l["\u0275eld"](25,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["PID"])),(e()(),l["\u0275eld"](27,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](28,null,["",""])),(e()(),l["\u0275eld"](29,0,null,null,8,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](30,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Hostname"])),(e()(),l["\u0275eld"](32,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](33,null,["",""])),(e()(),l["\u0275eld"](34,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["JVM (GC Type)"])),(e()(),l["\u0275eld"](36,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](37,null,[""," (",")"])),(e()(),l["\u0275eld"](38,0,null,null,8,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](39,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["IP"])),(e()(),l["\u0275eld"](41,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](42,null,["",""])),(e()(),l["\u0275eld"](43,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Start Time"])),(e()(),l["\u0275eld"](45,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](46,null,[""," "])),(e()(),l["\u0275eld"](47,0,null,null,11,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](48,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Service Type"])),(e()(),l["\u0275eld"](50,0,null,null,4,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](51,null,[""," (",") "])),(e()(),l["\u0275eld"](52,0,null,null,2,"span",[["class","l-category blue"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.toggleDetailInfo()&&l);return l}),null,null)),(e()(),l["\u0275ted"](-1,null,["Detail "])),(e()(),l["\u0275eld"](54,0,null,null,0,"span",[["class","fas fa-caret-down"]],null,null,null,null,null)),(e()(),l["\u0275eld"](55,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["End Status"])),(e()(),l["\u0275eld"](57,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](58,null,[""," (last checked : ",")"])),(e()(),l["\u0275eld"](59,0,null,null,25,"tr",[],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](60,0,null,null,24,"td",[["class","l-sub-table"],["colspan","4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](61,0,null,null,23,"table",[["class","table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](62,0,null,null,0,"caption",[],null,null,null,null,null)),(e()(),l["\u0275eld"](63,0,null,null,2,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275eld"](64,0,null,null,0,"col",[["width","20%"]],null,null,null,null,null)),(e()(),l["\u0275eld"](65,0,null,null,0,"col",[["width",""]],null,null,null,null,null)),(e()(),l["\u0275eld"](66,0,null,null,18,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275eld"](67,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](68,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Server Info"])),(e()(),l["\u0275eld"](70,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](71,null,["",""])),(e()(),l["\u0275eld"](72,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](73,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["JVM Arguments"])),(e()(),l["\u0275eld"](75,0,null,null,3,"td",[],null,null,null,null,null)),(e()(),l["\u0275eld"](76,0,null,null,2,"div",[["class","l-argument-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Un)),l["\u0275did"](78,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](79,0,null,null,5,"tr",[["class","l-server-info-list-local"]],null,null,null,null,null)),(e()(),l["\u0275eld"](80,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Services"])),(e()(),l["\u0275eld"](82,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Hn)),l["\u0275did"](84,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,15,0,!n.isSameApplication()),e(t,78,0,null==n.agentData.serverMetaData?null:n.agentData.serverMetaData.vmArgs),e(t,84,0,!n.isServiceInfoEmpty())}),(function(e,t){var n=t.component;e(t,12,0,!n.isSameApplication()),e(t,13,0,n.agentData.applicationName),e(t,19,0,n.agentData.agentVersion),e(t,24,0,n.agentData.agentId),e(t,28,0,n.agentData.pid),e(t,33,0,n.agentData.hostName),e(t,37,0,null==n.agentData.jvmInfo?null:n.agentData.jvmInfo.jvmVersion,null==n.agentData.jvmInfo?null:n.agentData.jvmInfo.gcTypeName),e(t,42,0,n.agentData.ip),e(t,46,0,n.formatDate(n.agentData.startTimestamp)),e(t,51,0,n.agentData.serviceType,null==n.agentData.serverMetaData?null:n.agentData.serverMetaData.serverInfo),e(t,58,0,null==n.agentData.status?null:null==n.agentData.status.state?null:n.agentData.status.state.desc,n.formatDate(null==n.agentData.status?null:n.agentData.status.eventTimestamp)),e(t,59,0,n.isHideDetailInfo),e(t,71,0,n.isServiceInfoEmpty()?"":n.agentData.serverMetaData.serverInfo)}))}l["\u0275ccf"]("pp-agent-info",kn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-info",[],null,null,null,Vn,Fn)),l["\u0275did"](1,638976,null,0,kn,[j.a],null,null)],(function(e,t){e(t,1,0)}),null)}),{urlApplicationName:"urlApplicationName",agentData:"agentData",timezone:"timezone",dateFormat:"dateFormat"},{outClickApplicationNameIssue:"outClickApplicationNameIssue"},[]);class $n{constructor(e){this.http=e,this.requestURL="getAgentInfo.pinpoint"}getData(e,t){return this.http.get(this.requestURL,this.makeRequestOptionsArgs(e,t)).pipe(Object(xe.a)(3))}makeRequestOptionsArgs(e,t){return{params:(new bn.h).set("agentId",e).set("timestamp",t+"")}}}class Bn{constructor(e,t,n,l,i,a,o){this.newUrlStateNotificationService=e,this.storeHelperService=t,this.agentInfoDataService=n,this.dynamicPopupService=l,this.componentFactoryResolver=i,this.injector=a,this.inspectorPageService=o,this.unsubscribe=new T.b,this.showLoading=!0}ngOnInit(){this.urlApplicationName$=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(C.a)(e=>e.getPathValue(E.b.APPLICATION).getApplicationName())),this.connectStore(),this.inspectorPageService.sourceForAgentInfo$.pipe(Object(S.a)(this.unsubscribe),Object(re.a)(()=>this.showLoading=!0),Object(oe.a)(({agentId:e,selectedTime:t})=>(this.lastRequestParam=[e,t],this.agentInfoDataService.getData(e,t))),Object(V.a)(e=>!(!e||!e.applicationName))).subscribe(e=>{this.agentData=e,this.dataRequestSuccess=!0,this.completed()},e=>{this.dataRequestSuccess=!1,this.completed()})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}connectStore(){this.timezone$=this.storeHelperService.getTimezone(this.unsubscribe),this.dateFormat$=this.storeHelperService.getDateFormat(this.unsubscribe,1)}completed(){this.showLoading=!1}onRequestAgain(){const[e,t]=this.lastRequestParam;this.showLoading=!0,this.agentInfoDataService.getData(e,t).subscribe(e=>{this.agentData=e,this.dataRequestSuccess=!0,this.completed()},e=>{this.dataRequestSuccess=!1,this.completed()})}onClickApplicationNameIssue({data:e,coord:t}){this.dynamicPopupService.openPopup({data:e,coord:t,component:P},{resolver:this.componentFactoryResolver,injector:this.injector})}}var Zn=[["[_nghost-%COMP%]{width:calc(100% - 20px);display:block;margin:20px 10px 10px;border:1px solid #000;position:relative}.l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background:#f6f8fb}.l-reload-btn[_ngcontent-%COMP%]{color:#f06c6b;float:right}"]],Xn=l["\u0275crt"]({encapsulation:0,styles:Zn,data:{}});function Yn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","l-reload-btn"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onRequestAgain()&&l);return l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-sync fa-lg"]],null,null,null,null,null))],null,null)}function Wn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"pp-agent-info",[],null,[[null,"outClickApplicationNameIssue"]],(function(e,t,n){var l=!0,i=e.component;"outClickApplicationNameIssue"===t&&(l=!1!==i.onClickApplicationNameIssue(n)&&l);return l}),Vn,Fn)),l["\u0275did"](2,638976,null,0,kn,[j.a],{urlApplicationName:[0,"urlApplicationName"],agentData:[1,"agentData"],timezone:[2,"timezone"],dateFormat:[3,"dateFormat"]},{outClickApplicationNameIssue:"outClickApplicationNameIssue"}),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,2,0,l["\u0275unv"](t,2,0,l["\u0275nov"](t,3).transform(n.urlApplicationName$)),n.agentData,l["\u0275unv"](t,2,2,l["\u0275nov"](t,4).transform(n.timezone$)),l["\u0275unv"](t,2,3,l["\u0275nov"](t,5).transform(n.dateFormat$)))}),null)}function qn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Information "])),(e()(),l["\u0275and"](16777216,null,null,1,null,Yn)),l["\u0275did"](3,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Wn)),l["\u0275did"](5,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,1,"pp-loading",[],null,null,null,kt.b,kt.a)),l["\u0275did"](7,114688,null,0,Lt.a,[l.ElementRef,l.Renderer2],{showLoading:[0,"showLoading"],zIndex:[1,"zIndex"]},null)],(function(e,t){var n=t.component;e(t,3,0,!1===n.dataRequestSuccess),e(t,5,0,n.dataRequestSuccess);e(t,7,0,n.showLoading,10)}),null)}l["\u0275ccf"]("pp-agent-info-container",Bn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-info-container",[],null,null,null,qn,Xn)),l["\u0275did"](1,245760,null,0,Bn,[I.a,F.a,$n,U.a,l.ComponentFactoryResolver,l.Injector,Re],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);class Qn{constructor(){this.outCheckedIdChange=new l.EventEmitter,this.showSourceSelectModal=!1,this.checkedIdSet=new Set}ngOnInit(){}ngOnChanges(e){Object.keys(e).map(e=>{switch(e){case"data":this.initCheckedIdSet()}})}onSourceSelectClick(){this.showSourceSelectModal=!this.showSourceSelectModal}onCheckAllBtnClick(){this.initCheckedIdSet(),this.outCheckedIdChange.emit(this.checkedIdSet)}onSourceCheckboxChange(e){this.toggleCheckedId(e)}initCheckedIdSet(){this.data.map(({id:e})=>this.checkedIdSet.add(e))}toggleCheckedId(e){this.checkedIdSet.has(e)?this.checkedIdSet.delete(e):this.checkedIdSet.add(e),this.outCheckedIdChange.emit(this.checkedIdSet)}}var Kn=[["[_nghost-%COMP%]{display:block}.l-source-select-button[_ngcontent-%COMP%]{color:#a8acb5;font-size:15px}.l-source-select-modal[_ngcontent-%COMP%]{position:absolute;top:34px;right:0;border-radius:3px;border:1px solid transparent;box-shadow:0 6px 12px rgba(0,0,0,.175);width:100%;z-index:1000;padding:15px;background-color:#fff;font-weight:400}.l-source-select-modal[_ngcontent-%COMP%]::after{content:'';width:0;height:0;position:absolute;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent;bottom:100%;right:44px}.l-select-all-button[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc;border-radius:3px;padding:5px}.l-source-data-list[_ngcontent-%COMP%]{margin-top:10px;border-top:1px solid #ddd;padding:10px 0}.l-source-data-list-item[_ngcontent-%COMP%]{display:inline-block}.l-list-item-label[_ngcontent-%COMP%]{margin-right:20px}.l-list-item-input[_ngcontent-%COMP%]{margin-right:5px}"]],Jn=l["\u0275crt"]({encapsulation:0,styles:Kn,data:{}});function el(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[["class","l-source-data-list-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"label",[["class","l-list-item-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"input",[["class","l-list-item-input"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,t,n){var l=!0,i=e.component;"change"===t&&(l=!1!==i.onSourceCheckboxChange(e.context.$implicit.id)&&l);return l}),null,null)),(e()(),l["\u0275ted"](3,null,[" "," "]))],null,(function(e,t){e(t,2,0,t.component.checkedIdSet.has(t.context.$implicit.id)),e(t,3,0,t.context.$implicit.databaseName?t.context.$implicit.databaseName:t.context.$implicit.id)}))}function tl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","l-source-select-button"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onSourceSelectClick()&&l);return l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-filter"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,5,"div",[["class","l-source-select-modal"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"button",[["class","button l-select-all-button"],["type","button"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onCheckAllBtnClick()&&l);return l}),null,null)),(e()(),l["\u0275ted"](-1,null,["Check All"])),(e()(),l["\u0275eld"](5,0,null,null,2,"ul",[["class","l-source-data-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,el)),l["\u0275did"](7,278528,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,7,0,t.component.data)}),(function(e,t){e(t,2,0,!t.component.showSourceSelectModal)}))}l["\u0275ccf"]("pp-agent-data-source-chart-select-source",Qn,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-data-source-chart-select-source",[],null,null,null,tl,Jn)),l["\u0275did"](1,638976,null,0,Qn,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{data:"data"},{outCheckedIdChange:"outCheckedIdChange"},[]);class nl{constructor(){}ngOnInit(){}}var ll=[["[_nghost-%COMP%]{display:block;width:100%;background-color:#fff;font-size:12px;padding:0 10px 10px}.l-source-info-table[_ngcontent-%COMP%]{border:1px solid #ddd;width:100%}.l-source-info-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;font-size:13px;text-align:left;background-color:#f6f8fb}.l-source-info-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:4px;text-align:center;word-break:break-all}.l-source-info-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:120px}"]],il=l["\u0275crt"]({encapsulation:0,styles:ll,data:{}});function al(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,40,"table",[["class","l-source-info-table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"thead",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"th",[["colspan","2"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Data Source Info"])),(e()(),l["\u0275eld"](5,0,null,null,35,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Active Avg"])),(e()(),l["\u0275eld"](9,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](10,null,["",""])),(e()(),l["\u0275eld"](11,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Active Max"])),(e()(),l["\u0275eld"](14,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](15,null,["",""])),(e()(),l["\u0275eld"](16,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Total Max"])),(e()(),l["\u0275eld"](19,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](20,null,["",""])),(e()(),l["\u0275eld"](21,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["ID"])),(e()(),l["\u0275eld"](24,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](25,null,["",""])),(e()(),l["\u0275eld"](26,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Type"])),(e()(),l["\u0275eld"](29,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](30,null,["",""])),(e()(),l["\u0275eld"](31,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Database Name"])),(e()(),l["\u0275eld"](34,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](35,null,["",""])),(e()(),l["\u0275eld"](36,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](37,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Jdbc URL"])),(e()(),l["\u0275eld"](39,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](40,null,["",""]))],null,(function(e,t){var n=t.component;e(t,10,0,n.infoTableObj.activeAvg),e(t,15,0,n.infoTableObj.activeMax),e(t,20,0,n.infoTableObj.totalMax),e(t,25,0,n.infoTableObj.id),e(t,30,0,n.infoTableObj.serviceType),e(t,35,0,n.infoTableObj.databaseName),e(t,40,0,n.infoTableObj.jdbcUrl)}))}l["\u0275ccf"]("pp-agent-data-source-chart-infotable",nl,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-data-source-chart-infotable",[],null,null,null,al,il)),l["\u0275did"](1,114688,null,0,nl,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{infoTableObj:"infoTableObj"},{},[]);var ol=n("7m67");class sl{constructor(e,t,n,l,i,a,o,s,r){this.storeHelperService=e,this.inspectorChartDataService=t,this.translateService=n,this.analyticsService=l,this.dynamicPopupService=i,this.componentFactoryResolver=a,this.injector=o,this.inspectorPageService=s,this.messageQueueService=r,this.onoverDataHolder=[],this.unsubscribe=new T.b,this.defaultYMax=4,this.chartVisibility={},this._activeLayer=Nt.LOADING}ngOnInit(){this.initI18nText(),this.initTimezoneAndDateFormat(),this.initInfoTableObj(),this.initChartData(),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.INSPECTOR_CHART_MOUSE_MOVE).subscribe(e=>{this.yRatio=e})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}initI18nText(){Object(Ht.a)(this.translateService.get("COMMON.FAILED_TO_FETCH_DATA"),this.translateService.get("COMMON.NO_DATA")).subscribe(([e,t])=>{this.dataFetchFailedText=e,this.dataEmptyText=t})}initTimezoneAndDateFormat(){Object(le.a)(this.storeHelperService.getTimezone(this.unsubscribe),this.storeHelperService.getDateFormatArray(this.unsubscribe,4,5)).subscribe(([e,t])=>{this.timezone=e,this.dateFormat=t})}set activeLayer(e){this._activeLayer=e,this.setChartVisibility(this._activeLayer===Nt.CHART)}get activeLayer(){return this._activeLayer}onRendered(){this.activeLayer=Nt.CHART}onMouseMove({clientY:e,target:t}){const{height:n,top:l}=t.getBoundingClientRect(),i=(e-l)/n;this.messageQueueService.sendMessage({to:y.b.INSPECTOR_CHART_MOUSE_MOVE,param:i})}initInfoTableObj(){this.infoTableObj={activeAvg:"-",activeMax:"-",totalMax:"-",id:"-",serviceType:"-",databaseName:"-",jdbcUrl:"-"}}updateInfoTable({id:e,index:t}){this.infoTableObj=this.chartData.filter(({id:t})=>t===Number(e)).reduce((e,n)=>{const{id:l,jdbcUrl:i,serviceType:a,databaseName:o,charts:s}=n;return{id:l,jdbcUrl:i,serviceType:a,databaseName:o,activeAvg:s.y.ACTIVE_CONNECTION_SIZE.map(e=>e[2])[t],activeMax:s.y.ACTIVE_CONNECTION_SIZE.map(e=>e[1])[t],totalMax:s.y.MAX_CONNECTION_SIZE.map(e=>e[1])[t]}},{})}initChartData(){this.inspectorPageService.sourceForChart$.pipe(Object(S.a)(this.unsubscribe),Object(re.a)(()=>this.activeLayer=Nt.LOADING),Object(re.a)(({range:e})=>this.previousRange=e),Object(oe.a)(({range:e})=>this.inspectorChartDataService.getData(e).pipe(Object(Vt.a)(()=>Object(ae.a)(null))))).subscribe(e=>this.chartDataResCallbackFn(e))}setChartVisibility(e){this.chartVisibility={"show-chart":e,"shady-chart":!e&&void 0!==this.chartConfig}}isActiveLayer(e){return this.activeLayer===e}onRetry(){this.activeLayer=Nt.LOADING,this.inspectorChartDataService.getData(this.previousRange).pipe(Object(Vt.a)(()=>Object(ae.a)(null))).subscribe(e=>this.chartDataResCallbackFn(e))}chartDataResCallbackFn(e){!e||Object(we.c)(e,"exception")?(this.activeLayer=Nt.RETRY,this.setRetryMessage(e)):(this.chartData=e,this.sourceListForFilter=e.map(({databaseName:e,id:t})=>({databaseName:e,id:t})),this.setChartConfig(this.makeChartData(e)))}setChartConfig(e){this.chartConfig={dataConfig:this.makeDataOption(e),elseConfig:this.makeElseOption(e)},this.isDataEmpty=this.isEmpty(e)}setRetryMessage(e){this.retryMessage=e?e.exception.message:this.dataFetchFailedText}isEmpty(e){return 0===e.length||e.slice(1).every(e=>1===e.length)}onCheckedIdChange(e){this.activeLayer=Nt.LOADING,this.setChartConfig(this.makeChartData(this.chartData.filter(({id:t})=>e.has(t))))}makeChartData(e){return 0===e.length?[]:[["x",...Object(ln.c)(e[0].charts.x)],...e.map(e=>[e.id.toString(),...Object(ln.d)(e.charts.y.ACTIVE_CONNECTION_SIZE,2)])]}makeDataOption(e){const t=["#850901","#969755","#421416","#c8814b","#aa8735","#cd7af4","#f6546a","#1c1a1f","#127999","#b7ebd9","#f6546a","#bea87f","#d1b4b0","#e0d4ba","#0795d9","#43aa83","#09d05b","#c26e67","#ed7575","#96686a"],n=e.slice(1).length,l=this;return{x:"x",columns:e,type:"spline",colors:e.slice(1).reduce((e,[n],l)=>Object.assign({},e,{[n]:t[l]}),{}),onover:function(e){l.onoverDataHolder.push(e);const t=this.axis.max().y;if(l.onoverDataHolder.length===n&&l.yRatio){const e=t-l.yRatio*t,n=l.onoverDataHolder.map(({value:t})=>Math.abs(t-e)),i=n.indexOf(Math.min(...n));l.updateInfoTable(l.onoverDataHolder[i]),l.onoverDataHolder=[]}},empty:{label:{text:this.dataEmptyText}}}}makeElseOption(e){return{padding:{top:20,bottom:35,right:45},axis:{x:{type:"timeseries",tick:{count:4,format:e=>ve(e).tz(this.timezone).format(this.dateFormat[0])+"\n"+ve(e).tz(this.timezone).format(this.dateFormat[1])},padding:{left:0,right:0}},y:{label:{text:"Connection (count)",position:"outer-middle"},tick:{count:5},padding:{top:0,bottom:0},min:0,max:(()=>{const t=Object(ln.a)(e,1);return 0===t?this.defaultYMax:t})(),default:[0,this.defaultYMax]}},point:{r:0,focus:{expand:{r:3}}},tooltip:{linked:!0,contents:function(e,t){return`<table class="bb-tooltip"><th>${t(e[0].x)}</th></table>`}},transition:{duration:0},legend:{show:!1},zoom:{enabled:{type:"drag"}}}}onShowHelp(e){this.analyticsService.trackEvent(y.e.TOGGLE_HELP_VIEWER,k.a.AGENT_DATA_SOURCE);const{left:t,top:n,width:l,height:i}=e.target.getBoundingClientRect();this.dynamicPopupService.openPopup({data:k.a.AGENT_DATA_SOURCE,coord:{coordX:t+l/2,coordY:n+i/2},component:k.b},{resolver:this.componentFactoryResolver,injector:this.injector})}}var rl=[["[_nghost-%COMP%]{display:block;position:relative}.l-title-group[_ngcontent-%COMP%]{height:34px;font-size:13px;font-weight:600;padding:0 20px;color:#333;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;background:#f6f8fb}.l-title-group[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{margin-left:7px;font-size:18px;color:#a8acb5;cursor:pointer}.l-icon-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.l-chart-area-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}"]],ul=l["\u0275crt"]({encapsulation:0,styles:rl,data:{}});function cl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-agent-data-source-chart-select-source",[],null,[[null,"outCheckedIdChange"]],(function(e,t,n){var l=!0,i=e.component;"outCheckedIdChange"===t&&(l=!1!==i.onCheckedIdChange(n)&&l);return l}),tl,Jn)),l["\u0275did"](2,638976,null,0,Qn,[],{data:[0,"data"]},{outCheckedIdChange:"outCheckedIdChange"})],(function(e,t){e(t,2,0,t.component.sourceListForFilter)}),null)}function hl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"pp-agent-data-source-chart-infotable",[],null,null,null,al,il)),l["\u0275did"](2,114688,null,0,nl,[],{infoTableObj:[0,"infoTableObj"]},null)],(function(e,t){e(t,2,0,t.component.infoTableObj)}),null)}function dl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","l-title-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"h4",[["class","l-title-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Data Source"])),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","l-icon-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,cl)),l["\u0275did"](5,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"button",[["class","fas fa-question-circle"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;"click"===t&&(l=!1!==i.onShowHelp(n)&&l);return l}),null,null)),(e()(),l["\u0275eld"](7,0,null,null,8,"div",[["class","l-chart-area-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"pp-loading",[],null,null,null,kt.b,kt.a)),l["\u0275did"](9,114688,null,0,Lt.a,[l.ElementRef,l.Renderer2],{showLoading:[0,"showLoading"],zIndex:[1,"zIndex"]},null),(e()(),l["\u0275eld"](10,0,null,null,1,"pp-retry",[],null,[[null,"outRetry"]],(function(e,t,n){var l=!0,i=e.component;"outRetry"===t&&(l=!1!==i.onRetry()&&l);return l}),Ft.b,Ft.a)),l["\u0275did"](11,114688,null,0,jt.a,[],{showRetry:[0,"showRetry"],message:[1,"message"]},{outRetry:"outRetry"}),(e()(),l["\u0275eld"](12,0,null,null,3,"pp-inspector-chart",[],null,[[null,"outRendered"],[null,"mousemove"]],(function(e,t,n){var l=!0,i=e.component;"outRendered"===t&&(l=!1!==i.onRendered()&&l);"mousemove"===t&&(l=!1!==i.onMouseMove(n)&&l);return l}),Ut.b,Ut.a)),l["\u0275prd"](512,null,h["\u0275NgClassImpl"],h["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](14,278528,null,0,h.NgClass,[h["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["\u0275did"](15,770048,null,0,zt.a,[De.b,Gt.a,I.a,l.ElementRef,l.Renderer2],{chartConfig:[0,"chartConfig"]},{outRendered:"outRendered"}),(e()(),l["\u0275and"](16777216,null,null,1,null,hl)),l["\u0275did"](17,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,5,0,n.chartConfig);e(t,9,0,n.isActiveLayer("loading"),10),e(t,11,0,n.isActiveLayer("retry"),n.retryMessage),e(t,14,0,n.chartVisibility),e(t,15,0,n.chartConfig),e(t,17,0,n.chartConfig&&!n.isDataEmpty)}),null)}l["\u0275ccf"]("pp-agent-data-source-chart-container",sl,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-data-source-chart-container",[],null,null,null,dl,ul)),l["\u0275did"](1,245760,null,0,sl,[F.a,ol.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]);class pl{constructor(e,t,n,l,i){this.webAppSettingDataService=e,this.messageQueueService=t,this.newUrlStateNotificationService=n,this.translateService=l,this.renderer=i,this.hostClass="l-agent-inspector-contents",this.unsubscribe=new T.b,this.chartType=Bt.a}ngOnInit(){this.coverRangeElements$=this.newUrlStateNotificationService.onUrlStateChange$.pipe(Object(C.a)(e=>e.isRealTimeMode())),this.guideMessage$=this.translateService.get("INSPECTOR.CHART_INTERACTION_GUIDE_MESSAGE"),Object(cn.a)(Object(ae.a)(this.webAppSettingDataService.getChartLayoutOption()),this.messageQueueService.receiveMessage(this.unsubscribe,y.b.INSPECTOR_CHART_SET_LAYOUT)).subscribe(e=>{this.renderer.setStyle(this.chartGroupWrapper.nativeElement,"grid-template-columns",this.getGridLayout(e))})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}getGridLayout(e){return`repeat(${e}, 1fr)`}}var gl=[["[_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column nowrap;width:100%;height:100%}.l-date-range[_ngcontent-%COMP%]{background-color:#fff;height:150px;position:relative}.l-cover[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#ccc;z-index:5;position:absolute;left:0;top:0;opacity:.5}.l-main-contents[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto}.l-chart-option-area[_ngcontent-%COMP%]{width:calc(100% - 20px);display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;margin:5px 10px 0 15px}.l-guide-text[_ngcontent-%COMP%]{font-family:'Open Sans';color:#333;font-size:14px;font-style:italic}.l-chart-group-wrap[_ngcontent-%COMP%]{display:grid;width:100%;-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;row-gap:10px;padding:10px;min-height:0;min-width:0}.l-chart-wrapper[_ngcontent-%COMP%]{overflow:hidden;min-width:0}"]],ml=l["\u0275crt"]({encapsulation:0,styles:gl,data:{}});function fl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","l-cover"]],null,null,null,null,null))],null,null)}function vl(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{chartGroupWrapper:0}),(e()(),l["\u0275eld"](1,0,null,null,7,"article",[["class","l-date-range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"pp-timeline-command-group-container",[],null,null,null,vt,ft)),l["\u0275did"](3,245760,null,0,gt,[F.a],null,null),(e()(),l["\u0275eld"](4,0,null,null,1,"pp-agent-inspector-timeline-container",[],null,null,null,yn,On)),l["\u0275did"](5,245760,null,0,Sn,[F.a,I.a,Z.a,Tn,De.b,U.a,j.a,l.ComponentFactoryResolver,l.Injector,Re],null,null),(e()(),l["\u0275and"](16777216,null,null,2,null,fl)),l["\u0275did"](7,16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](9,0,null,null,1,"pp-agent-event-view-container",[],null,null,null,Nn,Dn)),l["\u0275did"](10,245760,null,0,wn,[l.ChangeDetectorRef,F.a,De.b,Mn,U.a,l.ComponentFactoryResolver,l.Injector],null,null),(e()(),l["\u0275eld"](11,0,null,null,45,"div",[["class","l-main-contents"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"pp-agent-info-container",[],null,null,null,qn,Xn)),l["\u0275did"](13,245760,null,0,Bn,[I.a,F.a,$n,U.a,l.ComponentFactoryResolver,l.Injector,Re],null,null),(e()(),l["\u0275eld"](14,0,null,null,5,"div",[["class","l-chart-option-area"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,2,"p",[["class","l-guide-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](16,null,["",""])),l["\u0275pid"](131072,h.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](18,0,null,null,1,"pp-chart-layout-option-container",[],null,null,null,At,Dt)),l["\u0275did"](19,114688,null,0,wt,[B.a,De.b,j.a],null,null),(e()(),l["\u0275eld"](20,0,[[1,0],["chartGroupWrapper",1]],null,36,"div",[["class","l-chart-group-wrap"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](23,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](24,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](26,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](27,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](28,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](29,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](30,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](32,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](33,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](34,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](35,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](36,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](37,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](38,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](39,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](40,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](41,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](42,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](43,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](44,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](45,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](46,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](47,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](48,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](49,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](50,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](51,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](52,0,null,null,1,"pp-inspector-chart-container",[],null,null,null,qt,Yt)),l["\u0275did"](53,245760,null,0,Zt,[F.a,$t.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],{chartType:[0,"chartType"]},null),(e()(),l["\u0275eld"](54,0,null,null,2,"div",[["class","l-chart-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](55,0,null,null,1,"pp-agent-data-source-chart-container",[],null,null,null,dl,ul)),l["\u0275did"](56,245760,null,0,sl,[F.a,ol.a,R.i,j.a,U.a,l.ComponentFactoryResolver,l.Injector,Re,De.b],null,null)],(function(e,t){var n=t.component;e(t,3,0),e(t,5,0),e(t,7,0,l["\u0275unv"](t,7,0,l["\u0275nov"](t,8).transform(n.coverRangeElements$))),e(t,10,0),e(t,13,0),e(t,19,0),e(t,23,0,n.chartType.AGENT_JVM_HEAP),e(t,26,0,n.chartType.AGENT_JVM_NON_HEAP),e(t,29,0,n.chartType.AGENT_CPU),e(t,32,0,n.chartType.AGENT_TPS),e(t,35,0,n.chartType.AGENT_ACTIVE_THREAD),e(t,38,0,n.chartType.AGENT_RESPONSE_TIME),e(t,41,0,n.chartType.AGENT_OPEN_FILE_DESCRIPTOR),e(t,44,0,n.chartType.AGENT_DIRECT_BUFFER_COUNT),e(t,47,0,n.chartType.AGENT_DIRECT_BUFFER_MEMORY),e(t,50,0,n.chartType.AGENT_MAPPED_BUFFER_COUNT),e(t,53,0,n.chartType.AGENT_MAPPED_BUFFER_MEMORY),e(t,56,0)}),(function(e,t){var n=t.component;e(t,16,0,l["\u0275unv"](t,16,0,l["\u0275nov"](t,17).transform(n.guideMessage$)))}))}var bl=l["\u0275ccf"]("pp-agent-inspector-contents-container",pl,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"pp-agent-inspector-contents-container",[],[[8,"className",0]],null,null,vl,ml)),l["\u0275did"](1,245760,null,0,pl,[B.a,De.b,I.a,R.i,l.Renderer2],null,null)],(function(e,t){e(t,1,0)}),(function(e,t){e(t,0,0,l["\u0275nov"](t,1).hostClass)}))}),{},{},[]),Tl=n("yIm2"),Sl=n("o7q+"),Cl=n("s7LF"),Ol=n("+TFa"),yl=n("7006"),El=n("22Na"),Pl=n("IbkX"),Il=n("M0ag"),Rl=n("uuw7"),xl=n("IP0z"),Ml=n("/HVE"),wl=n("hOhj"),_l=n("FTGN"),Dl=n("jsEk"),Al=n("3Dce"),Nl=n("MyRj"),kl=n("lXRe");class Ll{}var Fl=n("bGL8");class jl{}class Ul{}class zl{}class Gl{}var Hl=n("5gQU"),Vl=n("daz4");class $l{}class Bl{}class Zl{}class Xl{}class Yl{}class Wl{}class ql{}var Ql=n("ezOy"),Kl=n("iSkw");const Jl={showRealTimeButton:!0,enableRealTimeMode:!0},ei={path:E.a.INSPECTOR},ti={path:E.a.INSPECTOR},ni={showRealTimeButton:!0,enableRealTimeMode:!1};E.a.REAL_TIME,E.a.INSPECTOR,E.b.APPLICATION,y.c,E.b.AGENT_ID,y.c,E.b.APPLICATION,Ql.a,E.b.PERIOD,Ql.a,E.b.END_TIME,E.b.AGENT_ID,Kl.a;var li=n("zMA2"),ii=n("/48X");n.d(t,"InspectorPageModuleNgFactory",(function(){return ai}));var ai=l["\u0275cmf"](i,[],(function(e){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[a.a,o.a,s.a,r.a,u.a,c.a,D,nt,vn,bl,Tl.a,Sl.a]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,h.NgLocalization,h.NgLocaleLocalization,[l.LOCALE_ID,[2,h["\u0275angular_packages_common_common_a"]]]),l["\u0275mpd"](4608,Cl["\u0275angular_packages_forms_forms_o"],Cl["\u0275angular_packages_forms_forms_o"],[]),l["\u0275mpd"](4608,Ol.a,Ol.a,[]),l["\u0275mpd"](4608,yl.NguiDatetime,yl.NguiDatetime,[]),l["\u0275mpd"](4608,Me,Me,[bn.c]),l["\u0275mpd"](4608,Mn,Mn,[bn.c,I.a]),l["\u0275mpd"](4608,Tn,Tn,[bn.c]),l["\u0275mpd"](4608,ol.a,ol.a,[bn.c,I.a]),l["\u0275mpd"](4608,nn.a,nn.a,[bn.c,I.a]),l["\u0275mpd"](4608,$t.a,$t.a,[bn.c,I.a]),l["\u0275mpd"](4608,$n,$n,[bn.c]),l["\u0275mpd"](1073742336,h.CommonModule,h.CommonModule,[]),l["\u0275mpd"](1073742336,qe.q,qe.q,[[2,qe.v],[2,qe.m]]),l["\u0275mpd"](1073742336,El.ClickOutsideModule,El.ClickOutsideModule,[]),l["\u0275mpd"](1073742336,Cl["\u0275angular_packages_forms_forms_d"],Cl["\u0275angular_packages_forms_forms_d"],[]),l["\u0275mpd"](1073742336,Cl.FormsModule,Cl.FormsModule,[]),l["\u0275mpd"](1073742336,Pl.b,Pl.b,[]),l["\u0275mpd"](1073742336,Il.a,Il.a,[]),l["\u0275mpd"](1073742336,Rl.a,Rl.a,[]),l["\u0275mpd"](1073742336,xl.a,xl.a,[]),l["\u0275mpd"](1073742336,Ml.b,Ml.b,[]),l["\u0275mpd"](1073742336,wl.g,wl.g,[]),l["\u0275mpd"](1073742336,_l.a,_l.a,[]),l["\u0275mpd"](1073742336,Dl.NguiDatetimePickerModule,Dl.NguiDatetimePickerModule,[]),l["\u0275mpd"](1073742336,Al.a,Al.a,[]),l["\u0275mpd"](1073742336,Nl.a,Nl.a,[]),l["\u0275mpd"](1073742336,kl.a,kl.a,[]),l["\u0275mpd"](1073742336,Ll,Ll,[]),l["\u0275mpd"](1073742336,Fl.a,Fl.a,[]),l["\u0275mpd"](1073742336,jl,jl,[]),l["\u0275mpd"](1073742336,Ul,Ul,[]),l["\u0275mpd"](1073742336,zl,zl,[]),l["\u0275mpd"](1073742336,Gl,Gl,[]),l["\u0275mpd"](1073742336,Hl.a,Hl.a,[]),l["\u0275mpd"](1073742336,Vl.a,Vl.a,[]),l["\u0275mpd"](1073742336,$l,$l,[]),l["\u0275mpd"](1073742336,Bl,Bl,[]),l["\u0275mpd"](1073742336,Zl,Zl,[]),l["\u0275mpd"](1073742336,Xl,Xl,[]),l["\u0275mpd"](1073742336,Yl,Yl,[]),l["\u0275mpd"](1073742336,Wl,Wl,[]),l["\u0275mpd"](1073742336,ql,ql,[]),l["\u0275mpd"](1073742336,i,i,[]),l["\u0275mpd"](1024,qe.k,(function(){return[[{path:"",component:Qe,children:[{path:"realtime",children:[{path:"",pathMatch:"full",redirectTo:"/inspector"},{path:":application",data:Jl,children:[{path:"",pathMatch:"full",resolve:{serverTime:li.a},component:hn},{path:":agentId",resolve:{serverTime:li.a},component:pl}]}]},{path:":application",children:[{path:"",pathMatch:"full",data:ei,component:Ql.a},{path:":period",children:[{path:"",pathMatch:"full",data:ti,component:Ql.a},{path:":endTime",data:ni,children:[{path:"",pathMatch:"full",component:hn},{path:":agentId",component:pl}]}]}]},{path:"",pathMatch:"full",component:ii.a}]}]]}),[])])}))},huS9:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var l=n("8Y7J"),i=n("XNiG"),a=n("1G5W"),o=n("Kj3r"),s=n("/uUt"),r=n("pLZG");class u{constructor(e){this.elementRef=e,this.searchMinLength=0,this.searchMaxLength=Number.MAX_SAFE_INTEGER,this.debounceTime=100,this.outCancel=new l.EventEmitter,this.outSearch=new l.EventEmitter,this.outArrowKey=new l.EventEmitter,this.unsubscribe=new i.b,this.userInput=new i.b}onKeyDown(e){const t=e.keyCode;this.isArrowKey(t)&&this.outArrowKey.emit(t)}onKeyUp(e){const t=e.keyCode,n=e.srcElement,l=n.value.trim();if(!this.isArrowKey(t))return this.isESC(t)?(n.value="",void this.outCancel.next()):void(this.useEnter?this.isEnter(t)&&this.isValidLength(l)&&this.outSearch.next(l):this.userInput.next(l))}ngOnInit(){}ngOnChanges(e){e.useEnter&&(this.useEnter?this.unsubscribe.next():this.setObservable())}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}setObservable(){this.userInput.pipe(Object(a.a)(this.unsubscribe),Object(o.a)(this.debounceTime),Object(s.a)(),Object(r.a)(e=>this.isValidLength(e))).subscribe(e=>{this.outSearch.next(e)})}isValidLength(e){return 0===e.length||e.length>=this.searchMinLength&&e.length<this.searchMaxLength}isESC(e){return 27===e}isEnter(e){return 13===e}isArrowKey(e){return e>=37&&e<=40}clear(){this.elementRef.nativeElement.value=""}setFocus(){this.elementRef.nativeElement.focus()}}}}]);